(window.webpackJsonpDato=window.webpackJsonpDato||[]).push([[0],{2215:function(e,t,n){"use strict";n.d(t,"b",(function(){return _}));var a=n(1),r=n.n(a),i=n(0),o=n.n(i),l=n(4),c=n(68),s=n(18);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function p(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b,y,h,_=["format","bold","italic","strikethrough","ordered_list","unordered_list","quote","table","link","image","show_source","undo","redo","align_left","align_center","align_right","align_justify","outdent","indent","fullscreen"],v=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,d(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this,t=this.props.namePrefix,n=_.map((function(t){return{value:t,label:e.t("wysiwygEditor.toolbar.".concat(t))}}));return o.a.createElement(s.default,{name:"".concat(t,".toolbar"),intlLabel:"wysiwygEditor.toolbar",intlHint:"wysiwygEditor.toolbar.hint",multiple:!0,options:n,component:c.default})}}])&&m(n.prototype,a),r&&m(n,r),t}(l.a);b=v,y="propTypes",h={namePrefix:r.a.string.isRequired},y in b?Object.defineProperty(b,y,{value:h,enumerable:!0,configurable:!0,writable:!0}):b[y]=h,t.a={Component:v,initialValues:{toolbar:["format","bold","italic","strikethrough","ordered_list","unordered_list","quote","table","link","image","show_source","fullscreen"]}}},2216:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(1),r=n.n(a),i=n(0),o=n.n(i),l=n(2424);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function u(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=new(n.n(l).a)({colors:{0:"rgb(53, 50, 60)",1:"rgb(255, 12, 76)",2:"rgb(171, 208, 0)",3:"rgb(255, 184, 0)",4:"rgb(123, 140, 255)",5:"rgb(140, 84, 254)",6:"rgb(0, 211, 222)",7:"rgb(232, 232, 232)",8:"rgb(111, 104, 124)",9:"rgb(255, 80, 129)",10:"rgb(204, 243, 90)",11:"rgb(255, 204, 99)",12:"rgb(181, 188, 255)",13:"rgb(197, 144, 254)",14:"rgb(118, 243, 255)",15:"rgb(254, 255, 247)"}});var f,b,y,h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,m(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props.log.split("\n").map((function(e){return function(e){for(var t="",n=0,a=0;a<e.length;a+=1){var r=e.charAt(a);"\b"===r?n+=1:(n>0&&(t=t.slice(0,-1*n),n=0),t+=r)}return t}(e.substring(e.lastIndexOf("\r")+1))}));return o.a.createElement("div",{style:{height:"".concat(15*e.length,"px")},className:"Log"},e.map((function(e,t){return o.a.createElement("div",{key:t,dangerouslySetInnerHTML:{__html:d.toHtml(e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&quot;").replace(/'/g,"&#039;"))}})})))}}])&&s(n.prototype,a),r&&s(n,r),t}(o.a.PureComponent);f=h,b="propTypes",y={log:r.a.string},b in f?Object.defineProperty(f,b,{value:y,enumerable:!0,configurable:!0,writable:!0}):f[b]=y},2217:function(e,t,n){"use strict";var a=n(1),r=n.n(a),i=n(0),o=n.n(i);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p,d,f,b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,u(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.title,n=e.children;return o.a.createElement("div",{className:"WebhookCall__detail"},o.a.createElement("div",{className:"WebhookCall__detail__title"},this.t(t)),n)}}])&&c(n.prototype,a),r&&c(n,r),t}(n(4).a);p=b,d="propTypes",f={title:r.a.string.isRequired,children:r.a.node},d in p?Object.defineProperty(p,d,{value:f,enumerable:!0,configurable:!0,writable:!0}):p[d]=f,t.a=b},2273:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=["calls","k","M"];function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(isNaN(parseFloat(e))||!isFinite(e))return"-";if(e<1)return n?"No calls":"0";if(e<2)return n?"1 call":"1";var r=Math.floor(Math.log(e)/Math.log(1e3)),i=0!==r||n?a[r]:"";return"".concat((e/Math.pow(1e3,Math.floor(r))).toFixed(t)," ").concat(i)}},2274:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=["h","k h","M h"];function r(e){if(isNaN(parseFloat(e))||!isFinite(e))return"-";if(e<1)return"0";if(e<60)return"".concat(e," s");if(e<3600)return"".concat(Math.floor(e/60)," m");var t=Math.floor(e/3600),n=Math.floor(Math.log(t)/Math.log(1e3));return"".concat((t/Math.pow(1e3,Math.floor(n))).toFixed(0)," ").concat(a[n])}},2277:function(e,t,n){"use strict";n.d(t,"f",(function(){return o})),n.d(t,"e",(function(){return u})),n.d(t,"d",(function(){return m})),n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return f}));var a=n(123),r=n(676),i=n(346);function o(){var e=a.a.netlifyClientId,t=a.a.netlifyRedirectUrl;return new Promise((function(n){var a=(window.screen.height-500)/2,i=(window.screen.width-780)/2,o="width=".concat(780,",height=").concat(500,",toolbar=0,\n      scrollbars=0,status=0,resizable=0,location=0,menubar=0,left=").concat(i,",\n      top=").concat(a,", directories=no"),l="".concat(window.location.protocol,"//").concat(window.location.host),c=window.open("https://app.netlify.com/authorize?client_id=".concat(e,"&response_type=token&redirect_uri=").concat(t,"&state=").concat(l),"netlify",o),s=Object(r.a)(t),u=s.protocol,m=s.host;window.addEventListener("message",(function e(t){t.origin==="".concat(u,"//").concat(m)&&(c.close(),window.removeEventListener("message",e),n(t.data))}))}))}var l=function(e){return function(t,n){for(var a={headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(t)}},r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return e.apply(void 0,["https://api.netlify.com/api/v1"+n].concat(i,[a]))}},c=l(i.c),s=l(i.b);function u(e){return s(e,"/sites?filter=all")}function m(e,t){return s(e,"/sites/".concat(t))}function p(e,t){return c(e,"/hooks",t)}function d(e,t,n){return c(e,"/sites/".concat(t,"/build_hooks"),n)}function f(e,t){return s(e,"/deploys/".concat(t))}},2976:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(2),o=n(0),l=n.n(o),c=n(4),s=n(35),u=n(158),m=n(8),p=n(6),d=n(10),f=n(144),b=n(943),y=n(298);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var _=l.a.createElement("path",{d:"M500 384c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12V76c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v308h436zM372.7 159.5L288 216l-85.3-113.7c-5.1-6.8-15.5-6.3-19.9 1L96 248v104h384l-89.9-187.8c-3.2-6.5-11.4-8.7-17.4-4.7z"}),v=function(e){return l.a.createElement("svg",h({viewBox:"0 0 512 512",width:"1em",height:"1em"},e),_)};function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var E=l.a.createElement("path",{d:"M512 320v160c0 17.67-14.33 32-32 32H320c-17.67 0-32-14.33-32-32V320c0-17.67 14.33-32 32-32h160c17.67 0 32 14.33 32 32zm-384-64C57.31 256 0 313.31 0 384s57.31 128 128 128 128-57.31 128-128-57.31-128-128-128zm351.03-32c25.34 0 41.18-26.67 28.51-48L412.51 16c-12.67-21.33-44.35-21.33-57.02 0l-95.03 160c-12.67 21.33 3.17 48 28.51 48h190.06z"}),O=function(e){return l.a.createElement("svg",g({viewBox:"0 0 512 512",width:"1em",height:"1em"},e),E)};function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var j=l.a.createElement("path",{d:"M519.442 288.651c-41.519 0-59.5 31.593-82.058 31.593C377.409 320.244 432 144 432 144s-196.288 80-196.288-3.297c0-35.827 36.288-46.25 36.288-85.985C272 19.216 243.885 0 210.539 0c-34.654 0-66.366 18.891-66.366 56.346 0 41.364 31.711 59.277 31.711 81.75C175.885 207.719 0 166.758 0 166.758v333.237s178.635 41.047 178.635-28.662c0-22.473-40-40.107-40-81.471 0-37.456 29.25-56.346 63.577-56.346 33.673 0 61.788 19.216 61.788 54.717 0 39.735-36.288 50.158-36.288 85.985 0 60.803 129.675 25.73 181.23 25.73 0 0-34.725-120.101 25.827-120.101 35.962 0 46.423 36.152 86.308 36.152C556.712 416 576 387.99 576 354.443c0-34.199-18.962-65.792-56.558-65.792z"}),k=function(e){return l.a.createElement("svg",w({viewBox:"0 0 576 512",width:"1em",height:"1em"},e),j)};function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var S=l.a.createElement("path",{d:"M466.5 83.7l-192-80a48.15 48.15 0 00-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z"}),N=function(e){return l.a.createElement("svg",P({viewBox:"0 0 512 512",width:"1em",height:"1em"},e),S)};function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var x=l.a.createElement("path",{d:"M192 256c61.9 0 112-50.1 112-112S253.9 32 192 32 80 82.1 80 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C51.6 288 0 339.6 0 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zM480 256c53 0 96-43 96-96s-43-96-96-96-96 43-96 96 43 96 96 96zm48 32h-3.8c-13.9 4.8-28.6 8-44.2 8s-30.3-3.2-44.2-8H432c-20.4 0-39.2 5.9-55.7 15.4 24.4 26.3 39.7 61.2 39.7 99.8v38.4c0 2.2-.5 4.3-.6 6.4H592c26.5 0 48-21.5 48-48 0-61.9-50.1-112-112-112z"}),R=function(e){return l.a.createElement("svg",T({viewBox:"0 0 640 512",width:"1em",height:"1em"},e),x)};function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var C=l.a.createElement("path",{d:"M358.4 3.2L320 48 265.6 3.2a15.9 15.9 0 00-19.2 0L192 48 137.6 3.2a15.9 15.9 0 00-19.2 0L64 48 25.6 3.2C15-4.7 0 2.8 0 16v480c0 13.2 15 20.7 25.6 12.8L64 464l54.4 44.8a15.9 15.9 0 0019.2 0L192 464l54.4 44.8a15.9 15.9 0 0019.2 0L320 464l38.4 44.8c10.5 7.9 25.6.4 25.6-12.8V16c0-13.2-15-20.7-25.6-12.8zM320 360c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16z"}),q=function(e){return l.a.createElement("svg",F({viewBox:"0 0 384 512",width:"1em",height:"1em"},e),C)};function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var I=l.a.createElement("path",{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"}),L=function(e){return l.a.createElement("svg",M({viewBox:"0 0 512 512",width:"1em",height:"1em"},e),I)},A=n(507);function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var z=l.a.createElement("path",{d:"M592 0H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h544c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zM160 408c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V104c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v304zm64 0c0 4.4-3.6 8-8 8h-16c-4.4 0-8-3.6-8-8V104c0-4.4 3.6-8 8-8h16c4.4 0 8 3.6 8 8v304zm64 0c0 4.4-3.6 8-8 8h-16c-4.4 0-8-3.6-8-8V104c0-4.4 3.6-8 8-8h16c4.4 0 8 3.6 8 8v304zm128 0c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V104c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v304zm128 0c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V104c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v304z"}),B=function(e){return l.a.createElement("svg",D({viewBox:"0 0 640 512",width:"1em",height:"1em"},e),z)};function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var H=l.a.createElement("path",{d:"M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0133.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 010 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"}),V=function(e){return l.a.createElement("svg",U({viewBox:"0 0 512 512",width:"1em",height:"1em"},e),H)},G=n(13),J=n(40),W=n(170),$=n(385),K=n(503),Q=n(68),X=n(52),Y=n(69),Z=n.n(Y),ee=n(18),te=n(118),ne=n.n(te),ae=n(56),re=n.n(ae),ie=n(126),oe=n.n(ie),le=n(797),ce=n(142),se=n(51);function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function de(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function fe(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function he(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),fe(this,be(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props.dirty,t=Object.entries(ce.a).map((function(e){var t=pe(e,2),n=t[0],a=t[1];return{value:n,label:"".concat(a," (").concat(n,")")}})),n=Object.keys(le.a).map((function(e){return{value:le.a[e],label:e}}));return l.a.createElement("div",null,l.a.createElement(f.a,{when:e,message:"messages.notsaved"}),l.a.createElement(X.default,null,l.a.createElement(ee.default,{name:"name",intlLabel:"site.name.label",type:"text",className:"form__input--large"}),l.a.createElement("div",{className:"grid space--bottom-2"},l.a.createElement("div",{className:"grid__item width-3-12"},l.a.createElement(ee.default,{name:"primary_color",intlLabel:"site.color.primary",dispatchUi:"primaryColor",component:K.a})),l.a.createElement("div",{className:"grid__item width-3-12"},l.a.createElement(ee.default,{name:"accent_color",intlLabel:"site.color.accent",dispatchUi:"accentColor",component:K.a})),l.a.createElement("div",{className:"grid__item width-3-12"},l.a.createElement(ee.default,{name:"light_color",intlLabel:"site.color.light",dispatchUi:"lightColor",component:K.a})),l.a.createElement("div",{className:"grid__item width-3-12"},l.a.createElement(ee.default,{name:"dark_color",intlLabel:"site.color.dark",dispatchUi:"darkColor",component:K.a}))),l.a.createElement(ee.default,{name:"logo",intlLabel:"site.logo.label",intlPrefix:"imageInput",component:$.default}),l.a.createElement(ee.default,{name:"locales",intlLabel:"site.locales.label",intlHint:"site.locales.hint",intlDocs:"site.locales.docs",docsHref:"https://www.datocms.com/docs/general-concepts/localization",multiple:!0,options:t,component:Q.default}),l.a.createElement(ee.default,{name:"timezone",intlLabel:"site.timezone",options:n,component:Q.default}),l.a.createElement(ee.default,{name:"require_2fa",intlLabel:"site.require2fa.label",intlHint:"site.require2fa.hint",component:W.a}),l.a.createElement(Z.a,{intlLabel:"site.button"})))}}])&&de(n.prototype,a),r&&de(n,r),t}(c.a);he(_e,"propTypes",{dirty:r.a.bool.isRequired}),he(_e,"contextTypes",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(n,!0).forEach((function(t){he(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({route:r.a.object},c.a.contextTypes));var ve,ge,Ee,Oe=Object(p.connect)((function(e,t){var n=t.site.attributes;return{initialValues:{name:n.name,locales:n.locales,primary_color:n.theme.primary_color,accent_color:n.theme.accent_color,light_color:n.theme.light_color,dark_color:n.theme.dark_color,logo:n.theme.logo,timezone:n.timezone,require_2fa:n.require_2fa},enableReinitialize:!0,validate:oe()({name:[re.a.required()],locales:[re.a.minArrayLength(1)],primary_color:[re.a.required()],accent_color:[re.a.required()],light_color:[re.a.required()],dark_color:[re.a.required()]}),onSubmit:function(e){var n,a;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=ne()(t.site),!((a=n.attributes.locales.filter((function(t){return!e.locales.includes(t)}))).length>0)){r.next=7;break}return r.next=5,regeneratorRuntime.awrap(Object(se.b)("messages.confirm.destroySiteLocale",{locales:a.map((function(e){return"".concat(ce.a[e]," (").concat(e,")")}))}));case 5:if(r.sent){r.next=7;break}return r.abrupt("return",!1);case 7:return n.attributes={name:e.name,theme:{logo:e.logo,primary_color:e.primary_color,accent_color:e.accent_color,light_color:e.light_color,dark_color:e.dark_color},locales:e.locales,timezone:e.timezone,require_2fa:e.require_2fa},delete n.relationships,r.abrupt("return",t.onSubmit(n));case 10:case"end":return r.stop()}}))}}}))(Object(J.withForm)({form:"site"})(_e)),we=n(77),je=n(78);function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Se(e,t){return!t||"object"!==ke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xe,Re,Fe,Ce,qe,Me,Ie=Object(p.connect)((function(e){return{site:e.site}}))((Ee=ge=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Se(this,Ne(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(t,e),n=t,(a=[{key:"handleSubmit",value:function(e){var t,n;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=this.props.dispatch,a.prev=1,a.next=4,regeneratorRuntime.awrap(t(Object(je.update)({data:e})));case 4:return n=["item_types","item_types.singleton_item"].join(","),a.next=7,regeneratorRuntime.awrap(t(Object(je.fetch)({force:!0,query:{include:n}})));case 7:t(Object(G.notice)("admin.site.update.success")),a.next=14;break;case 10:throw a.prev=10,a.t0=a.catch(1),t(Object(G.alert)("admin.site.update.failure")),Object(we.a)(a.t0);case 14:case"end":return a.stop()}}),null,this,[[1,10]])}},{key:"renderLoading",value:function(){return l.a.createElement("div",null,"...")}},{key:"renderForm",value:function(){var e=this.props.site;return l.a.createElement(Oe,{locales:e.attributes.locales,site:e,onSubmit:this.handleSubmit.bind(this)})}},{key:"render",value:function(){var e=this.props.site;return l.a.createElement("div",{className:"Page"},l.a.createElement("div",{className:"Page__inner"},l.a.createElement("div",{className:"Page__header"},l.a.createElement("div",{className:"Page__title"},l.a.createElement(i.FormattedMessage,{id:"adminArea.siteSettings.title"}))),l.a.createElement("div",{className:"Page__content"},e?this.renderForm():this.renderLoading())))}}])&&Pe(n.prototype,a),r&&Pe(n,r),t}(c.a),xe=ge,Re="propTypes",Fe={dispatch:r.a.func.isRequired,site:r.a.object},Re in xe?Object.defineProperty(xe,Re,{value:Fe,enumerable:!0,configurable:!0,writable:!0}):xe[Re]=Fe,ve=Ee))||ve,Le=n(456),Ae=n(2273),De=n(2274),ze=n(1016),Be=n(34),Ue=Object(o.lazy)((function(){return Promise.all([n.e(35),n.e(3)]).then(n.bind(null,2974))})),He=function(e){return l.a.createElement(o.Suspense,{fallback:l.a.createElement(Be.a,{inline:!0})},l.a.createElement(Ue,e))};function Ve(e){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Je(e,t){return!t||"object"!==Ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $e(e,t){return($e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ke=Object(p.connect)((function(e){var t=e.site;return{site:t,usage:e.subscriptionCompatibilities[t.relationships.usage.data.id],dailyStats:e.dailySiteUsages}}))((Me=qe=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Je(this,(e=We(t)).call.apply(e,[this].concat(r)))).state={cumulative:!0},n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e(Object(je.fetch)({force:!0,query:{include:"usage"}})),e(Object(ze.fetchAll)())}},{key:"renderLimit",value:function(e){var t,n,a=this.props.usage.attributes["".concat(e,"_analysis")],r=a.subscription_limit,o=a.current_usage;return e.endsWith("bytes")?(t=Object(Le.a)(r),n=Object(Le.a)(o)):e.endsWith("calls")?(t=Object(Ae.a)(r,0,!1),n=Object(Ae.a)(o,0,!1)):e.endsWith("seconds")?(t=Object(De.a)(r,0,!1),n=Object(De.a)(o,0,!1)):(t=l.a.createElement(i.FormattedNumber,{value:r}),n=l.a.createElement(i.FormattedNumber,{value:o})),l.a.createElement("div",{className:"CurrentPlan__totals__item",key:e},l.a.createElement("div",{className:"CurrentPlan__totals__item__count"},n,"/",t),l.a.createElement("div",{className:"CurrentPlan__totals__item__description"},l.a.createElement(i.FormattedMessage,{id:"limits.".concat(e)})))}},{key:"render",value:function(){var e=this,t=this.props,n=t.usage,a=t.dailyStats,r=this.state.cumulative;return n?l.a.createElement("div",{className:"Page Page--large"},l.a.createElement("div",{className:"Page__inner"},l.a.createElement("div",{className:"Page__header"},l.a.createElement("div",{className:"Page__title"},l.a.createElement(i.FormattedMessage,{id:"limits.title"}))),l.a.createElement("div",{className:"Page__content Page__content--transparent"},l.a.createElement("div",{className:"CurrentPlan__totals"},n.attributes.limits.filter((function(e){var t=n.attributes["".concat(e,"_analysis")].subscription_limit;return null!==t&&!0!==t&&t>0})).map(this.renderLimit.bind(this))),l.a.createElement("div",{className:"CurrentPlan__charts"},l.a.createElement("div",{className:"CurrentPlan__charts__header"},l.a.createElement("div",{className:"CurrentPlan__charts__title"},l.a.createElement(i.FormattedMessage,{id:"limits.dailyActivity"})),l.a.createElement("div",{className:"CurrentPlan__charts__actions"},l.a.createElement("div",{className:"button-group"},l.a.createElement("div",{className:"button-group__title"},l.a.createElement(i.FormattedMessage,{id:"limits.showChart"})),l.a.createElement("div",{className:"button-group__buttons"},l.a.createElement("button",{type:"button",onClick:function(){return e.setState({cumulative:!0})},className:["button-group__button"].concat(r&&"is-selected").join(" ")},l.a.createElement("i",{className:"icon--cumulative"}),l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"limits.cumulative"}))),l.a.createElement("button",{type:"button",onClick:function(){return e.setState({cumulative:!1})},className:["button-group__button"].concat(!r&&"is-selected").join(" ")},l.a.createElement("i",{className:"icon--chart"}),l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"limits.daily"}))))))),l.a.createElement("div",{className:"CurrentPlan__charts__content"},l.a.createElement(He,{name:this.t("limits.apiTraffic"),unit:"bytes",metrics:["assets_traffic_bytes","cda_traffic_bytes"],data:a,cumulative:r,threshold:n.attributes.traffic_bytes_analysis.subscription_limit}),l.a.createElement(He,{name:this.t("limits.apiRequests"),metrics:["cda_api_calls","cma_api_calls"],unit:"calls",data:a,cumulative:r,threshold:n.attributes.api_calls_analysis.subscription_limit}),n.attributes.video_analysis.subscription_limit&&l.a.createElement(He,{name:this.t("limits.mux_delivered_seconds"),metrics:["mux_delivered_seconds"],unit:"minutes",data:a,cumulative:r,threshold:n.attributes.mux_streaming_seconds_analysis.subscription_limit})))))):null}}])&&Ge(n.prototype,a),r&&Ge(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(qe,"propTypes",{dispatch:r.a.func.isRequired,usage:r.a.object,dailyStats:r.a.object}),Ce=Me))||Ce,Qe=n(147),Xe=n(157),Ye=n(75);function Ze(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/(^_|_$)/g,"")}function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function nt(e,t){return!t||"object"!==et(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rt(e,t){return(rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var it=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=nt(this,at(t).call(this,e))).state={activeIndex:0},n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rt(e,t)}(t,e),n=t,(a=[{key:"handleClick",value:function(e,t){t.preventDefault(),this.setState({activeIndex:e})}},{key:"renderHandle",value:function(e,t){var n=this.state.activeIndex;if(e){var a=["Tabs__handle"];return t===n?a.push("is-active"):e.props.invalid&&a.push("is-invalid"),l.a.createElement("a",{key:t,href:"#",onClick:this.handleClick.bind(this,t),className:a.join(" ")},this.t(e.props.intlLabel))}}},{key:"renderContent",value:function(e,t){var n=this.state.activeIndex;if(e)return l.a.createElement("div",{key:"content",className:"Tabs__content",style:{display:t===n?"block":"none"}},e.props.children)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,a=e.extraInfo;return l.a.createElement("div",{className:"Tabs ".concat(n||"")},l.a.createElement("div",{className:"Tabs__handles"},l.a.Children.map(t,this.renderHandle.bind(this)),a&&l.a.createElement("div",{className:"Tabs__extra-info"},a)),l.a.Children.map(t,this.renderContent.bind(this)))}}])&&tt(n.prototype,a),r&&tt(n,r),t}(c.a);function ot(){return null}!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(it,"propTypes",{children:r.a.node,className:r.a.string,extraInfo:r.a.oneOfType([r.a.string,r.a.bool])});var lt,ct,st,ut=n(131),mt=n.n(ut),pt=n(47),dt=n.n(pt);function ft(e){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function yt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ht(e,t){return!t||"object"!==ft(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _t(e){return(_t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vt(e,t){return(vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Et=Object(p.connect)((function(e,t){var n=mt()(t.itemType.attributes,["name","api_key","singleton","draft_mode_active","all_locales_required","collection_appeareance"]);return n.ordering_direction="asc",n.title_field_id=t.itemType.relationships.title_field.data&&t.itemType.relationships.title_field.data.id,t.itemType.attributes.singleton?n.ordering_method="auto":t.itemType.attributes.sortable?n.ordering_method="manual":t.itemType.attributes.tree?n.ordering_method="tree":t.itemType.relationships.ordering_field.data?(n.ordering_method="field",n.ordering_field_id=t.itemType.relationships.ordering_field.data.id,n.ordering_direction=t.itemType.attributes.ordering_direction):n.ordering_method="auto",{fields:Object.values(e.fields).filter((function(e){return e.relationships.item_type.data.id===t.itemType.id})),initialValues:n,isNewItemType:!t.itemType.id,onSubmit:function(e){var n=ne()(t.itemType);return n.attributes=mt()(e,["name","api_key","singleton","draft_mode_active","all_locales_required","collection_appeareance"]),n.attributes.modular_block=t.itemType.attributes.modular_block,n.attributes.sortable=!1,n.attributes.tree=!1,n.attributes.ordering_direction=null,n.relationships={ordering_field:{data:null},title_field:{data:e.title_field_id?{type:"field",id:e.title_field_id}:null}},e.singleton||("field"===e.ordering_method?(n.attributes.ordering_direction=e.ordering_direction||null,n.relationships.ordering_field.data={type:"field",id:e.ordering_field_id}):"manual"===e.ordering_method?n.attributes.sortable=!0:"tree"===e.ordering_method&&(n.attributes.tree=!0)),t.onSubmit(n)}}}))(lt=Object(J.withForm)({form:"itemType",validate:oe()({name:[re.a.required()],api_key:[re.a.required()],ordering_method:[re.a.required()],ordering_field_id:[re.a.requiredIf((function(e){return"field"===e.ordering_method}))],ordering_direction:[re.a.requiredIf((function(e){return"field"===e.ordering_method}))]})})((st=ct=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ht(this,_t(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vt(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this,t=this.props,n=t.isNewItemType,a=t.fields,r=t.itemType,i=t.formikBag,o=i.errors,c=i.values,s=c.singleton,u=c.ordering_method,m={basic:Object.values(mt()(o,["name","api_key","singleton"])).some((function(e){return e})),extra:Object.values(dt()(o,["name","api_key","singleton"])).some((function(e){return e}))},p=[{value:"auto",label:this.t("fieldType.options.orderByTime")},{value:"field",label:this.t("fieldType.options.orderByField")},{value:"manual",label:this.t("fieldType.options.orderDnd")},{value:"tree",label:this.t("fieldType.options.orderTree")}],d=[{value:"compact",label:this.t("fieldType.options.view.compact")},{value:"table",label:this.t("fieldType.options.view.tabular")}],f=[{value:"asc",label:this.t("fieldType.options.sorting.ascendant")},{value:"desc",label:this.t("fieldType.options.sorting.descendant")}],b=["string","date","date_time","boolean","integer","float"],y=function(t){return e.t("fieldType.".concat(t.attributes.field_type))},h=a.filter((function(e){return b.includes(e.attributes.field_type)})).sort((function(e,t){return e.attributes.position-t.attributes.position})).map((function(e){return{value:e.id,label:"".concat(e.attributes.label," (").concat(y(e),")")}})),_=a.filter((function(e){return"string"===e.attributes.field_type})).sort((function(e,t){return e.attributes.position-t.attributes.position})).map((function(e){return{value:e.id,label:"".concat(e.attributes.label," (").concat(y(e),")")}}));return l.a.createElement("div",{className:"FieldForm"},l.a.createElement(X.default,null,l.a.createElement(it,{className:"Tabs--no-modal",extraInfo:r.id&&"Model ID: ".concat(r.id)},l.a.createElement(ot,{intlLabel:"itemTypeForm.tab.basic",invalid:m.basic},l.a.createElement(ee.default,{name:"name",intlLabel:"itemType.name",intlPlaceholder:"itemType.name.placeholder",intlHint:"itemType.name.hint",wrapInput:function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bt(n,!0).forEach((function(t){gt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bt(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{onChange:function(a){var r=e.props.formikBag.setFieldValue,i=t.onChange(a);return n&&r("api_key",Ze(a.target.value)),i}})},type:"text",className:"form__input--large",autoFocus:!0}),l.a.createElement(ee.default,{name:"api_key",intlLabel:"itemType.api_key",intlPlaceholder:"itemType.api_key.placeholder",intlHint:"itemType.api_key.hint",type:"text",className:"form__input--code"}),!r.attributes.modular_block&&l.a.createElement(ee.default,{name:"singleton",intlLabel:"itemType.singleton",intlHint:"itemType.singleton.hint",intlDocs:"itemType.singleton.guide",docsHref:"https://www.datocms.com/docs/content-modelling/single-instance",component:W.a}),l.a.createElement(Z.a,{intlLabel:"itemType.button"})),!r.attributes.modular_block&&l.a.createElement(ot,{intlLabel:"itemTypeForm.tab.extra",invalid:m.extra},l.a.createElement(ee.default,{name:"draft_mode_active",intlLabel:"itemType.draftMode",intlHint:"itemType.draftMode.hint",intlDocs:"itemType.draftMode.guide",docsHref:"https://www.datocms.com/docs/general-concepts/draft-published",component:W.a}),l.a.createElement(ee.default,{name:"all_locales_required",intlLabel:"itemType.allLocalesRequired",intlHint:"itemType.allLocalesRequired.hint",component:W.a}),!s&&l.a.createElement("div",{className:"space--bottom-2"},l.a.createElement(ee.default,{name:"collection_appeareance",intlLabel:"itemType.collectionAppeareance",clearable:!1,options:d,style:{width:"100%"},component:Q.default})),!s&&l.a.createElement("div",{className:"space--bottom-2"},l.a.createElement(ee.default,{name:"ordering_method",intlLabel:"itemType.orderingMethod",clearable:!1,options:p,style:{width:"100%"},component:Q.default})),"field"===u&&l.a.createElement("div",{className:"form__field"},l.a.createElement("div",{className:"form__label"},"Ordering field"),l.a.createElement("div",{className:"grid"},l.a.createElement("div",{className:"grid__item desk-8-12"},l.a.createElement(ee.default,{showLabel:!1,name:"ordering_field_id",intlLabel:"itemType.orderingField",clearable:!1,options:h,style:{width:"100%"},component:Q.default})),l.a.createElement("div",{className:"grid__item desk-4-12"},l.a.createElement(ee.default,{showLabel:!1,name:"ordering_direction",intlLabel:"itemType.orderingDirection",clearable:!1,options:f,style:{width:"100%"},component:Q.default})))),l.a.createElement(ee.default,{name:"title_field_id",intlLabel:"itemType.titleField",clearable:!0,options:_,style:{width:"100%"},component:Q.default}),l.a.createElement(Z.a,{intlLabel:"itemType.button"})))))}}])&&yt(n.prototype,a),r&&yt(n,r),t}(c.a),gt(ct,"propTypes",{itemType:r.a.object.isRequired,isNewItemType:r.a.bool,fields:r.a.array.isRequired,formikBag:r.a.object.isRequired}),lt=st))||lt)||lt,Ot=n(304),wt=n(277);function jt(){return(jt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var kt=l.a.createElement("path",{d:"M194.35 167a16.53 16.53 0 01.28 16.51l-54.79 100.06v64.51a17.14 17.14 0 11-34.28 0V283.3l-54.75-99.79a16.67 16.67 0 1129.24-16l42.78 78 42.53-77.94a16.68 16.68 0 0129-.51zm66.16-62.29h-.07a12.75 12.75 0 00-12.75 12.79l.76 277.13a12.78 12.78 0 0012.68 12.7h.07a12.75 12.75 0 0012.8-12.81l-.76-277.13a12.78 12.78 0 00-12.73-12.7zm185.61 54.12A17.16 17.16 0 00429 175.95v115.92l-66.36-122.66a19.83 19.83 0 00-37.27 9.43v169.45a17.14 17.14 0 1034.28 0V232.16L426 354.83a19.83 19.83 0 0037.27-9.43V175.95a17.16 17.16 0 00-17.15-17.14z"}),Pt=function(e){return l.a.createElement("svg",jt({"data-name":"Layer 1",viewBox:"0 0 512 512",width:"1em",height:"1em"},e),kt)};function St(){return(St=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Nt=l.a.createElement("path",{d:"M485.6 26.4c-27.1-27.1-71.3-27.1-98.4 0l-87.1 87.1-17.8-17.8c-4.5-4.5-10.5-7-16.9-7-6.4 0-12.4 2.5-16.9 7-9.3 9.3-9.3 24.5 0 33.8l17.8 17.8-223 223C30 383.5 22.8 401 22.8 419.6c0 14.5 4.4 28.2 12.5 39.8L9.7 485.1c-4.8 4.8-4.8 12.5 0 17.2 4.8 4.8 12.5 4.8 17.2 0l25.7-25.7c11.6 8.1 25.4 12.5 39.8 12.5 18.6 0 36.1-7.2 49.2-20.4l223-223 17.8 17.8c4.7 4.7 10.8 7 16.9 7s12.3-2.3 16.9-7c4.5-4.5 7-10.5 7-16.9 0-6.4-2.5-12.4-7-16.9l-17.8-17.8 87.1-87.1c27.2-27.1 27.2-71.2.1-98.4zM127.5 454.7c-9.4 9.4-21.8 14.5-35.1 14.5-13.2 0-25.7-5.2-35.1-14.5-9.4-9.4-14.5-21.8-14.5-35.1 0-13.2 5.2-25.7 14.5-35.1l223-223 70.1 70.1-222.9 223.1z"}),Tt=function(e){return l.a.createElement("svg",St({viewBox:"0 0 512 512",width:"1em",height:"1em"},e),Nt)};function xt(){return(xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Rt=l.a.createElement("path",{d:"M138.59 212.79a20.16 20.16 0 11-20.16-20.16 20.16 20.16 0 0120.16 20.16zm117.66 20.16a20.16 20.16 0 10-20.16-20.16 20.16 20.16 0 0020.16 20.15zm137.82-40.31a20.16 20.16 0 1020.16 20.16 20.16 20.16 0 00-20.16-20.17zm-275.64 91.7a20.16 20.16 0 1020.16 20.16 20.16 20.16 0 00-20.16-20.16zm137.82-22.17a42.33 42.33 0 1042.33 42.33 42.33 42.33 0 00-42.33-42.33zm137.82 22.17a20.16 20.16 0 1020.16 20.16 20.16 20.16 0 00-20.16-20.16zm-275.64 91.72a20.16 20.16 0 1020.16 20.16 20.16 20.16 0 00-20.16-20.16zm137.82 0a20.16 20.16 0 1020.16 20.16 20.16 20.16 0 00-20.16-20.16zm137.82 0a20.16 20.16 0 1020.16 20.16 20.16 20.16 0 00-20.16-20.16zM489 81.45V448.5a38.6 38.6 0 01-38.56 38.56H63.56A38.6 38.6 0 0125 448.5V81.45a38.6 38.6 0 0138.56-38.56h62V31.35a9.42 9.42 0 0118.83 0v11.54h223.17V31.35a9.42 9.42 0 0118.83 0v11.54h64A38.6 38.6 0 01489 81.45zm-444 0v35.28h424V81.45a18.58 18.58 0 00-18.56-18.56h-64v24a9.42 9.42 0 01-18.83 0v-24H144.44v24a9.42 9.42 0 01-18.83 0v-24h-62A18.58 18.58 0 0045 81.45zM469 448.5V136.73H45V448.5a18.58 18.58 0 0018.56 18.56h386.88A18.58 18.58 0 00469 448.5z"}),Ft=function(e){return l.a.createElement("svg",xt({"data-name":"Layer 1",viewBox:"0 0 512 512",width:"1em",height:"1em"},e),Rt)};function Ct(){return(Ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var qt=l.a.createElement("path",{d:"M433.2 74.4C422.8 65 409 59.1 393.8 59.1c-10.9 0-19.7 8.8-19.7 19.7s8.8 19.7 19.7 19.7c10.9 0 19.7 8.8 19.7 19.7V197c0 23.6 10.7 44.6 27.2 59.1-16.5 14.5-27.2 35.4-27.2 59.1V394c0 10.9-8.8 19.7-19.7 19.7-10.9 0-19.7 8.8-19.7 19.7 0 10.9 8.8 19.7 19.7 19.7 32.6 0 59.1-26.5 59.1-59.1v-78.8c0-21.7 17.7-39.4 39.4-39.4 10.9 0 19.7-8.8 19.7-19.7s-8.8-19.7-19.7-19.7c-21.7 0-39.4-17.7-39.4-39.4v-78.8c0-15.2-5.9-28.9-15.4-39.4l-4.3-4.4zM98.5 196.9v-78.8c0-10.9 8.8-19.7 19.7-19.7 10.9 0 19.7-8.8 19.7-19.7S129.1 59 118.2 59c-32.6 0-59.1 26.5-59.1 59.1v78.8c0 21.7-17.7 39.4-39.4 39.4C8.8 236.3 0 245.1 0 256s8.8 19.7 19.7 19.7c21.7 0 39.4 17.7 39.4 39.4v78.8c0 32.6 26.5 59.1 59.1 59.1 10.9 0 19.7-8.8 19.7-19.7s-8.8-19.7-19.7-19.7c-10.9 0-19.7-8.8-19.7-19.7v-78.8c0-23.6-10.7-44.6-27.2-59.1 16.5-14.5 27.2-35.4 27.2-59.1z"}),Mt=l.a.createElement("circle",{cx:256,cy:187.1,r:29.5}),It=l.a.createElement("path",{d:"M256 295.4c-10.9 0-19.7 8.8-19.7 19.7v59.1c0 10.9 8.8 19.7 19.7 19.7s19.7-8.8 19.7-19.7v-59.1c0-10.9-8.8-19.7-19.7-19.7z"}),Lt=function(e){return l.a.createElement("svg",Ct({viewBox:"0 0 512 512",width:"1em",height:"1em"},e),qt,Mt,It)};function At(){return(At=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Dt=l.a.createElement("path",{d:"M256 33.66c-89.14 0-161.67 72.53-161.67 161.68C94.33 283.11 205.9 424 240.09 465a20.31 20.31 0 0015.63 7.34 20.32 20.32 0 0015.63-7.31c14.48-17.33 51.69-63.2 84.5-114.84 41-64.58 61.83-116.68 61.83-154.87C417.7 106.2 345.16 33.66 256 33.66zm83 305.84c-32.18 50.65-68.74 95.72-83 112.74a.32.32 0 01-.28.13.32.32 0 01-.28-.13c-14.17-17-50.6-62.11-82.65-112.75-38.24-60.49-58.46-110.29-58.46-144.14 0-78.13 63.55-141.68 141.67-141.68s141.7 63.57 141.7 141.7c0 33.83-20.3 83.63-58.7 144.14zm-30.15-146.87A52.85 52.85 0 11256 139.78a52.85 52.85 0 0152.85 52.85z"}),zt=function(e){return l.a.createElement("svg",At({"data-name":"Layer 1",viewBox:"0 0 512 512",width:"1em",height:"1em"},e),Dt)};function Bt(){return(Bt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Ut=l.a.createElement("path",{d:"M466.22 11.16H116.94a35.82 35.82 0 00-35.78 35.78v52.12H45.78A35.82 35.82 0 0010 134.84v331.38A35.82 35.82 0 0045.78 502h349.28a35.82 35.82 0 0035.78-35.78V414.1h35.38A35.82 35.82 0 00502 378.32V46.94a35.82 35.82 0 00-35.78-35.78zM45.78 119.06h349.28a15.8 15.8 0 0115.78 15.78v248.81l-58.17-58.17a37 37 0 00-52.27 0L261 364.87 133.13 237a46.1 46.1 0 00-65.19 0L30 274.91V134.84a15.8 15.8 0 0115.78-15.78zM30 466.22v-163l52.08-52.08a26.1 26.1 0 0136.91 0L349.87 482H45.78A15.8 15.8 0 0130 466.22zM395.06 482h-16.9l-103-103 39.38-39.38a17 17 0 0124 0l72.31 72.31v54.29A15.8 15.8 0 01395.06 482zM482 378.32a15.8 15.8 0 01-15.78 15.78h-35.38V134.84a35.82 35.82 0 00-35.78-35.78h-293.9V46.94a15.8 15.8 0 0115.78-15.78h349.28A15.8 15.8 0 01482 46.94zM248 218.41A43.61 43.61 0 11291.58 262 43.61 43.61 0 01248 218.41z"}),Ht=function(e){return l.a.createElement("svg",Bt({"data-name":"Layer 1",viewBox:"0 0 512 512",width:"1em",height:"1em"},e),Ut)};function Vt(){return(Vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Gt=l.a.createElement("path",{d:"M157.14 346.15A16.86 16.86 0 01140.3 363H34.93a16.84 16.84 0 110-33.67h35.42V200.78l-13 13a17 17 0 11-24-24l34.44-34.44a21.73 21.73 0 0137.09 15.36v158.61h35.42a16.86 16.86 0 0116.84 16.84zm159.23-106.48c4.07-8.15 6.14-17.92 6.14-29 0-17.59-6.39-32.91-19-45.51s-27.91-19-45.51-19-32.91 6.39-45.51 19-19 27.91-19 45.51c0 15.8 4.86 29.58 14.46 40.94a17.23 17.23 0 0013 6.12h.15a17.26 17.26 0 0013-5.9 17.26 17.26 0 00.35-22.31 28.7 28.7 0 01-6.45-18.88 30.08 30.08 0 018.81-21.77 29.23 29.23 0 0142.3 0 30.1 30.1 0 018.89 21.77c0 10.35-5.33 21.54-15.9 33.32l-73.21 83.31A21.51 21.51 0 00215 363h90.64a16.84 16.84 0 000-33.67h-63.41l54.86-62.46c9.05-10.46 15.35-19.36 19.28-27.2zm170 31.76a64.4 64.4 0 00-13.81-17.52c12.83-11.75 19.33-26.94 19.33-45.28a62.37 62.37 0 00-62.49-62.49c-17.23 0-32.07 6.15-44.09 18.29a60.64 60.64 0 00-16.5 29.51 17.28 17.28 0 0033.66 7.88 28.43 28.43 0 017.4-13.55 25.63 25.63 0 0119.54-8.44 26.09 26.09 0 0119.71 8.48 28.17 28.17 0 018.24 20.34 27.68 27.68 0 01-8.21 20.16 26.32 26.32 0 01-12.7 7.54A18.05 18.05 0 00422.91 254a18.32 18.32 0 0014 17.74 26.11 26.11 0 0113.83 8.26c5.89 6.87 8.63 13.64 8.63 21.32a30.08 30.08 0 01-8.81 21.77 29.23 29.23 0 01-42.31 0 30.07 30.07 0 01-8.06-14.64 17.26 17.26 0 10-33.75 7.3 62.78 62.78 0 0017.45 31.08c12.59 12.6 27.91 19 45.51 19s32.91-6.39 45.51-19 19-27.91 19-45.51a62.33 62.33 0 00-7.54-29.89z"}),Jt=function(e){return l.a.createElement("svg",Vt({"data-name":"Layer 1",viewBox:"0 0 512 512",width:"1em",height:"1em"},e),Gt)};function Wt(){return(Wt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var $t=l.a.createElement("path",{d:"M458.39 187.7h-127.8V71.51A27.56 27.56 0 00303.06 44H65.6a27.56 27.56 0 00-27.53 27.51V296.8a27.56 27.56 0 0027.53 27.52h59.86a167.35 167.35 0 0067.94 68.11v48.08A27.56 27.56 0 00220.93 468h237.46a27.56 27.56 0 0027.53-27.53V215.23a27.56 27.56 0 00-27.53-27.53zm7.53 27.53V233H213.4v-17.77a7.54 7.54 0 017.53-7.53h237.46a7.53 7.53 0 017.53 7.53zM65.6 64h237.46a7.54 7.54 0 017.53 7.53V89.3H58.07V71.51A7.54 7.54 0 0165.6 64zm0 240.34a7.53 7.53 0 01-7.53-7.53V109.3h252.52v78.4h-89.66a27.56 27.56 0 00-27.53 27.53v89.09H138A145 145 0 01126.83 263a20.16 20.16 0 10-20 1.12 164.84 164.84 0 009.57 40.24zm83 20h44.8v44.93a147.33 147.33 0 01-44.79-44.95zM458.39 448H220.93a7.54 7.54 0 01-7.53-7.53v-39a164.84 164.84 0 0040.6 9.8 20.15 20.15 0 101.12-20A145 145 0 01213.4 380V253h252.52v187.51a7.54 7.54 0 01-7.53 7.49z",fill:"#231f20"}),Kt=function(e){return l.a.createElement("svg",Wt({"data-name":"Layer 1",viewBox:"0 0 512 512",width:"1em",height:"1em"},e),$t)};function Qt(){return(Qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Xt=l.a.createElement("path",{d:"M409.356 336.464h-21a10 10 0 000 20h21a10 10 0 000-20zm-57.14 0h-21a10 10 0 100 20h21a10 10 0 000-20zm-57.15 0h-21a10 10 0 000 20h21a10 10 0 100-20zm-57.14 0h-21a10 10 0 000 20h21a10 10 0 000-20zm-57.14 0h-21a10 10 0 000 20h21a10 10 0 100-20zm-57.14 0h-21a10 10 0 000 20h21a10 10 0 000-20zm285.71-124.6h-21a10 10 0 000 20h21a10 10 0 000-20zm-57.14 0h-21a10 10 0 000 20h21a10 10 0 000-20zm-57.15 0h-21a10 10 0 000 20h21a10 10 0 000-20zm-57.14 0h-21a10 10 0 000 20h21a10 10 0 000-20zm-57.14 0h-21a10 10 0 000 20h21a10 10 0 000-20zm-57.14 0h-21a10 10 0 000 20h21a10 10 0 100-20zm-74.67 51.8a10 10 0 00-10 10v21a10 10 0 0020 0v-21a10 10 0 00-10-10zm414.05 0a10 10 0 00-10 10v21a10 10 0 0020 0v-21a10 10 0 00-10-10zm0 55.27a10 10 0 00-10 10 7.541 7.541 0 01-7.53 7.53 10 10 0 000 20 27.561 27.561 0 0027.53-27.53 10 10 0 00-10-10zM445.5 211.864a10 10 0 000 20 7.541 7.541 0 017.53 7.53 10 10 0 0020 0 27.561 27.561 0 00-27.53-27.53zm-378.99 124.6a7.541 7.541 0 01-7.53-7.53 10 10 0 00-20 0 27.561 27.561 0 0027.53 27.53 10 10 0 100-20zm0-124.6a27.561 27.561 0 00-27.53 27.53 10 10 0 0020 0 7.541 7.541 0 017.53-7.53 10 10 0 000-20zM445.5 39.784H66.506a27.561 27.561 0 00-27.53 27.53v88.61a27.561 27.561 0 0027.53 27.53H445.5a27.561 27.561 0 0027.53-27.53v-88.61a27.561 27.561 0 00-27.53-27.53zm7.53 116.14a7.541 7.541 0 01-7.53 7.53H66.506a7.541 7.541 0 01-7.53-7.53v-88.61a7.541 7.541 0 017.53-7.53H445.5a7.541 7.541 0 017.53 7.53zM119.986 426.544a10 10 0 01-10 10h-20.67v20.67a10 10 0 01-20 0v-20.67h-20.66a10 10 0 010-20h20.66v-20.67a10 10 0 0120 0v20.67h20.67a10 10 0 0110 10z"}),Yt=function(e){return l.a.createElement("svg",Qt({"data-name":"Layer 1",viewBox:"0 0 512 512",width:"1em",height:"1em"},e),Xt)};function Zt(){return(Zt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var en=l.a.createElement("path",{d:"M145.52 183.39L72.9 256l72.61 72.61a16.93 16.93 0 01-23.94 23.94l-90.16-90.16a9 9 0 010-12.78l90.17-90.17a17 17 0 0123.75-.19 16.93 16.93 0 01.19 24.13zM327 116.88a17 17 0 00-23 7.37l-126.54 248a17 17 0 1030.37 15.5l126.53-248a17.1 17.1 0 00-7.36-22.87zm153.59 132.73l-90.17-90.17a17 17 0 00-23.75-.19 16.93 16.93 0 00-.19 24.13L439.1 256l-72.61 72.61a16.93 16.93 0 0023.94 23.94l90.17-90.16a9 9 0 000-12.78z"}),tn=function(e){return l.a.createElement("svg",Zt({"data-name":"Layer 1",viewBox:"0 0 512 512",width:"1em",height:"1em"},e),en)};function nn(){return(nn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var an,rn,on,ln=l.a.createElement("path",{d:"M49.52 92.64v-40A11.45 11.45 0 0161 41.22h148.5a11.45 11.45 0 0111.45 11.45v40a17.14 17.14 0 01-17.14 17.14 17.14 17.14 0 01-17.14-17.14V75.5h-34.3v120a17.14 17.14 0 01-34.28 0v-120H83.8v17.14a17.14 17.14 0 11-34.28 0zm411.74 166.25H51a10 10 0 000 20h410.3a10 10 0 000-20zm0 60H51a10 10 0 000 20h410.3a10 10 0 000-20zm0 61H51a10 10 0 000 20h410.3a10 10 0 000-20zm-178-221.34h178a10 10 0 000-20h-178a10 10 0 000 20zm178 40h-178a10 10 0 000 20h178a10 10 0 000-20zm0 242.34H51a10 10 0 000 20h410.3a10 10 0 000-20z"}),cn=[{name:"text",types:["string","text"]},{name:"rich_text",types:["rich_text"]},{name:"media",types:["file","gallery","video"]},{name:"datetime",types:["date","date_time"]},{name:"number",types:["integer","float"]},{name:"boolean",types:["boolean"]},{name:"location",types:["lat_lon"]},{name:"color",types:["color"]},{name:"seo",types:["slug","seo"]},{name:"reference",types:["link","links"]},{name:"json",types:["json"]}],sn={boolean:Pt,color:Tt,datetime:Ft,json:Lt,location:zt,media:Ht,number:Jt,reference:Kt,rich_text:Yt,seo:tn,text:function(e){return l.a.createElement("svg",nn({"data-name":"Layer 1",viewBox:"0 0 512 512",width:"1em",height:"1em"},e),ln)}},un=n(202),mn=n(64);function pn(e){return(pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function fn(e,t){return!t||"object"!==pn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bn(e){return(bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yn(e,t){return(yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var hn,_n,vn,gn,En=Object(p.connect)((function(e,t){return{itemTypes:e.itemTypes,otherRichTextFields:Object.values(e.fields).filter((function(e){return"rich_text"===e.attributes.field_type})).filter((function(e){return e.id!==t.field.id}))}}))((on=rn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),fn(this,bn(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yn(e,t)}(t,e),n=t,(a=[{key:"handleDeleteModularBlock",value:function(e,t){var n,a,r,i,o,l;return regeneratorRuntime.async((function(c){for(;;)switch(c.prev=c.next){case 0:return n=this.props,a=n.dispatch,r=n.otherRichTextFields,i=n.field,t.preventDefault(),c.next=4,regeneratorRuntime.awrap(Object(se.b)("messages.confirm.destroyBlock"));case 4:if(c.sent){c.next=6;break}return c.abrupt("return");case 6:return c.prev=6,o=r.filter((function(t){return t.attributes.validators.rich_text_blocks.item_types.includes(e)})).length>0,delete(l=ne()(i)).relationships,l.attributes.validators.rich_text_blocks.item_types=i.attributes.validators.rich_text_blocks.item_types.filter((function(t){return t!==e})),c.next=13,regeneratorRuntime.awrap(a(Object(un.update)({id:i.id,data:l})));case 13:if(c.t0=!o,!c.t0){c.next=18;break}return c.next=17,regeneratorRuntime.awrap(Object(se.b)("admin.modularBlock.destroyConfirm"));case 17:c.t0=c.sent;case 18:if(!c.t0){c.next=22;break}return c.next=21,regeneratorRuntime.awrap(a(Object(Qe.destroy)({id:e})));case 21:this.refreshState();case 22:a(Object(G.notice)("admin.modularBlock.removed.success")),c.next=28;break;case 25:c.prev=25,c.t1=c.catch(6),a(Object(G.alert)("admin.modularBlock.removed.failure"));case 28:case"end":return c.stop()}}),null,this,[[6,25]])}},{key:"refreshState",value:function(){var e=this.props.dispatch,t=["item_types","item_types.singleton_item","item_types.fields","menu_items"].join(",");return e(Object(je.fetch)({force:!0,query:{include:t}}))}},{key:"renderModularBlock",value:function(e){var t=this.props,n=t.itemTypes,a=t.itemTypeId;return l.a.createElement("div",{className:"FieldRow__modular-blocks__item",href:"#",key:e},l.a.createElement("span",{className:"FieldRow__modular-blocks__item__name"},n[e].attributes.name),l.a.createElement("span",{className:"FieldRow__modular-blocks__item__api-key"},n[e].attributes.api_key),l.a.createElement("div",{className:"FieldRow__modular-blocks__item__actions"},l.a.createElement(s.a,{to:"/admin/item_types/".concat(a,"/modular_blocks/").concat(e),className:"button button--micro"},l.a.createElement(i.FormattedMessage,{id:"fieldRow.edit"})),l.a.createElement("a",{href:"#",onClick:this.handleDeleteModularBlock.bind(this,e),className:"button button--micro button--alert"},l.a.createElement(i.FormattedMessage,{id:"fieldRow.remove"}))))}},{key:"render",value:function(){var e=this.props,t=e.field,n=e.itemTypeId,a=e.itemTypes;return l.a.createElement("div",{className:"FieldRow__modular-blocks"},l.a.createElement("div",{className:"FieldRow__modular-blocks__title"},"Modular blocks:"),t.attributes.validators.rich_text_blocks.item_types.concat().sort((function(e,t){return a[e].attributes.name.localeCompare(a[t].attributes.name)})).map(this.renderModularBlock.bind(this)),l.a.createElement("div",{className:"FieldRow__modular-blocks__actions"},l.a.createElement(s.a,{to:"/admin/item_types/".concat(n,"/fields/").concat(t.id,"/modular_blocks/new"),className:"button button--tiny"},l.a.createElement(mn.a,null),l.a.createElement(i.FormattedMessage,{id:"itemType.modularBlock.add"}))))}}])&&dn(n.prototype,a),r&&dn(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(rn,"propTypes",{field:r.a.object.isRequired,itemTypes:r.a.object.isRequired,otherRichTextFields:r.a.array.isRequired,dispatch:r.a.func.isRequired,itemTypeId:r.a.string.isRequired}),an=on))||an,On=n(53);function wn(e){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jn(){return(jn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function kn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Pn(e,t){return!t||"object"!==wn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sn(e){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nn(e,t){return(Nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Tn,xn,Rn,Fn,Cn=(hn=Object(p.connect)((function(e){return{itemTypes:e.itemTypes}})),Object(f.i)(_n=hn((gn=vn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Pn(this,Sn(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nn(e,t)}(t,e),n=t,(a=[{key:"handleDestroy",value:function(e){var t=this.props.onDestroy;e.preventDefault(),e.stopPropagation(),t()}},{key:"render",value:function(){var e=this,t=this.props,n=t.field,a=t.index,r=t.itemTypes,o=t.itemTypeId,c=t.match.url,u=[l.a.createElement("span",{key:"desc"},l.a.createElement(i.FormattedMessage,{id:"fieldType.".concat(n.attributes.field_type)}))];if(["link","links"].includes(n.attributes.field_type)){var m=(n.attributes.validators.items_item_type||n.attributes.validators.item_item_type).item_types.map((function(e){return l.a.createElement(s.a,{key:e,to:"/admin/item_types/".concat(e)},r[e]?r[e].attributes.name:"Model #".concat(e))}));u.push(l.a.createElement("span",{key:"links"}," → ",Object(wt.a)(m,", ")))}var p=cn.find((function(e){return e.types.includes(n.attributes.field_type)})),d=sn[p.name];return l.a.createElement(On.b,{draggableId:n.id,index:a},(function(t,a){return l.a.createElement("div",jn({className:["FieldRow"].concat(a.isDragging?["is-dragging"]:[""]).join(" "),ref:t.innerRef},t.draggableProps),l.a.createElement("div",{className:"FieldRow__row"},l.a.createElement("div",jn({className:"FieldRow__handle"},t.dragHandleProps),l.a.createElement("i",{className:"icon--hamburger"})),l.a.createElement("div",{className:"FieldRow__body"},l.a.createElement("div",{className:"FieldRow__icon"},l.a.createElement(d,null)),l.a.createElement("div",{className:"FieldRow__info"},l.a.createElement("div",null,l.a.createElement("span",{className:"FieldRow__label"},n.attributes.label,n.attributes.validators.required&&"*"),l.a.createElement("span",{className:"FieldRow__api"},n.attributes.api_key),l.a.createElement("span",{className:"FieldRow__item-type"},u))),l.a.createElement("div",{className:"FieldRow__actions"},l.a.createElement(s.a,{to:"".concat(c,"/fields/").concat(n.id,"/edit"),className:"button button--micro"},l.a.createElement(i.FormattedMessage,{id:"fieldRow.edit"})),l.a.createElement("a",{href:"#",onClick:e.handleDestroy.bind(e),className:"button button--micro button--alert"},l.a.createElement(i.FormattedMessage,{id:"fieldRow.remove"}))))),"rich_text"===n.attributes.field_type&&l.a.createElement(En,{itemTypeId:o,field:n}))}))}}])&&kn(n.prototype,a),r&&kn(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(vn,"propTypes",{field:r.a.object.isRequired,itemTypes:r.a.object.isRequired,match:r.a.object.isRequired,index:r.a.number.isRequired,itemTypeId:r.a.string.isRequired,onDestroy:r.a.func.isRequired}),_n=gn))||_n)||_n),qn=n(62),Mn=n(122);function In(e){return(In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ln(){return(Ln=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function An(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?An(n,!0).forEach((function(t){Vn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):An(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Bn(e){return(Bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Un(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hn(e,t){return(Hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Gn,Jn,Wn,$n,Kn,Qn,Xn=Object(f.i)((Fn=Rn=function(e){function t(){var e,n,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return a=this,n=!(r=(e=Bn(t)).call.apply(e,[this].concat(o)))||"object"!==In(r)&&"function"!=typeof r?Un(a):r,Vn(Un(n),"state",{pendingMovement:null,disableRender:!1}),n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hn(e,t)}(t,e),n=t,(a=[{key:"shouldComponentUpdate",value:function(e,t){return!t.disableRender}},{key:"handleDestroyField",value:function(e){var t,n,a,r;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=this.props,n=t.dispatch,a=t.itemType,i.next=3,regeneratorRuntime.awrap(Object(se.b)("messages.confirm.destroyField"));case 3:if(i.sent){i.next=5;break}return i.abrupt("return");case 5:return i.prev=5,i.next=8,regeneratorRuntime.awrap(n(Object(un.destroy)({id:e.id})));case 8:n(Object(G.notice)("admin.itemType.destroyField.success")),n(Object(Qe.fetch)({id:a.id})),this.setState({pendingMovement:null}),i.next=18;break;case 13:i.prev=13,i.t0=i.catch(5),this.setState({pendingMovement:null}),r=i.t0.data&&i.t0.data.find((function(e){return"USED_AS_SLUG_SOURCE"===e.attributes.code})),n(r?Object(G.alert)(this.t("admin.itemType.destroyField.neededBySlugField",{slugField:r.attributes.details.field_label})):Object(G.alert)("admin.itemType.destroyField.failure"));case 18:case"end":return i.stop()}}),null,this,[[5,13]])}},{key:"handleDragEnd",value:function(e){var t,n,a,r,i,o,l,c,s,u,m=this;return regeneratorRuntime.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(t=this.props,n=t.dispatch,a=t.itemType,r=t.fields,e.destination){p.next=3;break}return p.abrupt("return");case 3:return p.next=5,regeneratorRuntime.awrap(new Promise((function(t){m.setState({pendingMovement:e},t)})));case 5:return p.next=7,regeneratorRuntime.awrap(new Promise((function(e){m.setState({disableRender:!0},e)})));case 7:return p.prev=7,i=r[e.source.index],o=ne()(i),l=o.id,c=o.type,s=o.attributes,delete(u=Dn({},s,{position:Object(Mn.a)(r,e)})).appeareance.type,delete u.updated_at,p.next=15,regeneratorRuntime.awrap(n(Object(un.update)({id:l,data:{id:l,type:c,attributes:u}})));case 15:return p.next=17,regeneratorRuntime.awrap(n(Object(Qe.fetch)({id:a.id})));case 17:n(Object(G.notice)("admin.itemType.reorderField.success")),this.setState({pendingMovement:null,disableRender:!1}),p.next=25;break;case 21:p.prev=21,p.t0=p.catch(7),n(Object(G.alert)("admin.itemType.reorderField.failure")),this.setState({pendingMovement:null,disableRender:!1});case 25:case"end":return p.stop()}}),null,this,[[7,21]])}},{key:"renderFields",value:function(){var e=this,t=this.props,n=t.fields,a=t.match.url,r=t.locales,o=t.itemType,c=this.state.pendingMovement;return l.a.createElement("div",{className:"Page__content Page__content--transparent"},l.a.createElement(On.a,{onDragEnd:this.handleDragEnd},l.a.createElement(On.c,{droppableId:"droppable"},(function(t,a){return l.a.createElement("div",Ln({},t.droppableProps,{ref:t.innerRef,className:a.isDraggingOver?"is-dragging-over":""}),Object(Mn.b)(n,c).map((function(t,n){return l.a.createElement(Cn,{key:t.id,index:n,itemTypeId:o.id,field:t,locales:r,onDestroy:e.handleDestroyField.bind(e,t)})})),t.placeholder)}))),l.a.createElement("div",{className:"space--top-2"},l.a.createElement(s.a,{to:"".concat(a,"/fields/new"),className:"button"},l.a.createElement(mn.a,null),l.a.createElement(i.FormattedMessage,{id:"itemType.row.add"}))))}},{key:"renderBlankSlate",value:function(){var e=this.props,t=e.itemType,n=e.modularBlock,a=e.match.url,r=n?"modularBlock":"itemType",o=["blank-slate"],c=["button","button--primary"];return n?o.push("blank-slate--tiny"):c.push("button--large"),l.a.createElement("div",{className:o.join(" ")},l.a.createElement("p",{className:"blank-slate__title"},l.a.createElement(i.FormattedMessage,{id:"admin.".concat(r,".noFields.title")})),l.a.createElement("p",{className:"blank-slate__description"},this.t("admin.".concat(r,".noFields.description"),{name:t.attributes.name})),l.a.createElement(s.a,{to:"".concat(a,"/fields/new"),className:c.join(" ")},l.a.createElement(mn.a,null),l.a.createElement(i.FormattedMessage,{id:"itemType.row.add"})))}},{key:"render",value:function(){return 0===this.props.fields.length?this.renderBlankSlate():this.renderFields()}}])&&zn(n.prototype,a),r&&zn(n,r),t}(c.a),Vn(Rn,"propTypes",{dispatch:r.a.func.isRequired,modularBlock:r.a.bool,fields:r.a.array,locales:r.a.array,itemType:r.a.object,match:r.a.object.isRequired}),Gn=(xn=Fn).prototype,Jn="handleDragEnd",Wn=[qn.a],$n=Object.getOwnPropertyDescriptor(xn.prototype,"handleDragEnd"),Kn=xn.prototype,Qn={},Object.keys($n).forEach((function(e){Qn[e]=$n[e]})),Qn.enumerable=!!Qn.enumerable,Qn.configurable=!!Qn.configurable,("value"in Qn||Qn.initializer)&&(Qn.writable=!0),Qn=Wn.slice().reverse().reduce((function(e,t){return t(Gn,Jn,e)||e}),Qn),Kn&&void 0!==Qn.initializer&&(Qn.value=Qn.initializer?Qn.initializer.call(Kn):void 0,Qn.initializer=void 0),void 0===Qn.initializer&&(Object.defineProperty(Gn,Jn,Qn),Qn=null),Tn=xn))||Tn;var Yn=Object(i.injectIntl)(Object(p.connect)((function(e,t){var n=t.itemType,a=e.site?e.site.attributes.locales:[];return{itemType:n,fields:Object(d.getFieldsForItemType)(e,n).sort((function(e,t){return e.attributes.position-t.attributes.position})).filter((function(e){return!!e})),locales:a}}))(Xn)),Zn=n(65);function ea(){return(ea=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function ta(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function na(e){var t=e.userLinks,n=e.limit,a=ta(e,["userLinks","limit"]),r=function(e){return l.a.createElement(Zn.a,ea({userLink:e},a))};return t.length>n?l.a.createElement(l.a.Fragment,null,Object(wt.a)(t.slice(0,n).map(r),", "),"and ",t.length-n," other users"):Object(wt.a)(t.map(r),", "," and ")}na.propTypes={userLinks:r.a.array,limit:r.a.number},na.defaultProps={limit:2};var aa,ra,ia,oa=na;function la(e){return(la="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ca(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function sa(e,t){return!t||"object"!==la(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ua(e){return(ua=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ma(e,t){return(ma=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pa=Object(p.connect)()((ia=ra=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),sa(this,ua(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ma(e,t)}(t,e),n=t,(a=[{key:"handleClose",value:function(){var e=this.props,t=e.itemType;e.history.replace("/admin/item_types/".concat(t.id))}},{key:"handleSubmitItemType",value:function(e){var t,n,a,r;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=this.props,n=t.dispatch,a=t.history,i.prev=1,r=ne()(e),i.next=5,regeneratorRuntime.awrap(n(Object(Qe.update)({id:e.id,data:r})));case 5:n(Object(G.notice)("admin.itemType.update.success")),a.replace("/admin/item_types/".concat(e.id)),i.next=13;break;case 9:throw i.prev=9,i.t0=i.catch(1),n(Object(G.alert)("admin.itemType.update.failure")),Object(we.a)(i.t0);case 13:case"end":return i.stop()}}),null,this,[[1,9]])}},{key:"render",value:function(){var e=this.props.itemType;return l.a.createElement(Ye.default,{freeContent:!0,localeKey:e.attributes.modular_block?"itemType.editModularBlock":"itemType.editItemType",noCloseListeners:!0,onClose:this.handleClose.bind(this)},l.a.createElement(Et,{itemType:e,onSubmit:this.handleSubmitItemType.bind(this)}))}}])&&ca(n.prototype,a),r&&ca(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ra,"propTypes",{dispatch:r.a.func.isRequired,itemType:r.a.object,history:r.a.object.isRequired}),aa=ia))||aa;function da(e){return(da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fa(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ba(e,t){return!t||"object"!==da(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ya(e){return(ya=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ha(e,t){return(ha=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _a=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ba(this,ya(t).call(this,e))).state={selectedGroup:null},n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ha(e,t)}(t,e),n=t,(a=[{key:"handleSelectFieldType",value:function(e,t){var n=this.props.onSelect;t.preventDefault(),n(e)}},{key:"handleSelectGroup",value:function(e,t){var n=this.props.onSelect;t.preventDefault(),null===e||e.types.length>1?this.setState({selectedGroup:e}):n(e.types[0])}},{key:"renderFieldType",value:function(e){return l.a.createElement("a",{key:e,href:"#",onClick:this.handleSelectFieldType.bind(this,e),className:"FieldTypeSelector__field"},l.a.createElement("div",{className:"FieldTypeSelector__field__label"},l.a.createElement(i.FormattedMessage,{id:"fieldType.".concat(e)})),l.a.createElement("div",{className:"FieldTypeSelector__field__description"},l.a.createElement(i.FormattedMessage,{id:"fieldTypeHint.".concat(e)})))}},{key:"renderGroupFieldTypes",value:function(){var e=this.state.selectedGroup,t=sn[e.name];return l.a.createElement("div",{className:"FieldTypeSelector"},l.a.createElement("div",{className:"FieldTypeSelector__fields"},l.a.createElement("div",{className:"FieldTypeSelector__fields__group"},l.a.createElement("div",null,l.a.createElement("div",{className:"FieldTypeSelector__group__icon"},l.a.createElement(t,null)),l.a.createElement("div",{className:"FieldTypeSelector__group__label"},l.a.createElement(i.FormattedMessage,{id:"fieldGroup.".concat(e.name,".title")}))),l.a.createElement("a",{href:"#",onClick:this.handleSelectGroup.bind(this,null),className:"FieldTypeSelector__fields__group__back"},"« Change field type")),l.a.createElement("div",{className:"FieldTypeSelector__fields__items"},e.types.map(this.renderFieldType.bind(this)))))}},{key:"renderGroup",value:function(e){var t=sn[e.name];return l.a.createElement("div",{className:"FieldTypeSelector__group",key:e.name},l.a.createElement("a",{key:e.name,href:"#",onClick:this.handleSelectGroup.bind(this,e),className:"FieldTypeSelector__group__icon"},l.a.createElement(t,null)),l.a.createElement("div",{className:"FieldTypeSelector__group__label"},l.a.createElement(i.FormattedMessage,{id:"fieldGroup.".concat(e.name,".title")})),l.a.createElement("div",{className:"FieldTypeSelector__group__description"},l.a.createElement(i.FormattedMessage,{id:"fieldGroup.".concat(e.name,".description")})))}},{key:"renderGroups",value:function(){var e=this.props.modularBlock;return l.a.createElement("div",{className:"FieldTypeSelector__groups"},cn.filter((function(t){return!e||"rich_text"!==t.name})).map(this.renderGroup.bind(this)))}},{key:"render",value:function(){return null===this.state.selectedGroup?this.renderGroups():this.renderGroupFieldTypes()}}])&&fa(n.prototype,a),r&&fa(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(_a,"propTypes",{onSelect:r.a.func.isRequired,modularBlock:r.a.bool.isRequired});var va=_a;function ga(e){return(ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ea(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Oa(e,t){return!t||"object"!==ga(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wa(e){return(wa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ja(e,t){return(ja=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ka=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Oa(this,wa(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ja(e,t)}(t,e),n=t,(a=[{key:"handleClose",value:function(){var e=this.props,t=e.parentUrl;e.history.push(t)}},{key:"handleEditNewField",value:function(e){var t=this.props,n=t.history,a=t.match.url;n.push("".concat(a,"/").concat(e))}},{key:"render",value:function(){var e=this.props.modularBlock;return l.a.createElement(Ye.default,{wide:!0,localeKey:"itemType.chooseFieldType",onClose:this.handleClose.bind(this)},l.a.createElement(va,{modularBlock:!!e,onSelect:this.handleEditNewField.bind(this)}))}}])&&Ea(n.prototype,a),r&&Ea(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ka,"propTypes",{match:r.a.object.isRequired,modularBlock:r.a.object,parentUrl:r.a.string.isRequired,history:r.a.object.isRequired});var Pa=n(2423),Sa=n.n(Pa),Na=n(27),Ta=n(351),xa=n(218),Ra=n(299),Fa=n(448);function Ca(e){return(Ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qa(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ma(e,t){return!t||"object"!==Ca(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ia(e){return(Ia=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function La(e,t){return(La=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Aa=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ma(this,Ia(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&La(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props.namePrefix;return l.a.createElement(ee.default,{name:"".concat(e,".heading"),intlLabel:"singleLine.heading",component:W.a})}}])&&qa(n.prototype,a),r&&qa(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Aa,"propTypes",{namePrefix:r.a.string.isRequired});var Da={Component:Aa,initialValues:{heading:!1}};function za(e){return(za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ba(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ua(e,t){return!t||"object"!==za(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ha(e){return(Ha=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Va(e,t){return(Va=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ga=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ua(this,Ha(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Va(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props.namePrefix;return l.a.createElement("div",{className:"space--bottom-2"},l.a.createElement(ee.default,{name:"".concat(e,".enable_alpha"),intlLabel:"color.enableAlpha",component:W.a}),l.a.createElement(ee.default,{name:"".concat(e,".preset_colors"),intlLabel:"color.presetColors",intlHint:"color.presetColors.hint",intlPlaceholder:"color.presetColors.placeholder",type:"text",className:"form__input--code"}))}}])&&Ba(n.prototype,a),r&&Ba(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ga,"propTypes",{namePrefix:r.a.string.isRequired});var Ja={Component:Ga,initialValues:{enable_alpha:!1,preset_colors:[]},fromJSON:function(e){var t=e.preset_colors,n=e.enable_alpha;return{preset_colors:t.join(", "),enable_alpha:n}},toJSON:function(e){var t=e.preset_colors,n=e.enable_alpha;return{preset_colors:t.replace(/\s/g,"").split(",").filter((function(e){return!!e}))||[],enable_alpha:n}}},Wa=n(839),$a=n(2215);function Ka(e){return(Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qa(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Xa(e,t){return!t||"object"!==Ka(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ya(e){return(Ya=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Za(e,t){return(Za=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var er=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Xa(this,Ya(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Za(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props.namePrefix;return l.a.createElement(ee.default,{name:"".concat(e,".url_prefix"),intlLabel:"slug.urlPrefix",intlHint:"slug.urlPrefix.hint",intlPlaceholder:"slug.urlPrefix.placeholder",type:"text"})}}])&&Qa(n.prototype,a),r&&Qa(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(er,"propTypes",{namePrefix:r.a.string.isRequired});var tr={Component:er,initialValues:{url_prefix:null}};function nr(e){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ar(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function rr(e,t){return!t||"object"!==nr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ir(e){return(ir=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function or(e,t){return(or=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var lr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),rr(this,ir(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&or(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props.namePrefix;return l.a.createElement(ee.default,{name:"".concat(e,".start_collapsed"),intlLabel:"richText.start_collapsed",component:W.a})}}])&&ar(n.prototype,a),r&&ar(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(lr,"propTypes",{namePrefix:r.a.string.isRequired});var cr={Component:lr,initialValues:{start_collapsed:!1}};function sr(e){return(sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function mr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ur(n,!0).forEach((function(t){hr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ur(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pr(){return(pr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function dr(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function fr(e,t){return!t||"object"!==sr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function br(e){return(br=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yr(e,t){return(yr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _r={single_line:Da,color_picker:Ja,markdown:Wa.a,wysiwyg:$a.a,slug:tr,rich_text:cr},vr={string:["single_line"],slug:["slug"],text:["markdown","wysiwyg","textarea"],rich_text:["rich_text"],links:["links_select","links_embed"],link:["link_select","link_embed"],seo:["seo"],lat_lon:["map"],json:["json"],date:["date_picker"],date_time:["date_time_picker"],boolean:["boolean"],integer:["integer"],float:["float"],file:["file"],video:["video"],gallery:["gallery"],color:["color_picker"]};function gr(e,t){return Object(Fa.a)(e)?function(e){var t=e.attributes.parameter_definitions.instance;if(0===t.length)return null;var n=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),fr(this,br(n).apply(this,arguments))}var a,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yr(e,t)}(n,e),a=n,(r=[{key:"renderField",value:function(e){var t=this.props.namePrefix,n=e.required?{required:{}}:{},a="text"===e.type?{editor:"textarea",parameters:gr("textarea")}:kr(e.type);return l.a.createElement(ee.default,pr({key:e.id,name:"".concat(t,".").concat(e.id),label:e.label,hint:e.hint,required:e.required},Object(Ra.a)({fieldType:e.type,appeareance:a,validators:n})))}},{key:"render",value:function(){return l.a.createElement("div",{className:"space--bottom-2"},t.map(this.renderField.bind(this)))}}])&&dr(a.prototype,r),i&&dr(a,i),n}(c.a);return hr(n,"propTypes",{namePrefix:r.a.string.isRequired}),{Component:n,validate:oe()(t.filter((function(e){return e.required})).reduce((function(e,t){return mr({},e,hr({},t.id,[re.a.required()]))}),{})),initialValues:t.reduce((function(e,t){return mr({},e,hr({},t.id,t.default||null))}),{})}}(t[e]):_r[e]}function Er(e,t){var n=gr(e,t);return n?n.initialValues:{}}function Or(e,t,n){var a=gr(t,n);return a&&a.fromJSON?a.fromJSON(e):e}function wr(e,t,n){var a=gr(t,n);return a&&a.toJSON?a.toJSON(e):e}function jr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2]?["field_editor"]:["sidebar","field_editor"],a=Object.values(t).filter((function(t){return t.attributes.field_types.includes(e)&&n.includes(t.attributes.plugin_type)}));return vr[e].concat(a.map((function(e){return e.id})))}function kr(e){var t=vr[e][0];return{editor:t,parameters:Er(t,{})}}var Pr=n(501);function Sr(e){return(Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nr(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Tr(e,t){return!t||"object"!==Sr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xr(e){return(xr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rr(e,t){return(Rr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Fr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Tr(this,xr(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rr(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.namePrefix,n=e.value.type,a=t,r=[{value:"between",label:this.t("validators.date_range.between")},{value:"min",label:this.t("validators.date_range.min")},{value:"max",label:this.t("validators.date_range.max")}];return l.a.createElement("div",{className:"form__field-group"},l.a.createElement(ee.default,{name:"".concat(a,".type"),showLabel:!1,inline:!0,clearable:!1,options:r,autosize:!0,component:Q.default}),("min"===n||"between"===n)&&l.a.createElement(ee.default,{name:"".concat(a,".min"),showLabel:!1,intlPlaceholder:"validators.date_range.minValue",inline:!0,component:Pr.a}),"between"===n&&l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"validators.date_range.and"})),("max"===n||"between"===n)&&l.a.createElement(ee.default,{name:"".concat(a,".max"),showLabel:!1,intlPlaceholder:"validators.date_range.maxValue",inline:!0,component:Pr.a}))}}])&&Nr(n.prototype,a),r&&Nr(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Fr,"propTypes",{value:r.a.object.isRequired,namePrefix:r.a.string.isRequired});var Cr={between:oe()({min:[re.a.required()],max:[re.a.required(),re.a.greaterDateThan("min")]}),min:oe()({min:[re.a.required()]}),max:oe()({max:[re.a.required()]})},qr={Component:Fr,validate:function(e){return Cr[e.type](e)},fromJSON:function(e){var t=e.min,n=e.max,a=function(e){return null!=e};return a(t)&&!a(n)?{type:"min",min:t}:a(n)&&!a(t)?{type:"max",max:n}:{type:"between",min:t,max:n}},toJSON:function(e){var t=e.type,n=e.min,a=e.max;switch(t){case"between":return{min:n,max:a};case"min":return{min:n};default:return{max:a}}},fields:["type","min","max"]},Mr=n(221);function Ir(e){return(Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lr(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ar(e,t){return!t||"object"!==Ir(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dr(e){return(Dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zr(e,t){return(zr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Br=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ar(this,Dr(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zr(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.namePrefix,n=e.value.type,a=t,r=[{value:"between",label:this.t("validators.date_range.between")},{value:"min",label:this.t("validators.date_range.min")},{value:"max",label:this.t("validators.date_range.max")}];return l.a.createElement("div",{className:"form__field-group"},l.a.createElement(ee.default,{name:"".concat(a,".type"),showLabel:!1,inline:!0,clearable:!1,options:r,autosize:!0,component:Q.default}),("min"===n||"between"===n)&&l.a.createElement(ee.default,{name:"".concat(a,".min"),showLabel:!1,intlPlaceholder:"validators.date_range.minValue",inline:!0,component:Mr.a}),"between"===n&&l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"validators.date_range.and"})),("max"===n||"between"===n)&&l.a.createElement(ee.default,{name:"".concat(a,".max"),showLabel:!1,intlPlaceholder:"validators.date_range.maxValue",inline:!0,component:Mr.a}))}}])&&Lr(n.prototype,a),r&&Lr(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Br,"propTypes",{value:r.a.object.isRequired,namePrefix:r.a.string.isRequired});var Ur={between:oe()({min:[re.a.required()],max:[re.a.required(),re.a.greaterDateThan("min")]}),min:oe()({min:[re.a.required()]}),max:oe()({max:[re.a.required()]})},Hr={Component:Br,validate:function(e){return Ur[e.type](e)},fromJSON:function(e){var t=e.min,n=e.max,a=function(e){return null!=e};return a(t)&&!a(n)?{type:"min",min:t}:a(n)&&!a(t)?{type:"max",max:n}:{type:"between",min:t,max:n}},toJSON:function(e){var t=e.type,n=e.min,a=e.max;switch(t){case"between":return{min:n,max:a};case"min":return{min:n};default:return{max:a}}},fields:["type","min","max"]};function Vr(e){return(Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gr(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Jr(e,t){return!t||"object"!==Vr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wr(e){return(Wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $r(e,t){return($r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Kr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Jr(this,Wr(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$r(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props.namePrefix;return l.a.createElement("div",null,l.a.createElement(ee.default,{name:"".concat(e,".csv"),intlPlaceholder:"validators.enum.valuePlaceholder",intlHint:"validators.enum.hint",type:"text"}))}}])&&Gr(n.prototype,a),r&&Gr(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Kr,"propTypes",{namePrefix:r.a.string.isRequired});var Qr={Component:Kr,validate:oe()({csv:[re.a.required()]}),fromJSON:function(e){var t=e.values;return{csv:(void 0===t?[]:t).join(", ")}},toJSON:function(e){return{values:e.csv.split(/\s*,\s*/)}},fields:["csv"]};function Xr(e){return(Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yr(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Zr(e,t){return!t||"object"!==Xr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ei(e){return(ei=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ti(e,t){return(ti=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ni=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Zr(this,ei(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ti(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.namePrefix,n=e.value.type,a=[{value:"image",label:this.t("validators.extension.image")},{value:"video",label:this.t("validators.extension.video")},{value:"document",label:this.t("validators.extension.document")},{value:"csv",label:this.t("validators.extension.csv")}];return l.a.createElement("div",{className:"form__field-group"},l.a.createElement(ee.default,{name:"".concat(t,".type"),showLabel:!1,inline:!0,clearable:!1,options:a,autosize:!0,component:Q.default}),"csv"===n&&l.a.createElement(ee.default,{showLabel:!1,name:"".concat(t,".csv"),intlPlaceholder:"validators.extension.valuePlaceholder",intlHint:"validators.extension.hint",type:"text"}))}}])&&Yr(n.prototype,a),r&&Yr(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ni,"propTypes",{value:r.a.object.isRequired,namePrefix:r.a.string.isRequired});var ai={Component:ni,validate:oe()({type:[re.a.oneOf(["csv","document","video","image"])],csv:[re.a.requiredIf((function(e){return"csv"===e.type}))]}),fromJSON:function(e){var t=e.predefined_list,n=e.extensions;return t?{type:t}:{type:"csv",csv:(void 0===n?[]:n).join(", ")}},toJSON:function(e){var t=e.type,n=e.csv;return"csv"!==t?{predefined_list:t}:{extensions:n.split(/\s*,\s*/)}},fields:["type","csv"]},ri=n(838);function ii(e){return(ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oi(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function li(e,t){return!t||"object"!==ii(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ci(e){return(ci=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function si(e,t){return(si=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ui=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),li(this,ci(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&si(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.namePrefix,n=e.value.type,a=t,r=[{value:"url",label:this.t("validators.format.url")},{value:"email",label:this.t("validators.format.email")},{value:"custom",label:this.t("validators.format.custom")}];return l.a.createElement("div",{className:"form__field-group"},l.a.createElement(ee.default,{name:"".concat(a,".type"),showLabel:!1,inline:!0,clearable:!1,options:r,autosize:!0,component:Q.default}),"custom"===n&&l.a.createElement(ee.default,{name:"".concat(a,".custom"),showLabel:!1,intlHint:"validators.format.hint",intlPlaceholder:"validators.format.placeholder",className:"input-group--code",pre:"/",post:"/",type:"text",component:ri.a}))}}])&&oi(n.prototype,a),r&&oi(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ui,"propTypes",{value:r.a.object.isRequired,namePrefix:r.a.string.isRequired});var mi={Component:ui,validate:oe()({type:[re.a.oneOf(["custom","email","url"])],custom:[re.a.requiredIf((function(e){return"custom"===e.type}))]}),fromJSON:function(e){var t=e.custom_pattern,n=e.predefined_pattern;return t?{type:"custom",custom:t}:n?{type:n}:{type:"url"}},toJSON:function(e){var t=e.type,n=e.custom;return"url"===t?{predefined_pattern:"url"}:"email"===t?{predefined_pattern:"email"}:{custom_pattern:n}},fields:["type","custom"]};function pi(e){return(pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function di(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function fi(e,t){return!t||"object"!==pi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bi(e){return(bi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yi(e,t){return(yi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var hi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),fi(this,bi(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yi(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.namePrefix,n=e.value.type,a=t,r=[{value:"between",label:this.t("validators.number_range.between")},{value:"min",label:this.t("validators.number_range.min")},{value:"max",label:this.t("validators.number_range.max")}];return l.a.createElement("div",{className:"form__field-group"},l.a.createElement(ee.default,{name:"".concat(a,".type"),showLabel:!1,inline:!0,clearable:!1,options:r,autosize:!0,component:Q.default}),("min"===n||"between"===n)&&l.a.createElement(ee.default,{name:"".concat(a,".min"),showLabel:!1,intlPlaceholder:"validators.number_range.minValue",inline:!0,type:"text",size:"6"}),"between"===n&&l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"validators.number_range.and"})),("max"===n||"between"===n)&&l.a.createElement(ee.default,{name:"".concat(a,".max"),showLabel:!1,intlPlaceholder:"validators.number_range.maxValue",inline:!0,type:"text",size:"6"}))}}])&&di(n.prototype,a),r&&di(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(hi,"propTypes",{value:r.a.object.isRequired,namePrefix:r.a.string.isRequired});var _i={between:oe()({min:[re.a.floatingPoint()],max:[re.a.floatingPoint(),re.a.greaterThan("min")]}),min:oe()({min:[re.a.floatingPoint()]}),max:oe()({max:[re.a.floatingPoint()]})},vi={Component:hi,validate:function(e){return _i[e.type](e)},fromJSON:function(e){var t=e.min,n=e.max,a=function(e){return null!=e};return a(t)&&!a(n)?{type:"min",min:t}:a(n)&&!a(t)?{type:"max",max:n}:{type:"between",min:t,max:n}},toJSON:function(e){var t=e.type,n=e.min,a=e.max;switch(t){case"between":return{min:n,max:a};case"min":return{min:n};default:return{max:a}}},fields:["type","min","max"]};function gi(e){return(gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ei(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Oi(e,t){return!t||"object"!==gi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wi(e){return(wi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ji(e,t){return(ji=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ki=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Oi(this,wi(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ji(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.namePrefix,n=e.value.type,a=t,r=[{value:"between",label:this.t("validators.size.between")},{value:"min",label:this.t("validators.size.min")},{value:"max",label:this.t("validators.size.max")},{value:"eq",label:this.t("validators.size.eq")}];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"form__field-group"},l.a.createElement(ee.default,{name:"".concat(a,".type"),showLabel:!1,inline:!0,clearable:!1,options:r,autosize:!0,component:Q.default}),("min"===n||"between"===n)&&l.a.createElement(ee.default,{name:"".concat(a,".min"),showLabel:!1,intlPlaceholder:"validators.length.minValue",inline:!0,type:"text",size:"6"}),"between"===n&&l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"validators.length.and"})),("max"===n||"between"===n)&&l.a.createElement(ee.default,{name:"".concat(a,".max"),showLabel:!1,intlPlaceholder:"validators.length.maxValue",inline:!0,type:"text",size:"6"}),"eq"===n&&l.a.createElement(ee.default,{name:"".concat(a,".eq"),showLabel:!1,intlPlaceholder:"validators.length.eqValue",inline:!0,type:"text",size:"6"})),"eq"!==n&&l.a.createElement("div",{className:"form__field-group space--top-1"},l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"validators.size.multipleOf"})),l.a.createElement(ee.default,{name:"".concat(a,".multipleOf"),showLabel:!1,intlPlaceholder:"validators.size.multipleOfValue",inline:!0,type:"text",size:"6"})))}}])&&Ei(n.prototype,a),r&&Ei(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ki,"propTypes",{value:r.a.object.isRequired,namePrefix:r.a.string.isRequired});var Pi={between:oe()({min:[re.a.positiveInteger()],max:[re.a.positiveInteger(),re.a.greaterThan("min")]}),min:oe()({min:[re.a.positiveInteger()]}),max:oe()({max:[re.a.positiveInteger()]}),eq:oe()({eq:[re.a.positiveInteger()]}),multipleOf:oe()({multipleOf:[re.a.positiveInteger()]})},Si={Component:ki,validate:function(e){return Pi[e.type](e)},fromJSON:function(e){var t=e.min,n=e.max,a=e.eq,r=e.multiple_of,i=function(e){return null!=e},o={};return o=i(a)?{type:"eq",eq:a}:i(t)&&!i(n)?{type:"min",min:t}:i(n)&&!i(t)?{type:"max",max:n}:{type:"between",min:t,max:n},i(r)&&(o.multipleOf=r),o},toJSON:function(e){var t=e.type,n=e.min,a=e.max,r=e.eq,i=e.multipleOf,o={};switch(t){case"between":o={min:n,max:a};break;case"eq":o={eq:r};break;case"min":o={min:n};break;default:o={max:a}}return i&&(o.multiple_of=i),o},fields:["type","min","max","eq","multipleOf"]};function Ni(e){return(Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ti(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function xi(e,t){return!t||"object"!==Ni(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ri(e){return(Ri=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fi(e,t){return(Fi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ci=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),xi(this,Ri(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fi(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.namePrefix,n=e.value.type,a=t,r=[{value:"between",label:this.t("validators.file_size.between")},{value:"max",label:this.t("validators.file_size.max")},{value:"min",label:this.t("validators.file_size.min")}],o=[{value:"MB",label:this.t("validators.file_size.unit.mib")},{value:"KB",label:this.t("validators.file_size.unit.kib")},{value:"B",label:this.t("validators.file_size.unit.b")}];return l.a.createElement("div",{className:"form__field-group"},l.a.createElement(ee.default,{name:"".concat(a,".type"),showLabel:!1,inline:!0,clearable:!1,options:r,autosize:!0,component:Q.default}),("min"===n||"between"===n)&&l.a.createElement(ee.default,{name:"".concat(a,".min_value"),showLabel:!1,intlPlaceholder:"validators.file_size.minValue",inline:!0,type:"text",size:"6"}),("min"===n||"between"===n)&&l.a.createElement(ee.default,{name:"".concat(a,".min_unit"),showLabel:!1,clearable:!1,inline:!0,autosize:!0,options:o,component:Q.default}),"between"===n&&l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"validators.file_size.and"})),("max"===n||"between"===n)&&l.a.createElement(ee.default,{name:"".concat(a,".max_value"),showLabel:!1,intlPlaceholder:"validators.file_size.maxValue",inline:!0,type:"text",size:"6"}),("max"===n||"between"===n)&&l.a.createElement(ee.default,{name:"".concat(a,".max_unit"),showLabel:!1,inline:!0,clearable:!1,autosize:!0,options:o,component:Q.default}))}}])&&Ti(n.prototype,a),r&&Ti(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ci,"propTypes",{value:r.a.object.isRequired,namePrefix:r.a.string.isRequired});var qi={between:oe()({min_value:[re.a.positiveInteger()],min_unit:[re.a.required(),re.a.fileSizeUnit()],max_value:[re.a.positiveInteger()],max_unit:[re.a.required(),re.a.fileSizeUnit()]}),min:oe()({min_value:[re.a.positiveInteger()],min_unit:[re.a.required(),re.a.fileSizeUnit()]}),max:oe()({max_value:[re.a.positiveInteger()],max_unit:[re.a.required(),re.a.fileSizeUnit()]})},Mi={Component:Ci,validate:function(e){return qi[e.type](e)},fromJSON:function(e){var t=e.min_value,n=e.min_unit,a=e.max_value,r=e.max_unit,i=function(e){return null!=e};return i(t)&&!i(a)?{type:"min",min_value:t,min_unit:n}:i(a)&&!i(t)?{type:"max",max_value:a,max_unit:r}:{type:"between",min_value:t,min_unit:n,max_value:a,max_unit:r}},toJSON:function(e){var t=e.type,n=e.min_value,a=e.min_unit,r=e.max_value,i=e.max_unit;switch(t){case"between":return{min_value:n,min_unit:a,max_value:r,max_unit:i};case"min":return{min_value:n,min_unit:a};default:return{max_value:r,max_unit:i}}},fields:["type","min_value","min_unit","max_value","max_unit"]};function Ii(e){return(Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Li(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ai(e,t){return!t||"object"!==Ii(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Di(e){return(Di=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zi(e,t){return(zi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Bi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ai(this,Di(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zi(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.namePrefix,n=e.value.type,a=t,r=[{value:"between",label:this.t("validators.file_size.between")},{value:"max",label:this.t("validators.file_size.max")},{value:"min",label:this.t("validators.file_size.min")}];return l.a.createElement("div",{className:"form__field-group"},l.a.createElement(ee.default,{name:"".concat(a,".type"),showLabel:!1,inline:!0,clearable:!1,options:r,autosize:!0,component:Q.default}),("min"===n||"between"===n)&&l.a.createElement("div",{className:"input-group input-group--inline"},l.a.createElement(ee.default,{name:"".concat(a,".width_min_value"),showLabel:!1,intlPlaceholder:"validators.dimensions.width",inline:!0,type:"text",size:"5"}),l.a.createElement("span",{className:"input-group__addon"},"x"),l.a.createElement(ee.default,{name:"".concat(a,".height_min_value"),showLabel:!1,intlPlaceholder:"validators.dimensions.height",inline:!0,type:"text",size:"5"}),l.a.createElement("span",{className:"input-group__addon"},"px")),"between"===n&&l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"validators.file_size.and"})),("max"===n||"between"===n)&&l.a.createElement("div",{className:"input-group input-group--inline"},l.a.createElement(ee.default,{name:"".concat(a,".width_max_value"),showLabel:!1,intlPlaceholder:"validators.dimensions.width",inline:!0,type:"text",size:"5"}),l.a.createElement("span",{className:"input-group__addon"},"x"),l.a.createElement(ee.default,{name:"".concat(a,".height_max_value"),showLabel:!1,intlPlaceholder:"validators.dimensions.height",inline:!0,type:"text",size:"5"}),l.a.createElement("span",{className:"input-group__addon"},"px")))}}])&&Li(n.prototype,a),r&&Li(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Bi,"propTypes",{value:r.a.object.isRequired,namePrefix:r.a.string.isRequired});var Ui={between:oe()({width_min_value:[re.a.required(),re.a.positiveInteger()],height_min_value:[re.a.required(),re.a.positiveInteger()],width_max_value:[re.a.required(),re.a.positiveInteger()],height_max_value:[re.a.required(),re.a.positiveInteger()]}),min:oe()({width_min_value:[re.a.required(),re.a.positiveInteger()],height_min_value:[re.a.required(),re.a.positiveInteger()]}),max:oe()({width_max_value:[re.a.required(),re.a.positiveInteger()],height_max_value:[re.a.required(),re.a.positiveInteger()]})},Hi={Component:Bi,validate:function(e){return Ui[e.type](e)},fromJSON:function(e){var t=e.width_min_value,n=e.height_min_value,a=e.width_max_value,r=e.height_max_value,i=function(e){return null!=e};return i(t)&&!i(a)?{type:"min",width_min_value:t,height_min_value:n}:i(a)&&!i(t)?{type:"max",width_max_value:a,height_max_value:r}:{type:"between",width_min_value:t,height_min_value:n,width_max_value:a,height_max_value:r}},toJSON:function(e){var t=e.type,n=e.width_min_value,a=e.height_min_value,r=e.width_max_value,i=e.height_max_value;switch(t){case"between":return{width_min_value:n,height_min_value:a,width_max_value:r,height_max_value:i};case"min":return{width_min_value:n,height_min_value:a};default:return{width_max_value:r,height_max_value:i}}},fields:["type","width_min_value","height_min_value","width_max_value","height_max_value"]};function Vi(e){return(Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gi(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ji(e,t){return!t||"object"!==Vi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wi(e){return(Wi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $i(e,t){return($i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ki=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ji(this,Wi(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$i(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.namePrefix,n=e.value.type,a=t,r=[{value:"between",label:this.t("validators.length.between")},{value:"min",label:this.t("validators.length.min")},{value:"max",label:this.t("validators.length.max")},{value:"eq",label:this.t("validators.length.eq")}];return l.a.createElement("div",{className:"form__field-group"},l.a.createElement(ee.default,{name:"".concat(a,".type"),showLabel:!1,inline:!0,clearable:!1,options:r,autosize:!0,component:Q.default}),("min"===n||"between"===n)&&l.a.createElement(ee.default,{name:"".concat(a,".min"),showLabel:!1,intlPlaceholder:"validators.length.minValue",inline:!0,type:"text",size:"6"}),"between"===n&&l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"validators.length.and"})),("max"===n||"between"===n)&&l.a.createElement(ee.default,{name:"".concat(a,".max"),showLabel:!1,intlPlaceholder:"validators.length.maxValue",inline:!0,type:"text",size:"6"}),"eq"===n&&l.a.createElement(ee.default,{name:"".concat(a,".eq"),showLabel:!1,intlPlaceholder:"validators.length.eqValue",inline:!0,type:"text",size:"6"}))}}])&&Gi(n.prototype,a),r&&Gi(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ki,"propTypes",{value:r.a.object.isRequired,namePrefix:r.a.string.isRequired});var Qi={between:oe()({min:[re.a.positiveInteger()],max:[re.a.positiveInteger(),re.a.greaterThan("min")]}),min:oe()({min:[re.a.positiveInteger()]}),max:oe()({max:[re.a.positiveInteger()]}),eq:oe()({eq:[re.a.positiveInteger()]})},Xi={Component:Ki,validate:function(e){return Qi[e.type](e)},fromJSON:function(e){var t=e.min,n=e.max,a=e.eq,r=function(e){return null!=e};return r(t)&&!r(n)?{type:"min",min:t}:r(n)&&!r(t)?{type:"max",max:n}:r(a)?{type:"eq",eq:a}:{type:"between",min:t,max:n}},toJSON:function(e){var t=e.type,n=e.min,a=e.max,r=e.eq;switch(t){case"between":return{min:n,max:a};case"eq":return{eq:r};case"min":return{min:n};default:return{max:a}}},fields:["type","min","max","eq"]};function Yi(e){return(Yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zi(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function eo(e,t){return!t||"object"!==Yi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function to(e){return(to=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function no(e,t){return(no=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ao=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),eo(this,to(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&no(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.itemTypes,n=e.namePrefix,a=t.sort((function(e,t){return e.attributes.name-t.attributes.name})).map((function(e){return{value:e.id,label:e.attributes.name}}));return l.a.createElement(ee.default,{name:"".concat(n,".item_types"),intlPlaceholder:"itemType.validator.placeholder",multiple:!0,options:a,component:Q.default})}}])&&Zi(n.prototype,a),r&&Zi(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ao,"propTypes",{namePrefix:r.a.string.isRequired,itemTypes:r.a.array});var ro={Component:Object(p.connect)((function(e){return{itemTypes:Object.values(e.itemTypes).filter((function(e){return!e.attributes.modular_block}))}}))(ao),isRequired:!0,validate:oe()({item_types:[re.a.minArrayLength(1)]}),fromJSON:function(e){return{item_types:e.item_types||[]}},toJSON:function(e){return{item_types:e.item_types}},fields:["item_types"]};function io(e){return(io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oo(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function lo(e,t){return!t||"object"!==io(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function co(e){return(co=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function so(e,t){return(so=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var uo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),lo(this,co(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&so(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.fields,n=e.namePrefix,a=t.map((function(e){return{value:e.id,label:e.attributes.label}}));return l.a.createElement(ee.default,{name:"".concat(n,".title_field_id"),intlPlaceholder:"form.slugField.placeholder",multiple:!1,options:a,component:Q.default})}}])&&oo(n.prototype,a),r&&oo(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(uo,"propTypes",{namePrefix:r.a.string.isRequired,fields:r.a.array});var mo={Component:Object(p.connect)((function(e,t){return{fields:Object.values(e.fields).filter((function(e){return e.relationships.item_type.data.id===t.itemTypeId})).filter((function(e){return"string"===e.attributes.field_type})).sort((function(e,t){return e.attributes.position-t.attributes.position}))}}))(uo),isRequired:!0,validate:oe()({title_field_id:[re.a.required()]}),fromJSON:function(e){return{title_field_id:e.title_field_id||null}},toJSON:function(e){return{title_field_id:e.title_field_id}},fields:["title_field_id"]};function po(e){return(po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fo(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function bo(e,t){return!t||"object"!==po(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yo(e){return(yo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ho(e,t){return(ho=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _o=["title","description","image","twitter_card"],vo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),bo(this,yo(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ho(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props.namePrefix,t=[{value:"title",label:this.t("seo.title")},{value:"description",label:this.t("seo.description")},{value:"image",label:this.t("seo.image")},{value:"twitter_card",label:this.t("seoInput.twitter")}];return l.a.createElement(ee.default,{name:"".concat(e,".requiredFields"),intlPlaceholder:"seoField.validator.placeholder",multiple:!0,options:t,component:Q.default})}}])&&fo(n.prototype,a),r&&fo(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(vo,"propTypes",{namePrefix:r.a.string.isRequired});var go={Component:vo,isRequired:!1,validate:oe()({requiredFields:[re.a.minLength(1)]}),fromJSON:function(e){return{requiredFields:Object.entries(e).filter((function(e){return e[1]})).map((function(e){return e[0]}))}},toJSON:function(e){var t=e.requiredFields;return _o.reduce((function(e,n){return e[n]=t.includes(n),e}),{})},fields:["requiredFields"]};function Eo(e){return(Eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oo(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function wo(e,t){return!t||"object"!==Eo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jo(e){return(jo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ko(e,t){return(ko=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Po=["alt","title"],So=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),wo(this,jo(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ko(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props.namePrefix,t=[{value:"alt",label:this.t("imageMetadata.alt")},{value:"title",label:this.t("imageMetadata.title")}];return l.a.createElement(ee.default,{name:"".concat(e,".requiredFields"),multiple:!0,options:t,component:Q.default})}}])&&Oo(n.prototype,a),r&&Oo(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(So,"propTypes",{namePrefix:r.a.string.isRequired});var No={Component:So,validate:oe()({requiredFields:[re.a.minLength(1)]}),fromJSON:function(e){return{requiredFields:Object.entries(e).filter((function(e){return e[1]})).map((function(e){return e[0]}))}},toJSON:function(e){var t=e.requiredFields;return Po.reduce((function(e,n){return e[n]=t.includes(n),e}),{})},fields:["requiredFields"]};var To={string:["required","unique","length","format","enum"],slug:["slug_title_field","required","unique","length"],text:["required","length","format"],rich_text:["size"],links:["items_item_type","size"],link:["item_item_type","required","unique"],seo:["required_seo_fields","file_size","image_dimensions"],lat_lon:["required"],json:["required"],date:["required","date_range"],date_time:["required","date_time_range"],boolean:[],integer:["required","number_range"],float:["required","number_range"],file:["required","file_size","extension","image_dimensions","required_alt_title"],video:["required"],gallery:["size","file_size","extension","image_dimensions","required_alt_title"],color:["required"]},xo={required:null,required_seo_fields:go,required_alt_title:No,unique:null,date_range:qr,date_time_range:Hr,enum:Qr,extension:ai,format:mi,number_range:vi,size:Si,file_size:Mi,image_dimensions:Hi,length:Xi,item_item_type:ro,items_item_type:ro,slug_title_field:mo};function Ro(e){return To[e].reduce((function(e,t){return Object.assign(e,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,xo[t]))}),{})}var Fo=function(e){var t=e.field,n=t.name,a=t.value,r=t.onChange,i=t.onBlur,o=e.id;return l.a.createElement("input",{name:n,id:o,type:"checkbox",value:a,checked:a,onChange:r,onBlur:i})};Fo.propTypes={field:r.a.object.isRequired,id:r.a.string};var Co=Fo,qo=n(96),Mo=n(15);function Io(e){return(Io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lo(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ao(e,t){return!t||"object"!==Io(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Do(e){return(Do=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zo(e,t){return(zo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Bo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ao(this,Do(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zo(e,t)}(t,e),n=t,(a=[{key:"handleSelect",value:function(e,t){var n=this.props.onSelect;t.preventDefault(),n(e)}},{key:"render",value:function(){var e=this,t=this.props.plugins;return l.a.createElement(Mo.c,{icon:mn.a,label:l.a.createElement(i.FormattedMessage,{id:"field.insertAddon"})},l.a.createElement(Mo.f,null,t.map((function(t){return l.a.createElement(Mo.g,{key:t.id,onClick:e.handleSelect.bind(e,t)},t.attributes.name)}))))}}])&&Lo(n.prototype,a),r&&Lo(n,r),t}(l.a.Component);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Bo,"propTypes",{plugins:r.a.array.isRequired,onSelect:r.a.func.isRequired});var Uo=function(e){var t=e.plugins,n=e.parametersForms,a=e.addonsValue,r=e.fields,i=e.meta.error;return l.a.createElement("div",null,i,r.map((function(e,i){var o=n[a[i].id];return l.a.createElement("div",{className:"field-array__item",key:e},l.a.createElement("div",{className:"field-array__item__content"},l.a.createElement("div",{className:"PluginForm__preview"},l.a.createElement("div",{className:"PluginForm__preview__title"},t[a[i].id].attributes.name),o?l.a.createElement(o.Component,{namePrefix:"".concat(e,".parameters")}):l.a.createElement("div",null,"No settings available."))),l.a.createElement("div",{className:"field-array__item__trash"},l.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),r.remove(i)}},l.a.createElement(qo.a,null))))})),l.a.createElement(Bo,{plugins:Object.values(t),onSelect:function(e){var n=gr(e.id,t);r.push({id:e.id,parameters:n?n.initialValues:{}})}}))};Uo.propTypes={plugins:r.a.object.isRequired,fields:r.a.object.isRequired,parametersForms:r.a.object.isRequired,meta:r.a.object.isRequired,addonsValue:r.a.array.isRequired};var Ho,Vo,Go,Jo=Uo;function Wo(e){return(Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $o(){return($o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Ko(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Qo(e,t){return!t||"object"!==Wo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xo(e){return(Xo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yo(e,t){return(Yo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function el(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zo(n,!0).forEach((function(t){tl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zo(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function al(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var rl,il,ol,ll={file:"gallery",gallery:"file",link:"links",links:"link",float:"integer",integer:"float",text:"string",string:"text"},cl=function(e){return Object.assign.apply(Object,[{}].concat(al(e.map((function(e){var t=nl(e,2);return tl({},t[0],t[1])})))))},sl=Object(p.connect)((function(e,t){var n=t.field.attributes.field_type,a=t.field.attributes,r=cl(Object.values(e.plugins).filter((function(e){return["field_editor","sidebar"].includes(e.attributes.plugin_type)&&e.attributes.field_types.includes(n)})).map((function(e){return[e.id,e]}))),i=cl(Object.values(e.plugins).filter((function(e){return"field_addon"===e.attributes.plugin_type&&e.attributes.field_types.includes(n)})).map((function(e){return[e.id,e]}))),o=e.itemTypes[t.itemTypeId],l=mt()(t.field.attributes,["label","api_key","hint","localized","default_value"]),c={label:[re.a.required()],api_key:[re.a.required()]},s=Ro(n);l.validators={};var u=["string","date","date_time","text","integer","float","lat_lon","boolean","color","json"].includes(n);Object.entries(s).forEach((function(n){var r=nl(n,2),i=r[0],o=r[1];o&&o.isRequired?l.validators[i]={}:l.validators[i]={enabled:!!a.validators[i]},o&&Object.assign(l.validators[i],o.fromJSON(a.validators[i]||{},e,t))})),l.appeareance={};var m=jr(n,e.plugins,o.attributes.modular_block);l.appeareance.editor=t.field.attributes.appeareance?t.field.attributes.appeareance.editor:m[0],l.appeareance.parameters=m.reduce((function(n,a){return Object.assign(n,tl({},a,t.field.attributes.appeareance&&t.field.attributes.appeareance.editor===a?Or(t.field.attributes.appeareance.parameters,a,e.plugins):Or(Er(a,e.plugins),a,e.plugins)))}),{}),l.addons=t.field.attributes.appeareance?t.field.attributes.appeareance.addons:[];var p=oe()(c);return{isNewField:!t.field.id,plugins:Object.values(e.plugins),fieldType:n,fieldTypeValidators:s,fieldEditorPlugins:r,fieldAddonPlugins:i,editors:m,initialValues:l,supportsDefaultValue:u,itemType:o,validate:function(e){var t=gr(e.appeareance.editor,r);return dt()(el({},p(e),{appeareance:t&&t.validate?{parameters:tl({},e.appeareance.editor,t.validate(e.appeareance.parameters[e.appeareance.editor]))}:null,validators:Object.entries(s).reduce((function(t,n){var a=nl(n,2),r=a[0],i=a[1],o=e.validators[r];if(i&&(i.isRequired||o.enabled)){var l=i.validate(o);if(Object.entries(l).length>0)return el({},t,tl({},r,l))}return t}),{}),addons:e.addons.map((function(e){var t=gr(e.id,i);if(t&&t.validate){var n=t.validate(e.parameters);if(Object.entries(n).length>0)return{parameters:n}}return null})).filter((function(e){return!!e}))}),(function(t,n){switch(n){case"appeareance":return t&&t.parameters&&Object.entries(t.parameters[e.appeareance.editor]).length>0;case"validators":return Object.entries(t).length>0;case"addons":return t.length>0;default:return!!t}}))},outerOnSubmit:t.onSubmit,onSubmit:function(n){var a=ne()(t.field);a.attributes=Object.assign(a.attributes,dt()(n,["addons"])),delete a.relationships,void 0===a.attributes.localized&&(a.attributes.localized=!1),a.attributes.singleton&&(a.attributes.sortable=!1);var r={};return"rich_text"===a.attributes.field_type&&(r.rich_text_blocks=t.field.attributes.validators.rich_text_blocks||{item_types:[]}),Object.entries(s).forEach((function(e){var t=nl(e,2),a=t[0],i=t[1],o=n.validators[a];(i&&i.isRequired||o.enabled)&&(r[a]=i?i.toJSON(o):{})})),a.attributes.validators=r,a.attributes.appeareance={editor:n.appeareance.editor,parameters:wr(n.appeareance.parameters[n.appeareance.editor],n.appeareance.editor,e.plugins),addons:n.addons},t.onSubmit(a).catch((function(e){var t=ne()(e.errors);throw t.appeareance&&t.appeareance.parameters&&(t.appeareance.parameters=tl({},n.appeareance.editor,t.appeareance.parameters)),new J.SubmissionError(t)}))}}}))(Ho=Object(J.withForm)({form:"field"})((Go=Vo=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=Qo(this,Xo(t).call(this,e));var a=e.fieldType,r=e.fieldAddonPlugins,i=e.fieldEditorPlugins;return n.addonParametersForms=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.values(t).filter((function(t){return t.attributes.field_types.includes(e)&&"field_addon"===t.attributes.plugin_type})).map((function(e){return e.id}))}(a,r).reduce((function(e,t){return el({},e,tl({},t,gr(t,r)))}),{}),n.editorParametersForms=jr(a,i).reduce((function(e,t){return el({},e,tl({},t,gr(t,i)))}),{}),n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yo(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(Object(Ta.fetchAll)())}},{key:"handleConvert",value:function(e,t){var n,a,r,i,o,l;return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props,a=n.fieldType,r=n.field,i=n.outerOnSubmit,t.preventDefault(),e.next=4,regeneratorRuntime.awrap(Object(se.b)("messages.confirm.convertField"));case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:o=ll[a],(l=ne()(r)).attributes.field_type=o,delete l.relationships,i(l);case 11:case"end":return e.stop()}}),null,this)}},{key:"renderValidator",value:function(e){var t=nl(e,2),n=t[0],a=t[1],r=this.props,o=r.fieldType,c=r.itemTypeId,s=r.formikBag.values.validators[n];return l.a.createElement("div",{key:n},l.a.createElement("div",{className:"FieldForm__validator"},l.a.createElement("div",{className:"FieldForm__validator__checkbox"},a&&a.isRequired?l.a.createElement("input",{type:"checkbox",checked:!0,disabled:!0}):l.a.createElement(Na.FastField,{name:"validators.".concat(n,".enabled"),id:"validators.".concat(n,".enabled"),component:Co})),l.a.createElement("div",{className:"FieldForm__validator__description"},l.a.createElement("label",{htmlFor:"validators.".concat(n,".enabled")},this.existTranslation("validator.".concat(o,".").concat(n,".title"))?this.t("validator.".concat(o,".").concat(n,".title")):this.t("validator.".concat(n,".title"))),l.a.createElement("div",{className:"form__hint"},l.a.createElement(i.FormattedHTMLMessage,{id:this.existTranslation("validator.".concat(o,".").concat(n,".hint"))?"validator.".concat(o,".").concat(n,".hint"):"validator.".concat(n,".hint")})),a&&(a.isRequired||s&&s.enabled)&&l.a.createElement("div",{className:"space--both-1"},l.a.createElement(a.Component,{fieldType:o,namePrefix:"validators.".concat(n),itemTypeId:c,value:s})))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.fieldTypeValidators,a=t.supportsDefaultValue,r=t.itemTypeId,o=t.itemType,c=t.isNewField,s=t.field,u=t.modularBlock,m=t.fieldType,p=t.editors,d=t.fieldEditorPlugins,f=t.fieldAddonPlugins,b=t.plugins,y=t.formikBag,h=y.errors,_=y.values,v=_.appeareance,g=_.addons,E=Sa.a.all([{validators:{},appeareance:{parameters:{}}},h]),O={basic:E.api_key||E.label,defaultValue:E.default_value,validators:Object.values(E.validators||{}).some((function(e){return Object.values(e).some((function(e){return e}))})),appeareance:E.appeareance.editor||Object.values(E.appeareance.parameters||{}).some((function(e){return Object.values(e).some((function(e){return e}))}))},w=ll[m],j=this.editorParametersForms[v.editor],k=j&&l.a.createElement(j.Component,{namePrefix:"appeareance.parameters.".concat(v.editor),value:v.parameters[v.editor],itemTypeId:r,fieldId:s.id}),P=null;return P=Object(Fa.a)(v.editor)?d[v.editor].attributes.name:this.existTranslation("editor.".concat(v.editor))?this.t("editor.".concat(v.editor)):"Editor",l.a.createElement("div",{className:"FieldForm"},l.a.createElement(X.default,null,l.a.createElement(it,{className:"Tabs--no-modal",extraInfo:!c&&"Field ID: ".concat(s.id)},l.a.createElement(ot,{intlLabel:"fieldForm.tab.basic",invalid:O.basic},l.a.createElement(ee.default,{required:!0,name:"label",intlLabel:"field.label",intlHint:"field.labelHint",intlPlaceholder:"field.title.placeholder",wrapInput:function(t){return el({},t,{onChange:function(n){var a=e.props.formikBag.setFieldValue,r=t.onChange(n);return c&&a("api_key",Ze(n.target.value)),r}})},type:"text",className:"form__input--large",autoFocus:!0}),l.a.createElement(ee.default,{required:!0,name:"api_key",intlLabel:"field.apiKey",intlHint:"field.apiKeyHint",intlPlaceholder:"field.apiKey.placeholder",type:"text",className:"form__input--code"}),!u&&l.a.createElement(ee.default,{name:"localized",intlLabel:"field.localized",intlHint:"field.localizedHint",component:W.a}),l.a.createElement(Z.a,{intlLabel:"field.button"})),Object.keys(n).length>0&&l.a.createElement(ot,{intlLabel:"fieldForm.tab.validations",invalid:O.validators},l.a.createElement("div",{className:"form__field"},Object.entries(n).filter((function(e){return!("unique"===nl(e,1)[0]&&o.attributes.singleton)})).map(this.renderValidator.bind(this))),l.a.createElement(Z.a,{intlLabel:"field.button"})),a&&m&&l.a.createElement(ot,{intlLabel:"fieldForm.tab.defaultValue",invalid:O.defaultValue},l.a.createElement(ee.default,$o({name:"default_value",intlLabel:"field.defaultValue",intlHint:"field.defaultValueHint",intlPlaceholder:"field.defaultValuePlaceholder"},Object(Ra.a)({locale:"en",disabled:!1,fieldName:"default_value",appeareance:Object(Fa.a)(v.editor)?kr(m):{editor:v.editor,parameters:wr(v.parameters[v.editor],v.editor,b)},validators:{},fieldType:m}))),l.a.createElement(Z.a,{intlLabel:"field.button"})),l.a.createElement(ot,{intlLabel:"fieldForm.tab.presentation",invalid:O.appeareance},l.a.createElement(ee.default,{name:"hint",intlLabel:"field.hint",intlHint:"field.hintHint",intlPlaceholder:"field.hintPlaceholder",component:xa.a}),p.length>1&&l.a.createElement(ee.default,{name:"appeareance.editor",intlLabel:"fieldForm.appeareance.editor",intlHint:"fieldForm.appeareance.editor.hint",options:p.map((function(t){return Object(Fa.a)(t)?{label:d[t].attributes.name,value:t}:{label:e.existTranslation("editor.".concat(t))?l.a.createElement(i.FormattedMessage,{id:"editor.".concat(t)}):l.a.createElement(i.FormattedMessage,{id:"field.addon.defaultEditor"}),value:t}})),component:Q.default}),k&&p.length>1&&l.a.createElement("div",{className:"PluginForm__preview"},l.a.createElement("div",{className:"PluginForm__preview__title"},l.a.createElement(i.FormattedMessage,{id:"field.addon.settings",values:{editorName:P}})),k),k&&1===p.length&&k,Object.values(f).length>0&&l.a.createElement("div",{className:"form__field"},l.a.createElement("div",{className:"form__label"},l.a.createElement(i.FormattedMessage,{id:"field.addons"})),l.a.createElement(J.FieldArray,{name:"addons",component:Jo,parametersForms:this.addonParametersForms,addonsValue:g,plugins:f})),l.a.createElement(Z.a,{intlLabel:"field.button"})))),!!w&&!c&&l.a.createElement("div",{className:"FieldForm__convert"},l.a.createElement("a",{href:"#",onClick:this.handleConvert.bind(this,s.id)},l.a.createElement(i.FormattedMessage,{id:"field.convert",values:{field_type:this.t("fieldType.".concat(w))}}))))}}])&&Ko(n.prototype,a),r&&Ko(n,r),t}(c.a),tl(Vo,"propTypes",{outerOnSubmit:r.a.func.isRequired,isNewField:r.a.bool.isRequired,itemTypeId:r.a.string.isRequired,supportsDefaultValue:r.a.bool.isRequired,fieldType:r.a.string.isRequired,fieldTypeValidators:r.a.object,field:r.a.object.isRequired,itemType:r.a.object,modularBlock:r.a.bool,fieldEditorPlugins:r.a.object.isRequired,fieldAddonPlugins:r.a.object.isRequired,formikBag:r.a.object.isRequired,editors:r.a.array.isRequired,plugins:r.a.array.isRequired,dispatch:r.a.func.isRequired}),Ho=Go))||Ho)||Ho;function ul(e){return(ul="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ml(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function pl(e,t){return!t||"object"!==ul(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dl(e){return(dl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fl(e,t){return(fl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bl,yl,hl,_l=Object(p.connect)((function(e,t){return{field:t.match.params.fieldId?e.fields[t.match.params.fieldId]:Object(Xe.c)(t.match.params.fieldType)}}))((ol=il=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),pl(this,dl(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fl(e,t)}(t,e),n=t,(a=[{key:"handleClose",value:function(){var e=this.props,t=e.history,n=e.parentUrl;t.push(n)}},{key:"handleSubmitField",value:function(e){var t,n,a,r,i,o,l,c,s;return regeneratorRuntime.async((function(u){for(;;)switch(u.prev=u.next){case 0:return t=this.props,n=t.dispatch,a=t.itemType,r=t.history,i=t.parentUrl,u.prev=1,l=ne()(e),o=e.id?n(Object(un.update)({id:e.id,data:l})):n(Object(un.create)({itemTypeId:a.id,data:l})),u.next=6,regeneratorRuntime.awrap(o);case 6:return u.next=8,regeneratorRuntime.awrap(this.refreshState());case 8:c="admin.itemType.".concat(e.id?"update":"create","Field.success"),n(Object(G.notice)(this.t(c))),r.push(i),u.next=18;break;case 13:throw u.prev=13,u.t0=u.catch(1),s="admin.itemType.".concat(e.id?"update":"create","Field.failure"),n(Object(G.alert)(this.t(s))),Object(we.a)(u.t0);case 18:case"end":return u.stop()}}),null,this,[[1,13]])}},{key:"refreshState",value:function(){var e=this.props.dispatch,t=["item_types","item_types.singleton_item","item_types.fields","menu_items"].join(",");return e(Object(je.fetch)({force:!0,query:{include:t}}))}},{key:"render",value:function(){var e=this.props,t=e.itemType,n=e.field,a=e.modularBlock;return l.a.createElement(Ye.default,{freeContent:!0,big:!0,title:n.id?this.t("itemType.editField"):this.t("itemType.addField",{fieldType:this.t("fieldType.".concat(n.attributes.field_type))}),noCloseListeners:!0,onClose:this.handleClose.bind(this)},l.a.createElement(sl,{modularBlock:a,itemTypeId:t.id,field:n,onSubmit:this.handleSubmitField.bind(this)}))}}])&&ml(n.prototype,a),r&&ml(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(il,"propTypes",{dispatch:r.a.func.isRequired,itemType:r.a.object.isRequired,parentUrl:r.a.string.isRequired,field:r.a.object.isRequired,modularBlock:r.a.bool,history:r.a.object.isRequired}),rl=ol))||rl;function vl(e){return(vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gl(){return(gl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function El(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ol(e,t){return!t||"object"!==vl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wl(e){return(wl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jl(e,t){return(jl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var kl,Pl,Sl,Nl=Object(p.connect)((function(e,t){var n=e.itemTypes[t.match.params.modularBlockId];return{itemType:n,initialValues:mt()(n.attributes,["name","api_key"])}}))(bl=Object(J.withForm)({form:"editModularBlock",validate:oe()({name:[re.a.required()],api_key:[re.a.required()]}),onSubmit:function(e,t){var n,a,r,i,o,l,c;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:return n=t.dispatch,a=t.itemType,r=t.history,i=t.parentUrl,s.prev=1,(o=ne()(a)).attributes.name=e.name,o.attributes.api_key=e.api_key,o.relationships={ordering_field:{data:null},title_field:{data:null}},s.next=8,regeneratorRuntime.awrap(n(Object(Qe.update)({id:a.id,data:o})));case 8:return l=s.sent,c=["item_types","item_types.singleton_item","menu_items"].join(","),s.next=12,regeneratorRuntime.awrap(n(Object(je.fetch)({force:!0,query:{include:c}})));case 12:return s.next=14,regeneratorRuntime.awrap(l);case 14:n(Object(G.notice)("admin.modularBlock.update.success")),r.push(i),s.next=22;break;case 18:throw s.prev=18,s.t0=s.catch(1),n(Object(G.alert)("admin.modularBlock.update.failure")),Object(we.a)(s.t0);case 22:case"end":return s.stop()}}),null,null,[[1,18]])}})((hl=yl=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ol(this,wl(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jl(e,t)}(t,e),n=t,(a=[{key:"handleClose",value:function(){var e=this.props,t=e.history,n=e.parentUrl;t.push(n)}},{key:"render",value:function(){var e=this.props,t=e.itemType,n=e.match.url;return l.a.createElement("div",null,l.a.createElement(Ye.default,{localeKey:"modularBlock.edit",freeContent:!0,noCloseListeners:!0,wide:!0,onClose:this.handleClose.bind(this)},l.a.createElement("div",{className:"ModularBlock"},l.a.createElement("div",{className:"ModularBlock__fields"},l.a.createElement(Yn,{modularBlock:!0,itemType:t})),l.a.createElement("div",{className:"ModularBlock__info"},l.a.createElement(X.default,null,l.a.createElement(ee.default,{name:"name",intlLabel:"itemType.name",intlPlaceholder:"itemType.name.placeholder",intlHint:"itemType.name.hint",type:"text",className:"form__input--large"}),l.a.createElement(ee.default,{name:"api_key",intlLabel:"itemType.api_key",intlPlaceholder:"itemType.api_key.placeholder",intlHint:"itemType.api_key.hint",type:"text",className:"form__input--code"}),l.a.createElement("div",{className:"form__field"},l.a.createElement("div",{className:"form__label"},"Block ID: ",t.id)),l.a.createElement(Z.a,{intlLabel:"itemType.button"}))))),l.a.createElement(f.e,null,l.a.createElement(f.c,{exact:!0,path:"".concat(n,"/fields/new"),render:function(e){return l.a.createElement(ka,gl({},e,{modularBlock:!0,parentUrl:n}))}}),l.a.createElement(f.c,{path:"".concat(n,"/fields/new/:fieldType"),render:function(e){return l.a.createElement(_l,gl({},e,{modularBlock:!0,parentUrl:n,itemType:t}))}}),l.a.createElement(f.c,{path:"".concat(n,"/fields/:fieldId/edit"),render:function(e){return l.a.createElement(_l,gl({},e,{modularBlock:!0,parentUrl:n,itemType:t}))}})))}}])&&El(n.prototype,a),r&&El(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(yl,"propTypes",{itemType:r.a.object,parentUrl:r.a.string.isRequired,history:r.a.object.isRequired,match:r.a.object.isRequired}),bl=hl))||bl)||bl;function Tl(e){return(Tl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Rl(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Fl(e,t){return!t||"object"!==Tl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cl(e){return(Cl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ql(e,t){return(ql=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ml(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Il=Object(p.connect)((function(e,t){var n=e.fields[t.match.params.fieldId],a=Object.values(e.itemTypes).filter((function(e){return e.attributes.modular_block})).filter((function(e){return!n.attributes.validators.rich_text_blocks.item_types.includes(e.id)})).map((function(t){var n=Object.values(e.fields).filter((function(e){return"rich_text"===e.attributes.field_type})).filter((function(e){return e.attributes.validators.rich_text_blocks.item_types.includes(t.id)})).map((function(t){return{field:t,itemType:e.itemTypes[t.relationships.item_type.data.id]}}));return{itemType:t,usedIn:n}}));return{field:n,modularBlocks:a}}))(kl=Object(J.withForm)({form:"newModularBlock",validate:oe()({name:[re.a.required()],api_key:[re.a.required()]}),onSubmit:function(e,t){var n,a,r,i,o,l,c,s,u;return regeneratorRuntime.async((function(m){for(;;)switch(m.prev=m.next){case 0:return n=t.dispatch,a=t.field,r=t.history,i=t.parentUrl,m.prev=1,(o=Object(Xe.f)(!0)).attributes.name=e.name,o.attributes.api_key=e.api_key,o.relationships={ordering_field:{data:null},title_field:{data:null}},m.next=8,regeneratorRuntime.awrap(n(Object(Qe.create)({data:o})));case 8:return l=m.sent,c=l.data,delete(s=ne()(a)).relationships,s.attributes.validators.rich_text_blocks.item_types=a.attributes.validators.rich_text_blocks.item_types.concat([c.id]),m.next=15,regeneratorRuntime.awrap(n(Object(un.update)({id:a.id,data:s})));case 15:return u=["item_types","item_types.singleton_item","menu_items"].join(","),m.next=18,regeneratorRuntime.awrap(n(Object(je.fetch)({force:!0,query:{include:u}})));case 18:n(Object(G.notice)("admin.modularBlock.create.success")),r.push("".concat(i,"/modular_blocks/").concat(c.id)),m.next=26;break;case 22:throw m.prev=22,m.t0=m.catch(1),n(Object(G.alert)("admin.modularBlock.create.failure")),Object(we.a)(m.t0);case 26:case"end":return m.stop()}}),null,null,[[1,22]])}})((Sl=Pl=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Fl(this,Cl(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ql(e,t)}(t,e),n=t,(a=[{key:"handleClose",value:function(){var e=this.props,t=e.history,n=e.parentUrl;t.push(n)}},{key:"handleAddExistingModularBlock",value:function(e){var t,n,a,r,i,o;return regeneratorRuntime.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t=this.props,n=t.field,a=t.history,r=t.dispatch,i=t.parentUrl,l.prev=1,delete(o=ne()(n)).relationships,o.attributes.validators.rich_text_blocks.item_types=n.attributes.validators.rich_text_blocks.item_types.concat([e.id]),l.next=7,regeneratorRuntime.awrap(r(Object(un.update)({id:n.id,data:o})));case 7:r(Object(G.notice)("admin.modularBlock.add.success")),a.push(i),l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),r(Object(G.alert)("admin.modularBlock.add.failure"));case 14:case"end":return l.stop()}}),null,this,[[1,11]])}},{key:"renderCreateForm",value:function(){var e=this;return l.a.createElement(X.default,{promptOnLeaveDirty:!1},l.a.createElement(ee.default,{name:"name",intlLabel:"itemType.name",intlPlaceholder:"itemType.name.placeholder",intlHint:"itemType.name.hint",wrapInput:function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xl(n,!0).forEach((function(t){Ml(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xl(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{onChange:function(n){var a=e.props.formikBag.setFieldValue,r=t.onChange(n);return a("api_key",Ze(n.target.value)),r}})},type:"text",className:"form__input--large"}),l.a.createElement(ee.default,{name:"api_key",intlLabel:"itemType.api_key",intlPlaceholder:"itemType.api_key.placeholder",intlHint:"itemType.api_key.hint",type:"text",className:"form__input--code"}),l.a.createElement(Z.a,{intlLabel:"itemType.button"}))}},{key:"renderExistingModularBlock",value:function(e){var t=e.itemType,n=e.usedIn;return l.a.createElement("a",{href:"#",className:"ModularBlock__block",onClick:this.handleAddExistingModularBlock.bind(this,t),key:t.id},l.a.createElement("span",{className:"ModularBlock__block__label"},t.attributes.name),l.a.createElement("span",{className:"ModularBlock__block__api"},t.attributes.api_key),n.length>0&&l.a.createElement("div",{className:"ModularBlock__block__uses"},"Already used in"," ",Object(wt.a)(n.map((function(e){return l.a.createElement("span",{key:e.field.id},"field ",l.a.createElement("strong",null,e.field.attributes.label)," of model"," ",l.a.createElement("strong",null,e.itemType.attributes.name))})),", ")))}},{key:"renderExistingModularBlocks",value:function(){var e=this.props.modularBlocks;return l.a.createElement("div",null,e.map(this.renderExistingModularBlock.bind(this)))}},{key:"renderBody",value:function(){return 0===this.props.modularBlocks.length?l.a.createElement("div",{className:"Tabs"},l.a.createElement("div",{className:"Tabs__content"},this.renderCreateForm())):l.a.createElement(it,null,l.a.createElement(ot,{intlLabel:"modularBlock.new"},this.renderCreateForm()),l.a.createElement(ot,{intlLabel:"modularBlock.existing"},this.renderExistingModularBlocks()))}},{key:"render",value:function(){return l.a.createElement(Ye.default,{localeKey:"modularBlock.add",freeContent:!0,onClose:this.handleClose.bind(this)},this.renderBody())}}])&&Rl(n.prototype,a),r&&Rl(n,r),t}(c.a),Ml(Pl,"propTypes",{field:r.a.object.isRequired,history:r.a.object.isRequired,dispatch:r.a.func.isRequired,parentUrl:r.a.string.isRequired,formikBag:r.a.object.isRequired,modularBlocks:r.a.array.isRequired}),kl=Sl))||kl)||kl,Ll=n(889),Al=n.n(Ll);function Dl(){return(Dl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var zl,Bl,Ul,Hl=l.a.createElement("path",{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"}),Vl=function(e){return l.a.createElement("svg",Dl({viewBox:"0 0 512 512",width:"1em",height:"1em"},e),Hl)},Gl=n(17),Jl=n.n(Gl);function Wl(e){return(Wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $l(){return($l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Kl(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ql(e,t){return!t||"object"!==Wl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xl(e){return(Xl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yl(e,t){return(Yl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Zl,ec,tc,nc=Object(p.connect)((function(e,t){var n=e.itemTypes[t.match.params.itemTypeId],a=mt()(Object(d.getCurrentUser)(e),["id","type"]);return{itemType:n,editors:Object.keys(Al()(Object.values(e.editingSessions).filter((function(e){return e.relationships.active_item_type.data.id===t.match.params.itemTypeId&&e.attributes.locked_at&&!Jl()(e.relationships.editor.data,a)})),(function(e){return JSON.stringify(e.relationships.editor)}))).map(JSON.parse)}}))((Ul=Bl=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ql(this,Xl(t).call(this,e))).state={isLoading:!1},n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yl(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){var e,t,n;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=this.props,t=e.dispatch,n=e.match.params.itemTypeId,this.setState({isLoading:!0}),a.next=4,regeneratorRuntime.awrap(t(Object(Qe.fetch)({id:n})));case 4:this.setState({isLoading:!1});case 5:case"end":return a.stop()}}),null,this)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t,n,a;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=this.props,n=t.dispatch,a=t.match.params.itemTypeId,e.match.params.itemTypeId===a){r.next=6;break}return this.setState({isLoading:!0}),r.next=5,regeneratorRuntime.awrap(n(Object(Qe.fetch)({id:a})));case 5:this.setState({isLoading:!1});case 6:case"end":return r.stop()}}),null,this)}},{key:"handleDestroy",value:function(e){var t,n,a,r;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=this.props,n=t.dispatch,a=t.history,r=t.itemType,e.preventDefault(),i.next=4,regeneratorRuntime.awrap(Object(se.b)("messages.confirm.destroyItemType"));case 4:if(i.sent){i.next=6;break}return i.abrupt("return");case 6:return i.prev=6,this.setState({isLoading:!0}),i.next=10,regeneratorRuntime.awrap(n(Object(Qe.destroy)({id:r.id})));case 10:this.refreshState(),this.setState({isLoading:!1}),n(Object(G.notice)("admin.itemType.destroy.success")),a.push("/admin/item_types"),i.next=20;break;case 16:i.prev=16,i.t0=i.catch(6),n(this.t(Object(G.alert)("admin.itemType.destroy.failure"))),this.setState({isLoading:!1});case 20:case"end":return i.stop()}}),null,this,[[6,16]])}},{key:"handleDuplicate",value:function(e,t){var n;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return n=this.props.dispatch,a.prev=1,t.preventDefault(),this.setState({isLoading:!0}),a.next=6,regeneratorRuntime.awrap(n(Object(Qe.duplicate)({id:e})));case 6:return a.next=8,regeneratorRuntime.awrap(this.refreshState());case 8:this.setState({isLoading:!1}),n(Object(G.notice)("admin.itemType.duplicateItemType.success")),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(1),a.t0&&a.t0.data&&"PLAN_UPGRADE_REQUIRED"===a.t0.data[0].attributes.code?n(Object(G.alert)("planUpgradeRequired.item_types.description")):n(Object(G.alert)("admin.itemType.duplicateItemType.failure")),this.setState({isLoading:!1});case 16:case"end":return a.stop()}}),null,this,[[1,12]])}},{key:"refreshState",value:function(){var e=this.props.dispatch,t=["item_types","item_types.singleton_item","item_types.fields","menu_items"].join(",");return e(Object(je.fetch)({force:!0,query:{include:t}}))}},{key:"renderLoading",value:function(){return l.a.createElement("div",null,l.a.createElement(Be.a,{size:80}))}},{key:"render",value:function(){var e,t=this.props,n=t.itemType,a=t.editors,r=t.match.url,o=this.state.isLoading;if(!n)return l.a.createElement("div",null);var c=n.attributes.singleton&&n.relationships.singleton_item.data,u=n.attributes.has_singleton_item;return e=n.attributes.singleton?"/editor/item_types/".concat(n.id,"/items/").concat(u?"".concat(c.id,"/edit"):"new"):"/editor/item_types/".concat(n.id,"/items"),l.a.createElement("div",null,o?this.renderLoading():l.a.createElement("div",{className:"Page"},l.a.createElement("div",{className:"Page__inner"},l.a.createElement(s.a,{to:e,className:"Page__link"},"← ",l.a.createElement(i.FormattedMessage,{id:"itemType.toContent"})),l.a.createElement("div",{className:"Page__header"},l.a.createElement("div",{className:"Page__title"},n.attributes.name),l.a.createElement("div",{className:"Page__space"}),l.a.createElement(s.a,{to:"/admin/item_types/".concat(n.id,"/edit"),className:"Page__action"},l.a.createElement(y.a,null),l.a.createElement(i.FormattedMessage,{id:"itemType.edit"})),l.a.createElement("a",{href:"#",onClick:this.handleDuplicate.bind(this,n.id),className:"Page__action"},l.a.createElement(i.FormattedMessage,{id:"itemType.duplicate"})),l.a.createElement("a",{href:"#",onClick:this.handleDestroy.bind(this),className:"Page__action--delete"},l.a.createElement(qo.a,null),l.a.createElement(i.FormattedMessage,{id:"itemType.row.delete"}))),a.length>0&&l.a.createElement("div",{className:"Info"},l.a.createElement("div",{className:"Info__icon"},l.a.createElement(Vl,null)),l.a.createElement("div",{className:"Info__body"},l.a.createElement(i.FormattedMessage,{id:"itemType.currentlyEditing",values:{names:l.a.createElement(oa,{userLinks:a,withAvatar:!0}),count:a.length}}))),l.a.createElement(Yn,{itemType:n}))),l.a.createElement(f.e,null,l.a.createElement(f.c,{path:"".concat(r,"/edit"),render:function(e){return l.a.createElement(pa,$l({},e,{itemType:n}))}}),l.a.createElement(f.c,{exact:!0,path:"".concat(r,"/fields/new"),render:function(e){return l.a.createElement(ka,$l({},e,{parentUrl:r}))}}),l.a.createElement(f.c,{path:"".concat(r,"/fields/new/:fieldType"),render:function(e){return l.a.createElement(_l,$l({},e,{parentUrl:r,itemType:n}))}}),l.a.createElement(f.c,{path:"".concat(r,"/fields/:fieldId/edit"),render:function(e){return l.a.createElement(_l,$l({},e,{parentUrl:r,itemType:n}))}}),l.a.createElement(f.c,{path:"".concat(r,"/fields/:fieldId/modular_blocks/new"),render:function(e){return l.a.createElement(Il,$l({},e,{parentUrl:r,itemType:n}))}}),l.a.createElement(f.c,{path:"".concat(r,"/modular_blocks/:modularBlockId"),render:function(e){return l.a.createElement(Nl,$l({},e,{parentUrl:r,itemType:n}))}})))}}])&&Kl(n.prototype,a),r&&Kl(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Bl,"propTypes",{dispatch:r.a.func.isRequired,itemType:r.a.object,match:r.a.object.isRequired,history:r.a.object.isRequired,editors:r.a.array.isRequired}),zl=Ul))||zl;function ac(e){return(ac="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rc(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ic(e,t){return!t||"object"!==ac(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oc(e){return(oc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lc(e,t){return(lc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var cc=Object(p.connect)((function(e){var t=Object.values(e.itemTypes).sort((function(e,t){return e.attributes.name.localeCompare(t.attributes.name)})),n=[],a=[];return t.forEach((function(e){e.attributes.modular_block?a.push(e):n.push(e)})),{itemTypes:t,blocks:a,other:n}}))((tc=ec=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ic(this,oc(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lc(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,n=e.match.url,a=e.location;t(Object(Qe.fetchAll)());var r=Object(f.g)(a.pathname,{path:"".concat(n,"/:itemTypeId")});if(r){var i=r.params.itemTypeId,o=document.getElementById("itemtype-row-".concat(i));o&&Object(Ot.a)(o,{scrollMode:"if-needed"})}}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.match.url,a=t.location,r=Object(f.g)(e.location.pathname,{path:"".concat(n,"/:itemTypeId")}),i=Object(f.g)(a.pathname,{path:"".concat(n,"/:itemTypeId")});if(i){var o=i.params.itemTypeId;if((r?r.params.itemTypeId:null)!==o&&o){var l=document.getElementById("itemtype-row-".concat(o));l&&Object(Ot.a)(l,{scrollMode:"if-needed"})}}}},{key:"handleSubmit",value:function(e){var t,n,a,r,i,o,l,c;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=this.props,n=t.dispatch,a=t.history,s.prev=1,r=ne()(e),s.next=5,regeneratorRuntime.awrap(n(Object(Qe.create)({data:r})));case 5:return i=s.sent,o=["item_types","item_types.singleton_item","menu_items"].join(","),s.next=9,regeneratorRuntime.awrap(n(Object(je.fetch)({force:!0,query:{include:o}})));case 9:return s.next=11,regeneratorRuntime.awrap(i);case 11:l=s.sent,c=l.data,n(Object(G.notice)("admin.itemType.create.success")),a.push("/admin/item_types/".concat(c.id)),s.next=21;break;case 17:throw s.prev=17,s.t0=s.catch(1),n(Object(G.alert)("admin.itemType.create.failure")),Object(we.a)(s.t0);case 21:case"end":return s.stop()}}),null,this,[[1,17]])}},{key:"renderItemType",value:function(e,t){var n=["ItemTypeRow"];return e&&n.push("ItemTypeRow--".concat(e)),l.a.createElement(s.a,{to:"/admin/item_types/".concat(t.id),className:n.join(" "),activeClassName:"ItemTypeRow--active",key:t.id,id:"itemtype-row-".concat(t.id)},l.a.createElement("div",{className:"ItemTypeRow__name"},t.attributes.name),l.a.createElement("div",{className:"ItemTypeRow__api"},t.attributes.api_key))}},{key:"renderBlankSlate",value:function(){return l.a.createElement("div",{className:"Items__blank-slate"},l.a.createElement("div",{className:"Items__blank-slate__inner"},l.a.createElement("div",{className:"Items__blank-slate__title"},l.a.createElement(i.FormattedMessage,{id:"admin.itemTypes.noItemTypes.title"})),l.a.createElement("div",{className:"Items__blank-slate__description"},l.a.createElement(i.FormattedMessage,{id:"admin.itemTypes.noItemTypes.description"})),l.a.createElement("a",{href:"https://www.datocms.com/docs/content-modelling",className:"Items__blank-slate__guide",target:"_blank",rel:"noopener noreferrer"},l.a.createElement("span",{className:"NavigationBar__button__label"},l.a.createElement("i",{className:"icon--book"}),l.a.createElement(i.FormattedMessage,{id:"admin.itemTypes.noItemTypes.docs"})))),l.a.createElement("div",{className:"Items__blank-slate__arrow"}))}},{key:"renderItemTypes",value:function(){var e=this.props,t=e.itemTypes,n=e.other,a=e.match.url;return 0===t.length?l.a.createElement("div",{className:"Items"},this.renderBlankSlate(),l.a.createElement(s.a,{to:"".concat(a,"/new"),className:"Items__button"},l.a.createElement(mn.a,null))):l.a.createElement("div",{className:"Items"},l.a.createElement("div",{className:"Items__wrap"},l.a.createElement("div",{className:"Items__items"},n.map(this.renderItemType.bind(this,null))),l.a.createElement(s.a,{to:"".concat(a,"/new"),className:"Items__button"},l.a.createElement(mn.a,null))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.itemTypes,a=t.match.url,r=t.history;return l.a.createElement(u.a,{minSize:250,defaultSize:300,split:"vertical"},l.a.createElement("div",null,n&&this.renderItemTypes()),l.a.createElement("div",null,l.a.createElement(f.e,null,l.a.createElement(f.c,{path:"".concat(a,"/new"),render:function(){return l.a.createElement(Ye.default,{localeKey:"itemType.add",freeContent:!0,noCloseListeners:!0,onClose:function(){return r.push(a)}},l.a.createElement(Et,{itemType:Object(Xe.f)(),onSubmit:e.handleSubmit.bind(e)}))}}),l.a.createElement(f.c,{path:"".concat(a,"/:itemTypeId"),component:nc}))))}}])&&rc(n.prototype,a),r&&rc(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ec,"propTypes",{location:r.a.object.isRequired,dispatch:r.a.func.isRequired,itemTypes:r.a.array,other:r.a.array,match:r.a.object.isRequired,history:r.a.object.isRequired}),Zl=tc))||Zl,sc=n(571),uc=n(2956),mc=n(2953);function pc(e){return(pc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dc(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function fc(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function bc(e,t){return!t||"object"!==pc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yc(e){return(yc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hc(e,t){return(hc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),bc(this,yc(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hc(e,t)}(t,e),n=t,(a=[{key:"renderEvent",value:function(e,t,n){var a=[{value:"item",label:this.t("event.record")},{value:"item_type",label:this.t("event.model")},{value:"upload",label:this.t("event.upload")},{value:"deployment_environment",label:this.t("event.deploymentEnvironment")}],r={itemType:[{value:"all",label:this.t("event.model.noFilter")},{value:"item_type",label:this.t("event.model.only")}],item:[{value:"all",label:this.t("event.record.noFilter")},{value:"item",label:this.t("event.record.only")},{value:"item_type",label:this.t("event.record.modelOnly")}],env:[{value:"all",label:this.t("event.deploymentEnvironment.noFilter")},{value:"deployment_environment",label:this.t("event.deploymentEnvironment.only")}]},i={item_type:[{value:"create",label:this.t("event.create")},{value:"update",label:this.t("event.update"),filters:r.itemType},{value:"delete",label:this.t("event.delete"),filters:r.itemType}],item:[{value:"create",label:this.t("event.create"),filters:r.itemType},{value:"update",label:this.t("event.update"),filters:r.item},{value:"delete",label:this.t("event.delete"),filters:r.item},{value:"publish",label:this.t("event.publish"),filters:r.item},{value:"unpublish",label:this.t("event.unpublish"),filters:r.item}],upload:[{value:"create",label:this.t("event.create")},{value:"update",label:this.t("event.update")},{value:"delete",label:this.t("event.delete")}],deployment_environment:[{value:"deploy_started",label:this.t("event.deployStarted"),filters:r.env},{value:"deploy_succeeded",label:this.t("event.deploySucceeded"),filters:r.env},{value:"deploy_failed",label:this.t("event.deployFailed"),filters:r.env}]},o=this.props.fields,c=n.eventTypes.reduce((function(e,t){var a=i[n.entityType].find((function(e){return e.value===t}));return a&&a.filters?[].concat(dc(e),[a.filters]):[].concat(dc(e),[[]])}),[]),s=c.reduce((function(e,t){return Object(mc.a)(e,t,"value")}),Object(uc.a)(c)),u=s.length>0,m=u&&"all"!==n.filterEntityType;return l.a.createElement("div",{className:"field-array__item field-array__item--align-top",key:t},l.a.createElement("div",{className:"field-array__item__content"},l.a.createElement("div",{className:"PluginForm__preview"},l.a.createElement(ee.default,{name:"".concat(e,".entityType"),intlLabel:"form.webhook.entityOptions",clearable:!1,options:a,component:Q.default}),l.a.createElement(ee.default,{name:"".concat(e,".eventTypes"),intlLabel:"form.webhook.eventTypes",validate:function(e){return e?void 0:"Required"},shouldUpdate:function(){return!0},multiple:!0,options:i[n.entityType],component:Q.default}),u&&l.a.createElement(ee.default,{name:"".concat(e,".filterEntityType"),intlLabel:"form.webhook.filter",options:s,clearable:!1,shouldUpdate:function(){return!0},component:Q.default}),m&&l.a.createElement(ee.default,{name:"".concat(e,".filterEntityIds"),intlLabel:"form.webhook.entityTypeIds.".concat(n.filterEntityType),shouldUpdate:function(){return!0},intlPlaceholder:"form.webhook.entityTypeIds.placeholder",type:"text"}))),l.a.createElement("div",{className:"field-array__item__trash"},l.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),o.remove(t)}},l.a.createElement(qo.a,null))))}},{key:"render",value:function(){var e=this.props,t=e.fields,n=e.meta.error;return l.a.createElement("div",null,n,t.map(this.renderEvent.bind(this)),l.a.createElement("div",{className:"space--top-1"},l.a.createElement("a",{href:"#",className:"button button--tiny",onClick:function(e){e.preventDefault(),t.push({filterEntityType:"all",eventTypes:[]})}},l.a.createElement(mn.a,null),l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"form.webhook.trigger.add"})))))}}])&&fc(n.prototype,a),r&&fc(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(_c,"propTypes",{fields:r.a.object.isRequired,meta:r.a.object.isRequired});var vc=n(703),gc=n(377);function Ec(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Oc(e){return(Oc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wc(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function jc(e,t){return!t||"object"!==Oc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kc(e){return(kc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pc(e,t){return(Pc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nc=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),jc(this,kc(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pc(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props.formikBag.values;return l.a.createElement(X.default,null,l.a.createElement(ee.default,{name:"name",intlLabel:"form.webhook.name",type:"text",className:"form__input--large"}),l.a.createElement("div",{className:"Page__content__section"},l.a.createElement("div",{className:"Page__content__section__title"},l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"form.webhook.httpSettings"}))),l.a.createElement(ee.default,{name:"url",intlLabel:"form.webhook.url",type:"text"}),l.a.createElement("div",{className:"form__field"},l.a.createElement("div",{className:"form__label"},l.a.createElement(i.FormattedMessage,{id:"form.webhook.basicAuth"})),l.a.createElement("div",{className:"grid grid--middle grid--narrow"},l.a.createElement("div",{className:"grid__item desk-6-12"},l.a.createElement(ee.default,{name:"http_basic_user",intlPlaceholder:"form.webhook.httpBasicUser",type:"text"})),l.a.createElement("div",{className:"grid__item desk-6-12"},l.a.createElement(ee.default,{name:"http_basic_password",intlPlaceholder:"form.webhook.httpBasicPassword",type:"text"})))),l.a.createElement("div",{className:"form__field"},l.a.createElement("div",{className:"form__label"},l.a.createElement(i.FormattedMessage,{id:"form.webhook.customHeaders"})),l.a.createElement(J.FieldArray,{name:"headers",component:gc.a}))),l.a.createElement("div",{className:"Page__content__section"},l.a.createElement("div",{className:"Page__content__section__title"},l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"form.webhook.triggers"}))),l.a.createElement("div",{className:"form__field"},l.a.createElement("div",{className:"form__label"},l.a.createElement(i.FormattedMessage,{id:"form.webhook.webhookTriggers"})),l.a.createElement(J.FieldArray,{name:"events",component:_c}))),l.a.createElement("div",{className:"Page__content__section"},l.a.createElement("div",{className:"Page__content__section__title"},l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"form.webhook.body"}))),l.a.createElement("div",{className:"form__field"},l.a.createElement("div",{className:"form__field"},l.a.createElement(ee.default,{component:W.a,intlLabel:"form.webhook.custom_payload",name:"custom_payloadSwitch"})),e.custom_payloadSwitch&&l.a.createElement(ee.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"custom_payload",intlHint:"form.webhook.custom_payload.hint",intlLabel:"form.webhook.custom_payload.label",intlDocs:"form.webhook.custom_payload.docs",docsHref:"https://www.datocms.com/docs/general-concepts/webhooks#customize-the-http-payload",className:"form__input--code",rows:"4",component:vc.a}))),l.a.createElement(Z.a,{intlLabel:"form.webhook.button"}))}}])&&wc(n.prototype,a),r&&wc(n,r),t}(c.a);Sc(Nc,"propTypes",{formikBag:r.a.object.isRequired});var Tc,xc,Rc,Fc={form:"webhook",enableReinitialize:!0,validate:oe()({name:[re.a.required()],url:[re.a.required(),re.a.url()],headers:gc.d,events:{entityType:[re.a.required()],eventTypes:[re.a.required(),re.a.minArrayLength(1)],filterEntityIds:[re.a.conditionalRules([re.a.format(/^\s*[0-9]+(\s*,\s*[0-9]+\s*)*$/)],(function(e){return"all"!==e.filterEntityType}))]},custom_payload:[re.a.requiredIf((function(e){return e.custom_payloadSwitch}))]})},Cc=Object(p.connect)((function(e,t){var n=t.webhook;return{initialValues:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ec(n,!0).forEach((function(t){Sc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ec(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.attributes,{custom_payload:n.attributes.custom_payload||JSON.stringify({message:"{{event_type}} event triggered on {{entity_type}}!",entity_id:"{{#entity}}{{id}}{{/entity}}"},null,2),custom_payloadSwitch:!!n.attributes.custom_payload,events:n.attributes.events.map((function(e){return{entityType:e.entity_type,eventTypes:e.event_types,filterEntityType:e.filter?e.filter.entity_type:"all",filterEntityIds:e.filter&&e.filter.entity_ids.join(", ")}})),headers:Object(gc.b)(n.attributes.headers)}),onSubmit:function(e){var n=ne()(t.webhook),a=ne()(dt()(e,["custom_payload","custom_payloadSwitch"]));return a.events=a.events.map((function(e){return{entity_type:e.entityType,event_types:e.eventTypes,filter:"all"===e.filterEntityType?null:{entity_type:e.filterEntityType,entity_ids:e.filterEntityIds.trim().split(/\s*,+\s*/)}}})),a.headers=Object(gc.c)(a.headers),a.custom_payload=e.custom_payloadSwitch?e.custom_payload:null,n.attributes=a,t.onSubmit(n)}}}))(Object(J.withForm)(Fc)(Nc));function qc(e){return(qc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mc(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ic(e,t){return!t||"object"!==qc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lc(e){return(Lc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ac(e,t){return(Ac=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Dc,zc,Bc,Uc=Object(p.connect)((function(e,t){return{webhook:e.webhooks[t.match.params.webhookId]}}))((Rc=xc=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ic(this,Lc(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ac(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,n=e.match.params;t(Object(sc.fetch)({id:n.webhookId}))}},{key:"handleSubmit",value:function(e){var t,n;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=this.props.dispatch,a.prev=1,n=ne()(e),a.next=5,regeneratorRuntime.awrap(t(Object(sc.update)({id:e.id,data:n})));case 5:t(Object(G.notice)("admin.webhook.update.success")),a.next=12;break;case 8:throw a.prev=8,a.t0=a.catch(1),t(Object(G.alert)("admin.webhook.update.failure")),Object(we.a)(a.t0);case 12:case"end":return a.stop()}}),null,this,[[1,8]])}},{key:"handleDestroy",value:function(e){var t,n,a,r;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=this.props,n=t.dispatch,a=t.webhook,r=t.history,e.preventDefault(),i.next=4,regeneratorRuntime.awrap(Object(se.b)("messages.confirm.destroyWebhook"));case 4:if(i.sent){i.next=6;break}return i.abrupt("return");case 6:return i.prev=6,i.next=9,regeneratorRuntime.awrap(n(Object(sc.destroy)({id:a.id})));case 9:n(Object(G.notice)("admin.webhook.destroy.success")),r.push("/admin/webhooks"),i.next=16;break;case 13:i.prev=13,i.t0=i.catch(6),n(Object(G.alert)("admin.webhook.destroy.failure"));case 16:case"end":return i.stop()}}),null,this,[[6,13]])}},{key:"render",value:function(){var e=this.props.webhook;return l.a.createElement("div",{className:"Page"},l.a.createElement("div",{className:"Page__inner"},l.a.createElement("div",{className:"Page__header"},l.a.createElement("div",{className:"Page__title"},l.a.createElement(i.FormattedMessage,{id:"form.editWebhookForm.title"})),l.a.createElement("div",{className:"Page__space"}),e&&l.a.createElement("a",{href:"#",onClick:this.handleDestroy.bind(this),className:"Page__action--delete"},l.a.createElement(qo.a,null),l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"form.editWebhookForm.delete"})))),l.a.createElement("div",{className:"Page__content"},e&&l.a.createElement(Cc,{webhook:e,onSubmit:this.handleSubmit.bind(this)}))))}}])&&Mc(n.prototype,a),r&&Mc(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(xc,"propTypes",{dispatch:r.a.func.isRequired,webhook:r.a.object,match:r.a.object.isRequired,history:r.a.object.isRequired}),Tc=Rc))||Tc;function Hc(e){return(Hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vc(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Gc(e,t){return!t||"object"!==Hc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jc(e){return(Jc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wc(e,t){return(Wc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $c,Kc,Qc,Xc=Object(p.connect)((function(e,t){return{webhook:e.webhooks[t.webhookId]}}))((Bc=zc=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Gc(this,Jc(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wc(e,t)}(t,e),n=t,(a=[{key:"handleSubmit",value:function(e){var t,n,a,r,i;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=this.props,n=t.dispatch,a=t.history,o.prev=1,o.next=4,regeneratorRuntime.awrap(n(Object(sc.create)({data:e})));case 4:r=o.sent,i=r.data,n(Object(G.notice)("admin.webhook.create.success")),a.push("/admin/webhooks/".concat(i.id,"/edit")),o.next=14;break;case 10:throw o.prev=10,o.t0=o.catch(1),n(Object(G.alert)("admin.webhook.create.failure")),Object(we.a)(o.t0,!0,["events"]);case 14:case"end":return o.stop()}}),null,this,[[1,10]])}},{key:"render",value:function(){var e=Object(Xe.l)();return l.a.createElement("div",{className:"Page"},l.a.createElement("div",{className:"Page__inner"},l.a.createElement("div",{className:"Page__header"},l.a.createElement("div",{className:"Page__title"},l.a.createElement(i.FormattedMessage,{id:"form.newWebhookForm.title"}))),l.a.createElement("div",{className:"Page__content"},l.a.createElement(Cc,{webhook:e,onSubmit:this.handleSubmit.bind(this)}))))}}])&&Vc(n.prototype,a),r&&Vc(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(zc,"propTypes",{dispatch:r.a.func.isRequired,history:r.a.object.isRequired}),Dc=Bc))||Dc;function Yc(e){return(Yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zc(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function es(e,t){return!t||"object"!==Yc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ts(e){return(ts=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ns(e,t){return(ns=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var as=Object(p.connect)((function(e){return{webhooks:Object.values(e.webhooks).sort((function(e,t){return e.attributes.name.localeCompare(t.attributes.name)})),canManageWebhooks:Object(d.getCurrentRole)(e).attributes.can_manage_webhooks}}))((Qc=Kc=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),es(this,ts(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ns(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(Object(sc.fetchAll)())}},{key:"renderWebhook",value:function(e){return l.a.createElement(s.a,{className:"ItemRow",activeClassName:"ItemRow--active",to:"/admin/webhooks/".concat(e.id,"/edit"),key:e.id},l.a.createElement("div",{className:"ItemRow__item"},l.a.createElement("div",{className:"ItemRow__item__inner"},l.a.createElement("div",{className:"ItemRow__item__content"},l.a.createElement("div",{className:"ItemRow__item__title"},e.attributes.name)))))}},{key:"renderBlankSlate",value:function(){return l.a.createElement("div",{className:"Items__blank-slate"},l.a.createElement("div",{className:"Items__blank-slate__inner"},l.a.createElement("div",{className:"Items__blank-slate__title"},l.a.createElement(i.FormattedMessage,{id:"admin.webhook.noWebhooks.title"})),l.a.createElement("div",{className:"Items__blank-slate__description"},l.a.createElement(i.FormattedMessage,{id:"admin.webhook.noWebhooks.description"}))),l.a.createElement("div",{className:"Items__blank-slate__arrow"}))}},{key:"renderWebhooks",value:function(){var e=this.props.webhooks;return l.a.createElement("div",{className:"Items"},e.length>0?l.a.createElement("div",{className:"Items__items"},e.map(this.renderWebhook.bind(this))):this.renderBlankSlate(),l.a.createElement(s.a,{className:"Items__button",to:"/admin/webhooks/new"},l.a.createElement(mn.a,null)))}},{key:"render",value:function(){var e=this.props,t=e.canManageWebhooks,n=e.children,a=e.webhooks,r=e.match.url;return t?l.a.createElement(u.a,{minSize:300,defaultSize:400,split:"vertical"},l.a.createElement("div",null,a?this.renderWebhooks():l.a.createElement(Be.a,{size:100})),l.a.createElement("div",null,l.a.createElement(f.e,null,l.a.createElement(f.c,{path:"".concat(r,"/new"),component:Xc}),l.a.createElement(f.c,{path:"".concat(r,"/:webhookId/edit"),component:Uc})))):l.a.createElement("div",{className:"Dashboard"},n)}}])&&Zc(n.prototype,a),r&&Zc(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Kc,"propTypes",{dispatch:r.a.func.isRequired,webhooks:r.a.array,canManageWebhooks:r.a.bool,children:r.a.element,match:r.a.object.isRequired}),$c=Qc))||$c,rs=n(82),is=n(2216);function os(e){if(e)return e.charAt(0).toUpperCase()+e.slice(1)}function ls(e){return e.split(/\-/).map((function(e){return os(e)})).join("-")}var cs,ss,us,ms=n(2217),ps=n(1012);function ds(e){return(ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function bs(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ys(e,t){return!t||"object"!==ds(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hs(e){return(hs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _s(e,t){return(_s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vs,gs,Es,Os=Object(p.connect)((function(e){return{webhooks:e.webhooks}}))((us=ss=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ys(this,hs(t).call(this,e))).state={detailsOpen:!1},n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_s(e,t)}(t,e),n=t,(a=[{key:"isStatusOk",value:function(){var e=this.props.call.attributes.response_status;return null!==e&&e<=300}},{key:"handleDetails",value:function(e){e.preventDefault(),this.setState({detailsOpen:!0})}},{key:"handleResend",value:function(e){e.preventDefault();var t=this.props,n=t.call;(0,t.dispatch)(Object(ps.resend)(n.id))}},{key:"handleClose",value:function(){this.setState({detailsOpen:!1})}},{key:"renderCreatedAt",value:function(){var e=this.props.call;return l.a.createElement(ms.a,{title:"deployEvent.details.timestamp"},l.a.createElement(i.FormattedDate,{value:Date.parse(e.attributes.created_at)})," ",l.a.createElement(i.FormattedTime,{value:Date.parse(e.attributes.created_at)}))}},{key:"renderBody",value:function(e,t){if(t){var n=t;try{n=JSON.stringify(JSON.parse(t),null,2)}catch(e){}return l.a.createElement(ms.a,{title:e},l.a.createElement(is.a,{log:n}))}}},{key:"renderHeaders",value:function(e,t){if(t){var n=Object.entries(t).map((function(e){var t=fs(e,2),n=t[0],a=t[1];return"".concat(ls(n),": ").concat(a)})).join("\n");return l.a.createElement(ms.a,{title:e},l.a.createElement(is.a,{log:n}))}}},{key:"renderTitle",value:function(e,t){if(t)return l.a.createElement(ms.a,{title:e},l.a.createElement("p",{className:"beta"},t))}},{key:"renderRequestDetails",value:function(){var e=this.props.call.attributes;return l.a.createElement("div",{className:"WebhookCall__details"},this.renderTitle("webhookCall.details.requestUrl",e.request_url),this.renderHeaders("webhookCall.details.requestHeaders",e.request_headers),this.renderBody("webhookCall.details.requestBody",e.request_payload),this.renderTitle("webhookCall.details.responseStatusCode",e.response_status),this.renderHeaders("webhookCall.details.responseHeaders",e.response_headers),this.renderBody("webhookCall.details.responseBody",e.response_payload),this.renderCreatedAt())}},{key:"render",value:function(){var e=this.state.detailsOpen,t=this.props,n=t.call,a=t.webhooks[n.relationships.webhook.data.id],r=n.attributes,o=r.entity_type,c=r.event_type;return l.a.createElement("div",{className:"WebhookCall"},l.a.createElement("div",{className:"WebhookCall__inner"},l.a.createElement("div",{className:"WebhookCall__title"},l.a.createElement("div",{className:"WebhookCall__status--".concat(this.isStatusOk()?"green":"red")},null===n.attributes.response_status?"error":"http ".concat(n.attributes.response_status)),l.a.createElement(i.FormattedMessage,{id:"webhookCalls.event.".concat(o,".").concat(c)})),l.a.createElement("div",{className:"WebhookCall__sub"},l.a.createElement("div",{className:"WebhookCall__sub__item"},l.a.createElement(rs.a,{value:n.attributes.created_at})),l.a.createElement("div",{className:"WebhookCall__sub__item"},a.attributes.name),l.a.createElement("div",{className:"WebhookCall__sub__item"},l.a.createElement("a",{href:"#",onClick:this.handleDetails.bind(this)},l.a.createElement(i.FormattedMessage,{id:"deployEvent.showDetails"}))))),!this.isStatusOk()&&l.a.createElement("a",{className:"WebhookCall__button",href:"#",onClick:this.handleResend.bind(this)},l.a.createElement(i.FormattedMessage,{id:"webhookCall.resendWebhook"})),e&&l.a.createElement(Ye.default,{wide:!0,localeKey:"deployEvent.detailsTitle",onClose:this.handleClose.bind(this)},this.renderRequestDetails()))}}])&&bs(n.prototype,a),r&&bs(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ss,"propTypes",{dispatch:r.a.func.isRequired,call:r.a.object.isRequired,webhooks:r.a.object.isRequired}),cs=us))||cs,ws=n(667),js=n(2431),ks=n.n(js);function Ps(e){return(Ps="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ss(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ns(e){return(Ns=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ts(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xs(e,t){return(xs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Rs=Object(p.connect)((function(e){return{calls:Object.values(e.webhookCalls).sort((function(e,t){return Date.parse(e.attributes.created_at)-Date.parse(t.attributes.created_at)})).reverse(),site:e.site}}))((Es=gs=function(e){function t(e){var n,a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,(n=!(r=Ns(t).call(this,e))||"object"!==Ps(r)&&"function"!=typeof r?Ts(a):r).handleWebhookEvent=ks()(n.handleWebhookEvent.bind(Ts(n)),3e3),n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xs(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.props.dispatch;Object(ws.a)().bind("webhook:event",this.handleWebhookEvent),e(Object(ps.fetchAll)())}},{key:"componentWillUnmount",value:function(){Object(ws.a)().unbind("webhook:event",this.handleWebhookEvent)}},{key:"handleWebhookEvent",value:function(){(0,this.props.dispatch)(Object(ps.fetchAll)())}},{key:"renderCall",value:function(e){return l.a.createElement(Os,{key:e.id,call:e})}},{key:"render",value:function(){var e=this.props.calls;return l.a.createElement("div",{className:"Page"},l.a.createElement("div",{className:"Page__inner"},l.a.createElement("div",{className:"Page__header"},l.a.createElement("div",{className:"Page__title"},l.a.createElement(i.FormattedMessage,{id:"admin.webhookCalls.title"}))),l.a.createElement("div",{className:"Info"},l.a.createElement("div",{className:"Info__icon"},l.a.createElement(Vl,null)),l.a.createElement("div",{className:"Info__body"},l.a.createElement(i.FormattedMessage,{id:"admin.webhookCalls.instructions"}))),l.a.createElement("div",{className:"Page__content--transparent"},e.map(this.renderCall,this),0===e.length&&l.a.createElement("div",{className:"blank-slate blank-slate--tiny"},l.a.createElement("p",{className:"blank-slate__title"},l.a.createElement(i.FormattedMessage,{id:"admin.webhookCalls.noEvents.title"}))))))}}])&&Ss(n.prototype,a),r&&Ss(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(gs,"propTypes",{dispatch:r.a.func.isRequired,calls:r.a.array}),vs=Es))||vs,Fs=n(1009);function Cs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function qs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cs(n,!0).forEach((function(t){zs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cs(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ms(e){return(Ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Is(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ls(e,t){return!t||"object"!==Ms(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function As(e){return(As=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ds(e,t){return(Ds=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bs=function(e){var t=e.deploymentEnvironments,n=e.fields,a=e.meta.error,r=[{value:"all",label:l.a.createElement(i.FormattedMessage,{id:"role.canPublish.all"})}].concat(t.map((function(e){return{value:e.id,label:e.attributes.name}})));return l.a.createElement("div",null,a,n.map((function(e,t){return l.a.createElement("div",{className:"field-array__item",key:e},l.a.createElement("div",{className:"field-array__item__content"},l.a.createElement(ee.default,{name:"".concat(e,".deployment_environment"),showLabel:!1,clearable:!1,options:r,component:Q.default})),l.a.createElement("div",{className:"field-array__item__trash"},l.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),n.remove(t)}},l.a.createElement(qo.a,null))))})),l.a.createElement("div",{className:"space--top-1"},l.a.createElement("a",{href:"#",className:"button button--tiny",onClick:function(e){e.preventDefault(),n.push({deployment_environment:null})}},l.a.createElement(mn.a,null),l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"role.form.addRule"})))))};Bs.propTypes={deploymentEnvironments:r.a.array.isRequired,fields:r.a.object.isRequired,meta:r.a.object.isRequired};var Us=function(e){var t=e.itemTypes,n=e.fields,a=e.t,r=e.positive,o=e.itemLockingEnabled,c=e.meta.error,s=[{label:a("role.select.action.".concat(r?"all":"none")),value:"all"},{label:a("role.select.action.read"),value:"read"},{label:a("role.select.action.duplicate"),value:"create"},{label:a("role.select.action.update"),value:"update"},{label:a("role.select.action.unpublish"),value:"publish"},{label:a("role.select.action.delete"),value:"delete"},{label:a("role.select.action.editCreator"),value:"edit_creator"},o&&{label:a("role.select.action.takeOver"),value:"take_over"}].filter((function(e){return e})),u=[{value:"all",label:a("role.select.model.".concat(r?"all":"none"))}].concat(t.map((function(e){return{value:e.id,label:e.attributes.name}}))),m=[{label:a("role.select.creator.".concat(r?"anyone":"negativeAnyone")),value:"anyone"},{label:a("role.select.creator.".concat(r?"self":"negativeSelf")),value:"self"},{label:a("role.select.creator.".concat(r?"role":"negativeRole")),value:"role"}];return l.a.createElement("div",null,c,n.map((function(e,t,a){return l.a.createElement("div",{className:"field-array__item",key:e},l.a.createElement("div",{className:"field-array__item__content"},l.a.createElement("div",{className:"grid grid--middle grid--narrow"},l.a.createElement("div",{className:"grid__item desk-4-12"},l.a.createElement(ee.default,{name:"".concat(e,".action"),showLabel:!1,clearable:!1,options:s,component:Q.default})),l.a.createElement("div",{className:"grid__item desk-4-12"},l.a.createElement(ee.default,{name:"".concat(e,".item_type"),clearable:!1,showLabel:!1,options:u,component:Q.default})),a&&"create"!==a.action&&l.a.createElement("div",{className:"grid__item desk-4-12"},l.a.createElement(ee.default,{name:"".concat(e,".on_creator"),clearable:!1,showLabel:!1,options:m,component:Q.default})))),l.a.createElement("div",{className:"field-array__item__trash"},l.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),n.remove(t)}},l.a.createElement(qo.a,null))))})),l.a.createElement("div",{className:"space--top-1"},l.a.createElement("a",{href:"#",className:"button button--tiny",onClick:function(e){e.preventDefault(),n.push({item_type:null,action:null,on_creator:null})}},l.a.createElement(mn.a,null),l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"role.form.addRule"})))))};Us.propTypes={itemTypes:r.a.array.isRequired,itemLockingEnabled:r.a.bool,fields:r.a.object.isRequired,meta:r.a.object.isRequired,t:r.a.func.isRequired,positive:r.a.bool};var Hs=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ls(this,As(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ds(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.itemTypes,n=e.itemLockingEnabled,a=e.deploymentEnvironments;return l.a.createElement(X.default,null,l.a.createElement(ee.default,{name:"name",intlLabel:"role.name",type:"text",className:"form__input--large"}),l.a.createElement("div",{className:"Page__content__section"},l.a.createElement("div",{className:"Page__content__section__title"},l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"role.content"}))),l.a.createElement("div",{className:"form__field"},l.a.createElement("div",{className:"form__label"},l.a.createElement(i.FormattedMessage,{id:"role.whoCan"})),l.a.createElement(J.FieldArray,{name:"item_type_positive",itemTypes:t,component:Us,itemLockingEnabled:n,positive:!0,t:this.t.bind(this)})),l.a.createElement("div",{className:"form__field"},l.a.createElement("div",{className:"form__label"},l.a.createElement(i.FormattedMessage,{id:"role.whoCannot"})),l.a.createElement(J.FieldArray,{name:"item_type_negative",itemTypes:t,component:Us,positive:!1,t:this.t.bind(this)})),l.a.createElement(ee.default,{name:"can_edit_favicon",intlLabel:"role.canEditFavicon",component:W.a})),l.a.createElement("div",{className:"Page__content__section"},l.a.createElement("div",{className:"Page__content__section__title"},l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"role.publishing"}))),l.a.createElement("div",{className:"form__field"},l.a.createElement("div",{className:"form__label"},l.a.createElement(i.FormattedMessage,{id:"role.whoCanPublish"})),l.a.createElement(J.FieldArray,{name:"deployment_environment_positive",deploymentEnvironments:a,component:Bs})),l.a.createElement("div",{className:"form__field"},l.a.createElement("div",{className:"form__label"},l.a.createElement(i.FormattedMessage,{id:"role.whoCannotPublish"})),l.a.createElement(J.FieldArray,{name:"deployment_environment_negative",deploymentEnvironments:a,component:Bs}))),l.a.createElement("div",{className:"Page__content__section"},l.a.createElement("div",{className:"Page__content__section__title"},l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"role.admin"}))),l.a.createElement(ee.default,{name:"can_edit_schema",intlLabel:"role.canEditSchema",component:W.a}),l.a.createElement(ee.default,{name:"can_edit_site",intlLabel:"role.canEditSite",component:W.a}),l.a.createElement(ee.default,{name:"can_manage_users",intlLabel:"role.canManageUsers",component:W.a}),l.a.createElement(ee.default,{name:"can_manage_webhooks",intlLabel:"role.canManageWebhooks",component:W.a}),l.a.createElement(ee.default,{name:"can_manage_access_tokens",intlLabel:"role.canManageAccessTokens",component:W.a}),l.a.createElement(ee.default,{name:"can_manage_deployment_environments",intlLabel:"role.canManageDeploymentEnvironments",component:W.a}),l.a.createElement(ee.default,{name:"can_manage_shared_filters",intlLabel:"role.canManageSharedFilters",component:W.a}),l.a.createElement(ee.default,{name:"can_perform_site_search",intlLabel:"role.canPerformSiteSearch",component:W.a})),l.a.createElement(Z.a,{intlLabel:"role.button"}))}}])&&Is(n.prototype,a),r&&Is(n,r),t}(c.a);zs(Hs,"propTypes",{itemTypes:r.a.array.isRequired,deploymentEnvironments:r.a.array.isRequired,itemLockingEnabled:r.a.bool});function Vs(e){return(e||[]).map((function(e){return qs({},e,{item_type:e.item_type||"all"})}))}function Gs(e){return(e||[]).map((function(e){return qs({},e,{item_type:"all"===e.item_type?null:e.item_type,on_creator:"create"===e.action?null:e.on_creator})}))}function Js(e){return(e||[]).map((function(e){return qs({},e,{deployment_environment:e.deployment_environment||"all"})}))}function Ws(e){return(e||[]).map((function(e){return qs({},e,{deployment_environment:"all"===e.deployment_environment?null:e.deployment_environment})}))}var $s,Ks,Qs,Xs=Object(p.connect)((function(e,t){var n={name:[re.a.required()],item_type_positive:{action:[re.a.required()],item_type:[re.a.required()],on_creator:[re.a.requiredIf((function(e){return"create"!==e.action}))]},item_type_negative:{action:[re.a.required()],item_type:[re.a.required()]},deployment_environment_positive:{deployment_environment:[re.a.required()]},deployment_environment_negative:{deployment_environment:[re.a.required()]}},a=Object.values(e.itemTypes).filter((function(e){return!e.attributes.modular_block})).sort((function(e,t){return e.attributes.name.localeCompare(t.attributes.name)})),r=Object.values(e.deploymentEnvironments).sort((function(e,t){return e.attributes.name.localeCompare(t.attributes.name)})),i=qs({},dt()(t.role.attributes,["positive_item_type_permissions","negative_item_type_permissions","positive_deployment_environment_permissions","negative_deployment_environment_permissions"]),{item_type_positive:Vs(t.role.attributes.positive_item_type_permissions),item_type_negative:Vs(t.role.attributes.negative_item_type_permissions),deployment_environment_positive:Js(t.role.attributes.positive_deployment_environment_permissions),deployment_environment_negative:Js(t.role.attributes.negative_deployment_environment_permissions)});return{enableReinitialize:!0,validate:oe()(n),initialValues:i,deploymentEnvironments:r,itemLockingEnabled:Object(d.isItemLockingEnabled)(e),itemTypes:a,onSubmit:function(e){var n=dt()(e,["item_type_positive","item_type_negative","deployment_environment_positive","deployment_environment_negative"]),a=ne()(t.role);return a.attributes=Object.assign(n,{positive_item_type_permissions:Gs(e.item_type_positive),negative_item_type_permissions:Gs(e.item_type_negative),positive_deployment_environment_permissions:Ws(e.deployment_environment_positive),negative_deployment_environment_permissions:Ws(e.deployment_environment_negative)}),t.onSubmit(a)}}}))(Object(J.withForm)({form:"role"})(Hs));function Ys(e){return(Ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zs(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function eu(e,t){return!t||"object"!==Ys(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tu(e){return(tu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nu(e,t){return(nu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var au,ru,iu,ou=Object(p.connect)((function(e,t){return{role:e.roles[t.match.params.roleId]}}))((Qs=Ks=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),eu(this,tu(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nu(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,n=e.match.params;t(Object(Fs.fetch)({id:n.roleId}))}},{key:"handleSubmit",value:function(e){var t,n;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=this.props.dispatch,a.prev=1,n=ne()(e),a.next=5,regeneratorRuntime.awrap(t(Object(Fs.update)({id:e.id,data:n})));case 5:t(Object(G.notice)("editor.role.update.success")),a.next=12;break;case 8:throw a.prev=8,a.t0=a.catch(1),t(Object(G.alert)("editor.role.update.failure")),Object(we.a)(a.t0);case 12:case"end":return a.stop()}}),null,this,[[1,8]])}},{key:"handleDestroy",value:function(e){var t,n,a,r;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=this.props,n=t.dispatch,a=t.role,r=t.history,e.preventDefault(),i.next=4,regeneratorRuntime.awrap(Object(se.b)("messages.confirm.destroyRole"));case 4:if(i.sent){i.next=6;break}return i.abrupt("return");case 6:return i.prev=6,i.next=9,regeneratorRuntime.awrap(n(Object(Fs.destroy)({id:a.id})));case 9:n(Object(G.notice)("editor.role.destroy.success")),r.push("/admin/roles"),i.next=16;break;case 13:i.prev=13,i.t0=i.catch(6),n(Object(G.alert)("editor.role.destroy.failure"));case 16:case"end":return i.stop()}}),null,this,[[6,13]])}},{key:"render",value:function(){var e=this.props.role;return l.a.createElement("div",{className:"Page Page--large"},l.a.createElement("div",{className:"Page__inner"},l.a.createElement("div",{className:"Page__header"},l.a.createElement("div",{className:"Page__title"},l.a.createElement(i.FormattedMessage,{id:"form.editRoleForm.title"})),l.a.createElement("div",{className:"Page__space"}),e&&l.a.createElement("a",{href:"#",onClick:this.handleDestroy.bind(this),className:"Page__action--delete"},l.a.createElement(qo.a,null),l.a.createElement(i.FormattedMessage,{id:"form.editRoleForm.delete"}))),l.a.createElement("div",{className:"Page__content"},e&&l.a.createElement(Xs,{role:e,onSubmit:this.handleSubmit.bind(this)}))))}}])&&Zs(n.prototype,a),r&&Zs(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ks,"propTypes",{dispatch:r.a.func.isRequired,role:r.a.object,match:r.a.object.isRequired,history:r.a.object.isRequired}),$s=Qs))||$s;function lu(e){return(lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cu(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function su(e,t){return!t||"object"!==lu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uu(e){return(uu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mu(e,t){return(mu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pu,du,fu,bu=Object(p.connect)((function(e,t){return{role:e.roles[t.roleId]}}))((iu=ru=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),su(this,uu(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mu(e,t)}(t,e),n=t,(a=[{key:"handleSubmit",value:function(e){var t,n,a,r,i,o;return regeneratorRuntime.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t=this.props,n=t.dispatch,a=t.history,l.prev=1,r=ne()(e),l.next=5,regeneratorRuntime.awrap(n(Object(Fs.create)({data:r})));case 5:i=l.sent,o=i.data,n(Object(G.notice)("editor.role.create.success")),a.push("/admin/roles/".concat(o.id,"/edit")),l.next=15;break;case 11:throw l.prev=11,l.t0=l.catch(1),n(Object(G.alert)("editor.role.create.failure")),Object(we.a)(l.t0);case 15:case"end":return l.stop()}}),null,this,[[1,11]])}},{key:"render",value:function(){var e=Object(Xe.j)();return l.a.createElement("div",{className:"Page Page--large"},l.a.createElement("div",{className:"Page__inner"},l.a.createElement("div",{className:"Page__header"},l.a.createElement("div",{className:"Page__title"},l.a.createElement(i.FormattedMessage,{id:"form.newRoleForm.title"}))),l.a.createElement("div",{className:"Page__content"},l.a.createElement(Xs,{role:e,onSubmit:this.handleSubmit.bind(this)}))))}}])&&cu(n.prototype,a),r&&cu(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ru,"propTypes",{dispatch:r.a.func.isRequired,history:r.a.object.isRequired}),au=iu))||au;function yu(e){return(yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hu(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _u(e,t){return!t||"object"!==yu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vu(e){return(vu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gu(e,t){return(gu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Eu,Ou,wu,ju=Object(p.connect)((function(e){return{roles:Object.values(e.roles).sort((function(e,t){return e.attributes.name.localeCompare(t.attributes.name)})),canManageUsers:Object(d.getCurrentRole)(e).attributes.can_manage_users}}))((fu=du=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_u(this,vu(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gu(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(Object(Fs.fetchAll)())}},{key:"renderRole",value:function(e){return l.a.createElement(s.a,{className:"ItemRow",activeClassName:"ItemRow--active",to:"/admin/roles/".concat(e.id,"/edit"),key:e.id},l.a.createElement("div",{className:"ItemRow__item"},l.a.createElement("div",{className:"ItemRow__item__inner"},l.a.createElement("div",{className:"ItemRow__item__content"},l.a.createElement("div",{className:"ItemRow__item__title"},e.attributes.name)))))}},{key:"renderBlankSlate",value:function(){return l.a.createElement("div",{className:"Items__blank-slate"},l.a.createElement("div",{className:"Items__blank-slate__inner"},l.a.createElement("div",{className:"Items__blank-slate__image"},l.a.createElement("img",{src:"/assets/images/role.svg",alt:"Roles"})),l.a.createElement("div",{className:"Items__blank-slate__title"},l.a.createElement(i.FormattedMessage,{id:"editor.editors.noEditors.title"})),l.a.createElement("div",{className:"Items__blank-slate__description"},l.a.createElement(i.FormattedMessage,{id:"editor.editors.noEditors.description"}))),l.a.createElement("div",{className:"Items__blank-slate__arrow"}))}},{key:"renderRoles",value:function(){var e=this.props.roles;return l.a.createElement("div",{className:"Items"},e.length>0?l.a.createElement("div",{className:"Items__items"},e.map(this.renderRole.bind(this))):this.renderBlankSlate(),l.a.createElement(s.a,{className:"Items__button",to:"/admin/roles/new"},l.a.createElement(mn.a,null)))}},{key:"render",value:function(){var e=this.props,t=e.canManageUsers,n=e.children,a=e.roles,r=e.match.url;return t?l.a.createElement(u.a,{minSize:250,defaultSize:300,split:"vertical"},l.a.createElement("div",null,a?this.renderRoles():l.a.createElement(Be.a,{size:100})),l.a.createElement("div",null,l.a.createElement(f.e,null,l.a.createElement(f.c,{path:"".concat(r,"/:roleId/edit"),component:ou}),l.a.createElement(f.c,{path:"".concat(r,"/new"),component:bu})))):l.a.createElement("div",{className:"Dashboard"},n)}}])&&hu(n.prototype,a),r&&hu(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(du,"propTypes",{dispatch:r.a.func.isRequired,roles:r.a.array,children:r.a.element,canManageUsers:r.a.bool,match:r.a.object.isRequired}),pu=fu))||pu;function ku(e,t){var n;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,regeneratorRuntime.awrap(fetch("https://graphql.datocms.com/",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer a95d656d1c80509f18a1f17d2cf2e4"},body:JSON.stringify({query:e,variables:t})}));case 2:return n=a.sent,a.abrupt("return",n.json());case 4:case"end":return a.stop()}}))}function Pu(e){return ku("\n    query fetchPlugins($name: String!) {\n      plugin(filter: {packageName: {eq: $name}}) {\n        title\n        description\n        packageName\n        pluginType { code }\n        fieldTypes { code }\n        entryPoint\n        parameters\n        previewImage { url }\n        version\n        homepage\n      }\n    }\n    ",{name:e})}function Su(e){return(Su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nu(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Tu(e,t){return!t||"object"!==Su(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xu(e){return(xu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ru(e,t){return(Ru=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Fu,Cu,qu,Mu=Object(p.connect)()((wu=Ou=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Tu(this,xu(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ru(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){var e,t,n,a,r,i,o,l,c;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=this.props,t=e.dispatch,n=e.history,a=e.match.params,s.prev=1,s.next=4,regeneratorRuntime.awrap(Pu(a.packageName));case 4:return r=s.sent,i=r.data.plugin,(o=Object(Xe.i)()).attributes.name=i.title,o.attributes.description=i.description,o.attributes.plugin_type=i.pluginType.code,o.attributes.url=i.entryPoint,o.attributes.field_types=i.fieldTypes.map((function(e){return e.code})),o.attributes.parameter_definitions=i.parameters,o.attributes.package_name=i.packageName,o.attributes.package_version=i.version,s.next=17,regeneratorRuntime.awrap(t(Object(Ta.create)({data:o})));case 17:l=s.sent,c=l.data.id,t(Object(G.notice)("admin.plugin.create.success")),n.push("/admin/plugins/".concat(c,"/edit")),s.next=26;break;case 23:s.prev=23,s.t0=s.catch(1),s.t0&&s.t0.data&&"PLAN_UPGRADE_REQUIRED"===s.t0.data[0].attributes.code?t(Object(G.alert)("planUpgradeRequired.plugins.description")):t(Object(G.alert)("admin.plugin.create.failure"));case 26:case"end":return s.stop()}}),null,this,[[1,23]])}},{key:"render",value:function(){var e=this.props.history;return l.a.createElement(Ye.default,{localeKey:"plugin.install",onClose:function(){return e.push("/admin/plugins")}},l.a.createElement("div",{className:"NetlifySettings__linkedStep__loading"},l.a.createElement(Be.a,{size:80})))}}])&&Nu(n.prototype,a),r&&Nu(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ou,"propTypes",{match:r.a.object.isRequired,dispatch:r.a.func.isRequired,history:r.a.object.isRequired}),Eu=wu))||Eu;function Iu(e){return(Iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lu(){return(Lu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Au(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Du(e,t){return!t||"object"!==Iu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zu(e){return(zu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bu(e,t){return(Bu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Uu,Hu,Vu,Gu=["boolean","date","date_time","float","integer","string","text","json","color","rich_text"],Ju=Object(p.connect)((function(e,t){var n=t.newRecord,a=ne()(t.plugin.attributes);a.parameter_definitions=JSON.stringify(a.parameter_definitions,null,2);var r={name:[re.a.required()],url:[re.a.required(),re.a.url()],field_types:[re.a.required(),re.a.minArrayLength(1)]};return n&&(r.parameter_definitions=[re.a.required(),re.a.json()]),{form:t.newRecord?"newPlugin":"plugin",initialValues:a,validate:oe()(r),onSubmit:function(e){var a=ne()(t.plugin);return n?(a.attributes=dt()(e,"parameters"),a.attributes.parameter_definitions=JSON.parse(e.parameter_definitions)):a.attributes=dt()(e,["parameter_definitions","field_types","plugin_type"]),t.onSubmit(a)}}}))(Fu=Object(J.withForm)()((qu=Cu=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Du(this,zu(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bu(e,t)}(t,e),n=t,(a=[{key:"renderField",value:function(e,t){var n=t.required?{required:{}}:{};return l.a.createElement(ee.default,Lu({key:t.id,name:"parameters.".concat(t.id),label:t.label,hint:t.hint,required:t.required},Object(Ra.a)({fieldType:t.type,appeareance:kr(t.type),validators:n,disabled:e})))}},{key:"render",value:function(){var e=this,t=this.props,n=t.formikBag.values,a=t.newRecord,r=t.plugin,i=[],o=[];function c(e){return e.forEach((function(e){if(!(e&&"object"===Iu(e)&&e.id&&e.label&&Gu.includes(e.type)))throw new Error("invalid")})),e}if(n&&n.parameter_definitions)try{var s=JSON.parse(n.parameter_definitions);i=c(s.global),o=c(s.instance)}catch(e){}var u=["boolean","date","date_time","float","integer","string","text","lat_lon","json","seo","slug","link","links","video","color"].map((function(t){return{label:e.t("fieldType.".concat(t)),value:t}}));"field_addon"===n.plugin_type&&u.push({label:this.t("fieldType.rich_text"),value:"rich_text"});var m=["field_editor","field_addon","sidebar"].map((function(t){return{label:e.t("pluginType.".concat(t)),value:t}})),p=!r.attributes.package_name;return l.a.createElement(X.default,null,p&&l.a.createElement(ee.default,{required:!0,name:"name",intlLabel:"plugin.name",type:"text",className:"form__input--large"}),p&&l.a.createElement(ee.default,{name:"description",intlLabel:"plugin.description",component:xa.a}),p&&l.a.createElement(ee.default,{required:!0,name:"url",intlLabel:"plugin.url",intlHint:"plugin.url.hint",type:"text"}),p&&a&&l.a.createElement(ee.default,{name:"plugin_type",intlLabel:"plugin.pluginType",intlHint:"plugin.pluginType.hint",options:m,component:Q.default}),p&&a&&l.a.createElement(ee.default,{required:!0,name:"field_types",intlLabel:"plugin.field_types",intlHint:"plugin.field_types.hint",multiple:!0,options:u,component:Q.default,shouldUpdate:function(){return!0}}),a&&l.a.createElement(ee.default,{name:"parameter_definitions",intlLabel:"plugin.parameter_definitions",intlHint:"plugin.parameter_definitions.hint",disabled:!a,component:vc.a}),a&&i.length>0&&l.a.createElement("div",{className:"PluginForm__preview"},l.a.createElement("div",{className:"PluginForm__preview__title"},"Global parameters preview"),i.map(this.renderField.bind(this,!0))),a&&o.length>0&&l.a.createElement("div",{className:"PluginForm__preview"},l.a.createElement("div",{className:"PluginForm__preview__title"},"Instance parameters preview"),o.map(this.renderField.bind(this,!0))),!a&&r.attributes.parameter_definitions.global.length>0&&r.attributes.parameter_definitions.global.map(this.renderField.bind(this,!1)),l.a.createElement(Z.a,{intlLabel:"plugin.button"}))}}])&&Au(n.prototype,a),r&&Au(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Cu,"propTypes",{plugin:r.a.object.isRequired,newRecord:r.a.bool,formikBag:r.a.object.isRequired}),Fu=qu))||Fu)||Fu;function Wu(e){return(Wu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $u(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ku(e,t){return!t||"object"!==Wu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qu(e){return(Qu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xu(e,t){return(Xu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Yu,Zu,em,tm=Object(p.connect)((function(e,t){var n=e.plugins[t.match.params.pluginId],a=Object.values(e.fields).filter((function(e){return!!n&&(["field_editor","sidebar"].includes(n.attributes.plugin_type)?e.attributes.appeareance.editor===n.id:"field_addon"===n.attributes.plugin_type&&e.attributes.appeareance.addons.some((function(e){return e.id===n.id})))}));return{plugin:n,fieldsWithPlugin:a,itemTypes:e.itemTypes}}))((Vu=Hu=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ku(this,Qu(t).call(this,e))).state={datoPlugin:null},n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xu(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){this.fetchInfo(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.match.params;e.match.params.pluginId!==t.pluginId&&this.fetchInfo(e)}},{key:"fetchInfo",value:function(e){var t,n,a,r,i;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.dispatch,n=e.match.params,o.next=3,regeneratorRuntime.awrap(t(Object(Ta.fetch)({id:n.pluginId})));case 3:if(a=o.sent,!(r=a.data).attributes.package_name){o.next=10;break}return o.next=8,regeneratorRuntime.awrap(Pu(r.attributes.package_name));case 8:i=o.sent,this.setState({datoPlugin:i.data.plugin});case 10:case"end":return o.stop()}}),null,this)}},{key:"handleSubmit",value:function(e){var t,n;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=this.props.dispatch,a.prev=1,delete(n=ne()(e)).attributes.package_name,delete n.attributes.package_version,a.next=7,regeneratorRuntime.awrap(t(Object(Ta.update)({id:e.id,data:n})));case 7:t(Object(G.notice)("admin.plugin.update.success")),a.next=14;break;case 10:throw a.prev=10,a.t0=a.catch(1),t(Object(G.alert)("admin.plugin.update.failure")),Object(we.a)(a.t0);case 14:case"end":return a.stop()}}),null,this,[[1,10]])}},{key:"handleUpdate",value:function(){var e,t,n,a,r;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return e=this.props,t=e.dispatch,n=e.plugin,i.prev=1,a=this.state.datoPlugin,(r=ne()(n)).attributes={name:a.title,description:a.description,parameters:n.attributes.parameters,package_version:a.version,url:a.entryPoint},i.next=7,regeneratorRuntime.awrap(t(Object(Ta.update)({id:n.id,data:r})));case 7:t(Object(G.notice)("admin.plugin.update.success")),i.next=14;break;case 10:throw i.prev=10,i.t0=i.catch(1),t(Object(G.alert)("admin.plugin.update.failure")),Object(we.a)(i.t0);case 14:case"end":return i.stop()}}),null,this,[[1,10]])}},{key:"handleDestroy",value:function(e){var t,n,a,r;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=this.props,n=t.dispatch,a=t.plugin,r=t.history,e.preventDefault(),i.next=4,regeneratorRuntime.awrap(Object(se.b)("messages.confirm.destroyPlugin"));case 4:if(i.sent){i.next=6;break}return i.abrupt("return");case 6:return i.prev=6,i.next=9,regeneratorRuntime.awrap(n(Object(Ta.destroy)({id:a.id})));case 9:n(Object(G.notice)("admin.plugin.destroy.success")),r.push("/admin/plugins"),i.next=16;break;case 13:i.prev=13,i.t0=i.catch(6),n(Object(G.alert)("admin.plugin.destroy.failure"));case 16:case"end":return i.stop()}}),null,this,[[6,13]])}},{key:"renderField",value:function(e){var t=this.props.itemTypes,n=[l.a.createElement("span",{key:"desc"},l.a.createElement(i.FormattedMessage,{id:"fieldType.".concat(e.attributes.field_type)}))],a=cn.find((function(t){return t.types.includes(e.attributes.field_type)})),r=t[e.relationships.item_type.data.id],o=sn[a.name];return l.a.createElement(s.a,{key:e.id,className:"FieldRow",to:"/admin/item_types/".concat(r.id)},l.a.createElement("div",{className:"FieldRow__row"},l.a.createElement("div",{className:"FieldRow__body"},l.a.createElement("div",{className:"FieldRow__icon"},l.a.createElement(o,null)),l.a.createElement("div",{className:"FieldRow__info"},l.a.createElement("div",null,l.a.createElement("span",{className:"FieldRow__label"},r.attributes.name," > ",e.attributes.label,e.attributes.validators.required&&"*"),l.a.createElement("span",{className:"FieldRow__api"},r.attributes.api_key,".",e.attributes.api_key),l.a.createElement("span",{className:"FieldRow__item-type"},n))))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.plugin,a=t.fieldsWithPlugin,r=this.state.datoPlugin;if(!n)return null;var o=Object(wt.a)(n.attributes.field_types.map((function(t){return e.t("fieldType.".concat(t))})),", "," and ").join(""),c=Object(wt.a)(n.attributes.field_types.map((function(t){return e.t("fieldType.".concat(t))})),", "," or ").join(""),s=r&&n.attributes.package_version!==r.version&&r.pluginType.code===n.attributes.plugin_type&&Jl()(r.fieldTypes.map((function(e){return e.code})),n.attributes.field_types)&&Jl()(r.parameters,n.attributes.parameter_definitions),u=!n.attributes.package_name||n.attributes.parameter_definitions.global.length>0;return l.a.createElement("div",{className:"Page"},l.a.createElement("div",{className:"Page__inner"},l.a.createElement("div",{className:"Page__header"},l.a.createElement("div",{className:"Page__title"},n.attributes.name),n.attributes.package_version&&l.a.createElement("div",{className:"Page__code"},"v",n.attributes.package_version),l.a.createElement("div",{className:"Page__space"}),l.a.createElement("a",{href:"#",onClick:this.handleDestroy.bind(this),className:"Page__action--delete"},l.a.createElement(qo.a,null),l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"form.editPlugin.uninstall"})))),s&&l.a.createElement("div",{className:"PluginForm__update"},l.a.createElement("div",{className:"PluginForm__update__body"},l.a.createElement(i.FormattedHTMLMessage,{id:"form.editPlugin.newVersion",values:{pluginName:r.title}})," "),l.a.createElement("button",{type:"button",onClick:this.handleUpdate.bind(this),className:"button button--white button--small"},l.a.createElement(i.FormattedMessage,{id:"form.editPlugin.update",values:{version:r.version}}))),l.a.createElement("div",{className:"beta space--bottom-2"},l.a.createElement(i.FormattedMessage,{id:"form.editPlugin.info"})),l.a.createElement("div",{className:"PluginForm__info"},l.a.createElement("div",{className:"PluginForm__info__right"},n.attributes.description&&l.a.createElement("div",{className:"PluginForm__info__description"},n.attributes.description),l.a.createElement("div",{className:"PluginForm__info__plugin-type"},l.a.createElement("strong",null,l.a.createElement(i.FormattedMessage,{id:"form.editPlugin.pluginType"}))," ",l.a.createElement(i.FormattedMessage,{id:"pluginType.".concat(n.attributes.plugin_type)})," ",l.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.datocms.com/docs/guides/building-plugins#types-of-plugins"},l.a.createElement("i",{className:"icon--question"}))),l.a.createElement("div",{className:"PluginForm__info__field-types"},l.a.createElement(i.FormattedHTMLMessage,{id:"form.editPlugin.installableOn",values:{fieldTypes:o}})," ",l.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.datocms.com/docs/guides/building-plugins/install#assigning-a-plugin-to-a-field"},l.a.createElement("i",{className:"icon--question"}))),r&&r.homepage&&l.a.createElement("div",{className:"PluginForm__info__homepage"},l.a.createElement("a",{href:r.homepage,rel:"noopener noreferrer",target:"_blank"},l.a.createElement(i.FormattedMessage,{id:"form.editPlugin.visit"})))),r&&r.previewImage&&l.a.createElement("div",{className:"PluginForm__info__left"},l.a.createElement("div",{className:"PluginForm__info__preview"},l.a.createElement("img",{src:r.previewImage.url,alt:"Preview"})))),l.a.createElement("div",{className:"beta space--bottom-2"},l.a.createElement(i.FormattedMessage,{id:"form.editPlugin.fieldsUsing"})),l.a.createElement("div",{className:"PluginForm__fields"},0===a.length?l.a.createElement("div",{className:"PluginForm__install"},l.a.createElement("div",{className:"PluginForm__fields__empty"},l.a.createElement(i.FormattedMessage,{id:"form.editPlugin.noFieldsUsing"})),l.a.createElement(i.FormattedHTMLMessage,{id:"instructions.pluginTypes.".concat(n.attributes.plugin_type),values:{fieldTypes:o,orFieldTypes:c}})):a.map(this.renderField.bind(this))),u&&l.a.createElement("div",null,l.a.createElement("div",{className:"beta space--bottom-2"},l.a.createElement(i.FormattedMessage,{id:"form.editPlugin.settings"})),l.a.createElement("div",{className:"Page__content"},l.a.createElement(Ju,{plugin:n,onSubmit:this.handleSubmit.bind(this)})))))}}])&&$u(n.prototype,a),r&&$u(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Hu,"propTypes",{dispatch:r.a.func.isRequired,plugin:r.a.object,match:r.a.object.isRequired,fieldsWithPlugin:r.a.array,itemTypes:r.a.object.isRequired,history:r.a.object.isRequired}),Uu=Vu))||Uu,nm=n(301),am=n.n(nm),rm=n(793),im=n(792);function om(e){return(om="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lm(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function cm(e,t){return!t||"object"!==om(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sm(e){return(sm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function um(e,t){return(um=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mm,pm,dm,fm=Object(p.connect)((function(e){return{plugins:Object.values(e.plugins)}}))((em=Zu=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=cm(this,sm(t).call(this,e))).state={status:"loading",term:"",page:0,total:0,plugins:[],currentInstallation:!1},n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&um(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){this.search()}},{key:"handleTermChange",value:function(e){this.setState({term:e.target.value})}},{key:"search",value:function(){var e,t,n,a;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=this.state,t=e.term,n=e.page,this.setState({status:"loading"}),r.next=4,regeneratorRuntime.awrap(ku("\n    query fetchPlugins($query: String!, $offset: IntType!, $limit: IntType!) {\n      plugins: allPlugins(\n        first: $limit,\n        skip: $offset,\n        orderBy: [installs_DESC],\n        filter: { OR: [\n          {title: {matches: {pattern: $query}}},\n          {description: {matches: {pattern: $query}}},\n          {packageName: {matches: {pattern: $query}}},\n          {readme: {matches: {pattern: $query}}},\n          {tagsCsv: {matches: {pattern: $query}}}\n        ]}\n      ) {\n        title\n        description\n        packageName\n        pluginType { code }\n        fieldTypes { code }\n        entryPoint\n        parameters\n        coverImage {\n          url\n        }\n        tags {\n          tag\n        }\n        author {\n          email\n          name\n        }\n        version\n        homepage\n      }\n      meta: _allPluginsMeta(\n        filter: { OR: [\n          {title: {matches: {pattern: $query}}},\n          {description: {matches: {pattern: $query}}},\n          {packageName: {matches: {pattern: $query}}},\n          {readme: {matches: {pattern: $query}}},\n          {tagsCsv: {matches: {pattern: $query}}}\n        ]}\n      ) {\n        count\n      }\n    }\n    ",{query:t,limit:6,offset:6*n}));case 4:a=r.sent,this.setState({status:"ready",plugins:a.data.plugins,total:a.data.meta.count});case 6:case"end":return r.stop()}}),null,this)}},{key:"handleSearch",value:function(e){var t=this;e.preventDefault(),this.setState({total:0},(function(){return t.search()}))}},{key:"handlePageChange",value:function(e){var t=this;this.setState({page:e},(function(){return t.search()}))}},{key:"handleAddKeyword",value:function(e){var t=this;this.setState({term:e},(function(){return t.search()}))}},{key:"handleInstall",value:function(e,t){var n,a;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=this.props.onSubmit,t.preventDefault(),a={type:"plugin",attributes:{package_name:e.packageName}},this.setState({currentInstallation:e.packageName}),r.prev=4,r.next=7,regeneratorRuntime.awrap(n(a));case 7:r.next=12;break;case 9:r.prev=9,r.t0=r.catch(4),this.setState({currentInstallation:!1});case 12:case"end":return r.stop()}}),null,this,[[4,9]])}},{key:"renderPlugin",value:function(e){var t=this,n=this.state.currentInstallation,a=e.homepage||"https://www.npmjs.com/package/".concat(e.packageName),r=this.props.plugins,o=n===e.packageName;return l.a.createElement("div",{key:e.packageName,className:"PluginLibrary__plugin"},l.a.createElement("div",{className:"PluginLibrary__plugin__info"},l.a.createElement("div",{className:"PluginLibrary__plugin__title"},l.a.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer"},e.title)," "),l.a.createElement("div",{className:"PluginLibrary__plugin__description"},am()(e.description,100)),l.a.createElement("div",{className:"PluginLibrary__plugin__tags"},e.tags.map((function(e){return l.a.createElement("button",{type:"button",key:e.tag,onClick:t.handleAddKeyword.bind(t,e.tag)},"#",e.tag)}))),l.a.createElement("div",{className:"PluginLibrary__plugin__bottom"},l.a.createElement("span",{className:"PluginLibrary__plugin__publisher"},l.a.createElement("img",{src:Object(im.a)(e.author.email,40,e.author.name),alt:e.author.name}),e.author.name),l.a.createElement("div",{className:"PluginLibrary__plugin__version"},"v",e.version),l.a.createElement("a",{className:"PluginLibrary__plugin__link",target:"_blank",rel:"noopener noreferrer",href:a},l.a.createElement(i.FormattedMessage,{id:"pluginLibrary.homepage"})))),l.a.createElement("div",{className:"PluginLibrary__plugin__install"},r.find((function(t){return t.attributes.package_name===e.packageName}))?l.a.createElement("span",{className:"button is-disabled"},l.a.createElement(i.FormattedMessage,{id:"pluginLibrary.installed"})):l.a.createElement("button",{type:"button",className:"button button--primary",disabled:!!n,onClick:this.handleInstall.bind(this,e)},o?l.a.createElement(i.FormattedMessage,{id:"pluginLibrary.installing"}):l.a.createElement(i.FormattedMessage,{id:"pluginLibrary.install"}))))}},{key:"render",value:function(){var e=this.state,t=e.status,n=e.term,a=e.total,r=e.plugins,o=e.page,c=a?this.t("pluginLibrary.search.multiple.placeholder",{total:a}):this.t("pluginLibrary.search.single.placeholder");return l.a.createElement("div",{className:"PluginLibrary"},l.a.createElement("form",{className:"PluginLibrary__search",onSubmit:this.handleSearch.bind(this)},l.a.createElement("div",{className:"PluginLibrary__search__input"},l.a.createElement("input",{type:"text",value:n,onChange:this.handleTermChange.bind(this),placeholder:c})),l.a.createElement("button",{type:"submit",className:"button"},l.a.createElement(i.FormattedMessage,{id:"pluginLibrary.search"}))),l.a.createElement("div",{className:"PluginLibrary__results"},0===r.length&&"loading"!==t?l.a.createElement("div",{className:"PluginLibrary__no-results"},"No results, bummer"):r.map(this.renderPlugin.bind(this)),"loading"===t&&l.a.createElement(Be.a,{size:50})),l.a.createElement("div",{className:"PluginLibrary__footer"},l.a.createElement("div",{className:"PluginLibrary__footer__left"},a>0&&l.a.createElement(rm.a,{totalEntries:a,perPage:6,currentPage:o,onChange:this.handlePageChange.bind(this)})),l.a.createElement("div",{className:"PluginLibrary__footer__right"},l.a.createElement(i.FormattedHTMLMessage,{id:"pluginLibrary.createMore"})," ",l.a.createElement(s.a,{to:"/admin/plugins/new-private"},l.a.createElement(i.FormattedMessage,{id:"pluginLibrary.createPrivate"})))))}}])&&lm(n.prototype,a),r&&lm(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Zu,"propTypes",{onSubmit:r.a.func.isRequired,plugins:r.a.array.isRequired}),Yu=em))||Yu;function bm(e){return(bm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ym(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function hm(e,t){return!t||"object"!==bm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _m(e){return(_m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vm(e,t){return(vm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var gm=Object(p.connect)((function(e){return{plugins:Object.values(e.plugins).sort((function(e,t){return e.attributes.name.localeCompare(t.attributes.name)}))}}))((dm=pm=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),hm(this,_m(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vm(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(Object(Ta.fetchAll)())}},{key:"handleSubmit",value:function(e){var t,n,a,r,i;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=this.props,n=t.dispatch,a=t.history,o.prev=1,o.next=4,regeneratorRuntime.awrap(n(Object(Ta.create)({data:e})));case 4:r=o.sent,i=r.data,n(Object(G.notice)("admin.plugin.create.success")),a.push("/admin/plugins/".concat(i.id,"/edit")),o.next=14;break;case 10:throw o.prev=10,o.t0=o.catch(1),o.t0&&o.t0.data&&"PLAN_UPGRADE_REQUIRED"===o.t0.data[0].attributes.code?n(Object(G.alert)("planUpgradeRequired.plugins.description")):n(Object(G.alert)("admin.plugin.create.failure")),Object(we.a)(o.t0);case 14:case"end":return o.stop()}}),null,this,[[1,10]])}},{key:"renderBlankSlate",value:function(){return l.a.createElement("div",{className:"Items__blank-slate"},l.a.createElement("div",{className:"Items__blank-slate__inner"},l.a.createElement("div",{className:"Items__blank-slate__title"},l.a.createElement(i.FormattedMessage,{id:"plugins.noPlugins.title"})),l.a.createElement("div",{className:"Items__blank-slate__description"},l.a.createElement(i.FormattedMessage,{id:"plugins.noPlugins.description"}))),l.a.createElement("div",{className:"Items__blank-slate__arrow"}))}},{key:"renderPlugin",value:function(e){return l.a.createElement(s.a,{className:"ItemRow",activeClassName:"ItemRow--active",to:"/admin/plugins/".concat(e.id,"/edit"),key:e.id},l.a.createElement("div",{className:"ItemRow__item ItemRow__item--more-space"},l.a.createElement("div",{className:"ItemRow__item__inner"},l.a.createElement("div",{className:"ItemRow__item__content"},l.a.createElement("div",{className:"ItemRow__item__title ItemRow__item__title--bigger"},e.attributes.name," ",l.a.createElement("span",{className:"ItemRow__item__title__tag"},e.attributes.package_version?"v".concat(e.attributes.package_version):"Private plugin")),l.a.createElement("div",{className:"ItemRow__item__details"},l.a.createElement("p",null,am()(e.attributes.description,100)))))))}},{key:"renderPlugins",value:function(){var e=this,t=this.props,n=t.plugins,a=t.match.url,r=t.history;return l.a.createElement("div",{className:"Items"},n.length>0?l.a.createElement("div",{className:"Items__items"},n.map(this.renderPlugin.bind(this))):this.renderBlankSlate(),l.a.createElement(s.a,{to:"/admin/plugins/new",className:"Items__button"},l.a.createElement(mn.a,null)),l.a.createElement(f.e,null,l.a.createElement(f.c,{path:"".concat(a,"/new-private"),render:function(){return l.a.createElement(Ye.default,{localeKey:"plugin.createPrivate",wide:!0,noCloseListeners:!0,onClose:function(){return r.push(a)}},l.a.createElement("div",{className:"grid grid--wide"},l.a.createElement("div",{className:"grid__item desk-4-12 NewPlugin__instructions"},l.a.createElement(i.FormattedHTMLMessage,{id:"instructions.plugins"})),l.a.createElement("div",{className:"grid__item desk-8-12"},l.a.createElement(Ju,{newRecord:!0,plugin:Object(Xe.i)(),onSubmit:e.handleSubmit.bind(e)}))))}}),l.a.createElement(f.c,{path:"".concat(a,"/new"),render:function(){return l.a.createElement(Ye.default,{localeKey:"pluginLibrary.title",wider:!0,onClose:function(){return r.push(a)}},l.a.createElement(fm,{onSubmit:e.handleSubmit.bind(e)}))}})))}},{key:"render",value:function(){var e=this.props,t=e.plugins,n=e.match.url;return l.a.createElement(u.a,{minSize:300,defaultSize:400,split:"vertical"},l.a.createElement("div",null,t?this.renderPlugins():l.a.createElement(Be.a,{size:100})),l.a.createElement("div",null,l.a.createElement(f.e,null,l.a.createElement(f.c,{path:"".concat(n,"/install/:packageName"),component:Mu}),l.a.createElement(f.c,{path:"".concat(n,"/:pluginId/edit"),component:tm}))))}}])&&ym(n.prototype,a),r&&ym(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(pm,"propTypes",{dispatch:r.a.func.isRequired,plugins:r.a.array,history:r.a.object.isRequired,match:r.a.object.isRequired}),mm=dm))||mm,Em=n(352),Om=n(45),wm=n.n(Om),jm=n(705),km=n.n(jm);function Pm(e){return(Pm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sm(){return(Sm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Nm(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Tm(e,t){return!t||"object"!==Pm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xm(e){return(xm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rm(e,t){return(Rm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Cm=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Tm(this,xm(t).call(this,e))).state={copied:!1},n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rm(e,t)}(t,e),n=t,(a=[{key:"handleCopy",value:function(e){var t=this,n=this.props.value;e.preventDefault(),this.handleFocus(),km()(n),this.setState({copied:!0}),setTimeout((function(){return t.setState({copied:!1})}),2e3)}},{key:"handleFocus",value:function(){var e=wm.a.findDOMNode(this.input);e.focus(),e.setSelectionRange(0,e.value.length)}},{key:"renderMultiline",value:function(){var e=this,t=this.state.copied,n=this.props.rows;return l.a.createElement("div",{className:"copy-to-clipboard"},l.a.createElement("textarea",Sm({rows:n},dt()(this.props,["multiline"]),{ref:function(t){e.input=t},readOnly:!0,onFocus:this.handleFocus.bind(this)})),l.a.createElement("a",{href:"#",className:"copy-to-clipboard__button",onClick:this.handleCopy.bind(this)},t?this.t("clipboard.copied"):this.t("clipboard.copy")))}},{key:"renderSingleLine",value:function(){var e=this,t=this.state.copied,n=this.props,a=n.value,r=n.url;return l.a.createElement("div",{className:"input-group"},l.a.createElement("input",Sm({},dt()(this.props,["url","multiline","rows"]),{ref:function(t){e.input=t},readOnly:!0,type:"text",onFocus:this.handleFocus.bind(this)})),l.a.createElement("a",{href:"#",className:"input-group__addon input-group__addon--button",onClick:this.handleCopy.bind(this)},l.a.createElement("span",null,t?this.t("clipboard.copied"):this.t("clipboard.copy"))),r&&l.a.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"input-group__addon input-group__addon--button"},l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"imageMetadata.open"}))))}},{key:"render",value:function(){return this.props.multiline?this.renderMultiline():this.renderSingleLine()}}])&&Nm(n.prototype,a),r&&Nm(n,r),t}(c.a);Fm(Cm,"propTypes",{value:r.a.string,multiline:r.a.bool,url:r.a.bool,rows:r.a.number}),Fm(Cm,"defaultProps",{multiline:!1});var qm=Cm;function Mm(e){return(Mm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Im(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Lm(e,t){return!t||"object"!==Mm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Am(e){return(Am=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dm(e,t){return(Dm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var zm=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Lm(this,Am(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dm(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props.webhookUrl;return l.a.createElement(X.default,null,l.a.createElement("div",{className:"deployment-config"},l.a.createElement("div",{className:"deployment-config__step"},l.a.createElement("div",{className:"deployment-config__step__image"},l.a.createElement("img",{src:"/assets/images/gitlab/trigger.gif",alt:"Trigger tutorial",className:"framed-image"})),l.a.createElement("div",{className:"deployment-config__step__content"},l.a.createElement("h3",null,l.a.createElement(i.FormattedMessage,{id:"gitlab.trigger"})),l.a.createElement(ee.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"token",intlLabel:"gitlab.triggerDescription1",intlPlaceholder:"gitlab.trigger.placeholder",type:"text",className:"form__input--code"}),l.a.createElement(ee.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"trigger_url",intlLabel:"gitlab.triggerDescription3",intlPlaceholder:"gitlab.trigger.placeholder3",type:"text",className:"form__input--code"}),l.a.createElement(ee.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"branch",intlLabel:"gitlab.branch",intlPlaceholder:"gitlab.branch.placeholder",type:"text",className:"form__input--code"}),l.a.createElement("div",{className:"form__field--less-margin form__field--black-label"},l.a.createElement("div",{className:"form__label"},this.t("gitlab.buildParameters")),l.a.createElement(J.FieldArray,{name:"build_parameters",component:gc.a,intlPrefix:"environmentVariablesInput"})))),l.a.createElement("div",{className:"deployment-config__step"},l.a.createElement("div",{className:"deployment-config__step__image"},l.a.createElement("img",{src:"/assets/images/gitlab/webhook.gif",alt:"Webhook tutorial",className:"framed-image"})),l.a.createElement("div",{className:"deployment-config__step__content"},l.a.createElement("h3",null,l.a.createElement(i.FormattedMessage,{id:"gitlab.webhook"})),l.a.createElement("p",null,l.a.createElement(i.FormattedMessage,{id:"gitlab.webhookDescription"})),l.a.createElement("div",{className:"space--bottom-1"},l.a.createElement(qm,{value:e,className:"form__input--code"}))))),l.a.createElement(Z.a,{forceDirty:!0,intlLabel:"gitlab.button"}))}}])&&Im(n.prototype,a),r&&Im(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(zm,"propTypes",{webhookUrl:r.a.string});var Bm,Um,Hm,Vm=Object(p.connect)((function(e,t){var n=t.settings||{};return{initialValues:{trigger_url:n.trigger_url,token:n.token,branch:n.ref,build_parameters:Object(gc.b)(n.build_parameters)},validate:oe()({trigger_url:[re.a.required(),re.a.url()],token:[re.a.required()],branch:[re.a.required()],build_parameters:gc.d}),onSubmit:function(e){var n=e.trigger_url,a=e.token,r=e.branch,i=e.build_parameters;return t.onSubmit({trigger_url:n,token:a,ref:r,build_parameters:Object(gc.c)(i)})}}}))(Object(J.withForm)({form:"GitlabSettings"})(zm)),Gm=n(2277);function Jm(e){return(Jm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wm(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function $m(e,t){return!t||"object"!==Jm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Km(e){return(Km=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qm(e,t){return(Qm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xm=Object(p.connect)((function(e,t){return{initialValues:{branch:(t.settings||{}).branch}}}))(Bm=Object(J.withForm)()((Hm=Um=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),$m(this,Km(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qm(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.linkedSite,n=e.onReset;return l.a.createElement("div",{className:"NetlifySettings__linkedStep"},t?l.a.createElement("div",{className:"NetlifySettings__linkedStep__inner"},l.a.createElement("p",null,l.a.createElement(i.FormattedMessage,{id:"netlifySettings.noLink"})),l.a.createElement("a",{className:"NetlifySettings__selectSite__site",href:t.admin_url,target:"_blank",rel:"noopener noreferrer"},l.a.createElement("span",{className:"NetlifySettings__selectSite__site__name"},t.name),l.a.createElement("span",{className:"NetlifySettings__selectSite__site__url"},t.url)),l.a.createElement(X.default,null,l.a.createElement(ee.default,{name:"branch",intlLabel:"netlify.branch",intlHint:"netlify.branch.hint",intlPlaceholder:"netlify.branch.placeholder",type:"text",className:"form__input form__input--code"}),l.a.createElement(Z.a,{forceDirty:!0,intlLabel:"netlify.button"})),l.a.createElement("a",{href:"#",onClick:n.bind(this),className:"NetlifySettings__linkedStep__reset"},l.a.createElement(i.FormattedMessage,{id:"netlifySettings.changeLink"}))):l.a.createElement("div",{className:"NetlifySettings__linkedStep__loading"},l.a.createElement(Be.a,{size:80})))}}])&&Wm(n.prototype,a),r&&Wm(n,r),t}(o.Component),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Um,"propTypes",{onReset:r.a.func.isRequired,linkedSite:r.a.object}),Bm=Hm))||Bm)||Bm,Ym=function(e){var t=e.onSubmit;return l.a.createElement("div",{className:"NetlifySettings__signIn"},l.a.createElement("div",{className:"NetlifySettings__signIn__inner"},l.a.createElement("a",{href:"#",onClick:t.bind(void 0)},l.a.createElement("img",{src:"/assets/images/netlify/signin.svg",alt:"Deploy with Netlify"})),l.a.createElement("p",null,l.a.createElement(i.FormattedMessage,{id:"netlifySettings.integrationStart"}))))};Ym.propTypes={onSubmit:r.a.func.isRequired};var Zm=Ym,ep=function(){return l.a.createElement("div",{className:"NetlifySettings__loadingSites"},l.a.createElement("div",{className:"NetlifySettings__loadingSites__inner"},l.a.createElement(Be.a,{inline:!0,size:70}),l.a.createElement("p",null,l.a.createElement(i.FormattedMessage,{id:"netlifySettings.loadingProjects"}))))},tp=function(e){var t=e.onReset,n=e.onSubmit,a=e.sites;return 0===a.length?l.a.createElement("div",{className:"NetlifySettings__noSites"},l.a.createElement("p",null,l.a.createElement(i.FormattedMessage,{id:"netlifySettings.noProjects"})),l.a.createElement("a",{href:"https://app.netlify.com/start",target:"_blank",rel:"noopener noreferrer",className:"button button--primary button--large"},l.a.createElement(i.FormattedMessage,{id:"netlifySettings.createProject"})),l.a.createElement("a",{className:"NetlifySettings__noSites__refresh",href:"#",onClick:t.bind(void 0)},l.a.createElement(i.FormattedMessage,{id:"netlifySettings.projectCreated"}))):l.a.createElement("div",{className:"NetlifySettings__selectSite"},l.a.createElement("p",null,l.a.createElement(i.FormattedMessage,{id:"netlifySettings.projectSelect"})),a.map((function(e){return function(e){return l.a.createElement("a",{key:e.id,className:"NetlifySettings__selectSite__site",href:"#",onClick:n.bind(void 0,e)},l.a.createElement("span",{className:"NetlifySettings__selectSite__site__name"},e.name),l.a.createElement("span",{className:"NetlifySettings__selectSite__site__url"},e.url))}(e)})))};tp.propTypes={onSubmit:r.a.func.isRequired,onReset:r.a.func.isRequired,sites:r.a.array.isRequired};var np,ap,rp,ip=tp,op=function(e){var t=e.state,n=function(e,n){return l.a.createElement("div",{className:"NetlifySettings__creatingHooks__hook"},t[e]?l.a.createElement("div",null,l.a.createElement("i",{className:"icon--check-circle"}),l.a.createElement(i.FormattedMessage,{id:"netlifySettings.hooks.".concat(n)})," ",l.a.createElement("strong",null,l.a.createElement(i.FormattedMessage,{id:"netlifySettings.hooks.done"}))):l.a.createElement("div",null,l.a.createElement(Be.a,{size:20}),l.a.createElement(i.FormattedMessage,{id:"netlifySettings.hooks.".concat(n)})))};return l.a.createElement("div",{className:"NetlifySettings__creatingHooks"},l.a.createElement("div",{className:"NetlifySettings__creatingHooks__inner"},l.a.createElement("p",null,l.a.createElement(i.FormattedMessage,{id:"netlifySettings.hooks.creation"})),n("successHookCreated","success"),n("failureHookCreated","failure"),n("buildHookUrl","build")))},lp=op;function cp(e){return(cp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sp(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function up(e,t){return!t||"object"!==cp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mp(e){return(mp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pp(e,t){return(pp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}op.propTypes={state:r.a.object.isRequired};var dp=Object(p.connect)()((rp=ap=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=up(this,mp(t).call(this,e))).state={accessToken:null,linkedSite:null,sites:null,sitesLoaded:!1,selectedSite:null,successHookCreated:!1,failureHookCreated:!1,buildHookUrl:!1,ignoreSavedSettings:!1},n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pp(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){var e=this,t=this.props.settings;t&&t.access_token&&Object(Gm.d)(t.access_token,t.site_id).then((function(t){return e.setState({linkedSite:t})})).catch((function(){return e.setState({ignoreSavedSettings:!0})})),t&&t.access_token||this.handleOpenAuthPopup()}},{key:"handleSiteSelect",value:function(e,t){var n,a,r,i=this;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return n=this.props.webhookUrl,t.preventDefault(),a=this.state.accessToken,this.setState({selectedSite:e}),o.prev=4,o.next=7,regeneratorRuntime.awrap(Promise.all([Object(Gm.b)(a,{type:"url",site_id:e.id,event:"deploy_created",data:{url:n}}).then((function(){return i.setState({successHookCreated:!0})})),Object(Gm.b)(a,{type:"url",site_id:e.id,event:"deploy_failed",data:{url:n}}).then((function(){return i.setState({failureHookCreated:!0})})),Object(Gm.a)(a,e.id,{title:"DatoCMS Build Hook"}).then((function(e){var t=e.url;return i.setState({buildHookUrl:t})}))]));case 7:r=this.state.selectedSite,setTimeout((function(){i.setState({linkedSite:r,selectedSite:null,sitesLoaded:!1,ignoreSavedSettings:!1})}),2e3),o.next=14;break;case 11:o.prev=11,o.t0=o.catch(4),alert("Error creating hooks: ".concat(o.t0));case 14:case"end":return o.stop()}}),null,this,[[4,11]])}},{key:"handleSubmit",value:function(e){var t,n,a,r,i,o,l,c;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=this.props,n=t.settings,a=t.dispatch,r=t.onSubmit,i=this.state,o=i.buildHookUrl,l=i.linkedSite,c=i.accessToken,r({trigger_url:o||n&&n.trigger_url,site_id:l.id,access_token:c||n&&n.access_token,branch:e.branch}),s.next=5,regeneratorRuntime.awrap(a(Object(G.notice)(this.t("netlify.success",{name:l.name}),{sticky:!0})));case 5:return s.abrupt("return",this.setState({accessToken:null}));case 6:case"end":return s.stop()}}),null,this)}},{key:"handleOpenAuthPopup",value:function(e){var t,n;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e&&e.preventDefault(),a.prev=1,a.next=4,regeneratorRuntime.awrap(Object(Gm.f)());case 4:return t=a.sent,this.setState({accessToken:t}),a.next=8,regeneratorRuntime.awrap(Object(Gm.e)(t));case 8:n=a.sent,this.setState({sites:n,sitesLoaded:!0}),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(1),alert("Error fetching sites: ".concat(a.t0));case 15:case"end":return a.stop()}}),null,this,[[1,12]])}},{key:"handleRefreshSites",value:function(e){var t,n;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=this.state.accessToken,e.preventDefault(),this.setState({sitesLoaded:!1}),a.prev=3,a.next=6,regeneratorRuntime.awrap(Object(Gm.e)(t));case 6:n=a.sent,this.setState({sites:n,sitesLoaded:!0}),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(3),alert("Error fetching sites: ".concat(a.t0));case 13:case"end":return a.stop()}}),null,this,[[3,10]])}},{key:"handleReset",value:function(e){e.preventDefault(),this.setState({ignoreSavedSettings:!0})}},{key:"currentStep",value:function(){var e=this.props.settings,t=this.state,n=t.accessToken,a=t.sitesLoaded,r=t.selectedSite,i=t.ignoreSavedSettings,o=t.linkedSite,c=t.successHookCreated,s=t.failureHookCreated,u=t.buildHookUrl,m=t.sites;return!i&&o?l.a.createElement(Xm,{linkedSite:o,settings:e,onReset:this.handleReset.bind(this),onSubmit:this.handleSubmit.bind(this)}):r?l.a.createElement(lp,{state:{failureHookCreated:s,successHookCreated:c,buildHookUrl:u}}):a?l.a.createElement(ip,{onReset:this.handleRefreshSites.bind(this),onSubmit:this.handleSiteSelect.bind(this),sites:m}):n?l.a.createElement(ep,null):l.a.createElement(Zm,{onSubmit:this.handleOpenAuthPopup.bind(this)})}},{key:"render",value:function(){var e=this.currentStep();return l.a.createElement("div",{className:"NetlifySettings"},e)}}])&&sp(n.prototype,a),r&&sp(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(ap,"propTypes",{settings:r.a.object,onSubmit:r.a.func.isRequired,webhookUrl:r.a.string.isRequired,dispatch:r.a.func.isRequired}),np=rp))||np;function fp(e){return(fp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bp(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function yp(e,t){return!t||"object"!==fp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hp(e){return(hp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _p(e,t){return(_p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}dp.smallModal=!0;var vp=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),yp(this,hp(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_p(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props.webhookUrl,t='- run:\n  name: Notify DatoCMS about the status of the job\n  command: \'curl -X POST --data-binary "{\\"payload\\": { \\"branch\\": \\"$CIRCLE_BRANCH\\", \\"status\\": \\"failed\\" } }" '.concat(e,'\n  when: on_fail\n\n- run:\n  name: Notify DatoCMS about the status of the job\n  command: \'curl -X POST --data-binary "{\\"payload\\": { \\"branch\\": \\"$CIRCLE_BRANCH\\", \\"status\\": \\"success\\" } }" ').concat(e,"\n  when: on_success");return l.a.createElement(X.default,null,l.a.createElement("div",{className:"deployment-config"},l.a.createElement("div",{className:"deployment-config__step"},l.a.createElement("div",{className:"deployment-config__step__image"},l.a.createElement("img",{src:"/assets/images/circle_ci/api_token.gif",alt:"API token tutorial",className:"framed-image"})),l.a.createElement("div",{className:"deployment-config__step__content"},l.a.createElement("h3",null,l.a.createElement(i.FormattedMessage,{id:"circle_ci.apiToken"})),l.a.createElement(ee.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"token",intlLabel:"circle_ci.apiTokenDescription",intlPlaceholder:"circle_ci.token",type:"text",className:"form__input--code"}))),l.a.createElement("div",{className:"deployment-config__step"},l.a.createElement("div",{className:"deployment-config__step__image"},l.a.createElement("img",{src:"/assets/images/circle_ci/project_name.png",alt:"API token tutorial",className:"framed-image"})),l.a.createElement("div",{className:"deployment-config__step__content"},l.a.createElement("h3",null,l.a.createElement(i.FormattedMessage,{id:"circle_ci.project"})),l.a.createElement(ee.default,{className:"form__field--less-margin form__field--black-label",name:"vcs",intlLabel:"circle_ci.vcs",intlPlaceholder:"",options:[{label:"GitHub",value:"github"},{label:"Bitbucket",value:"bitbucket"}],component:Q.default}),l.a.createElement(ee.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"project",intlLabel:"circle_ci.projectDescription",intlPlaceholder:"circle_ci.project.placeholder",type:"text",className:"form__input--code"}),l.a.createElement(ee.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"revision",intlLabel:"circle_ci.projectDescription3",intlPlaceholder:"circle_ci.branch.placeholder",type:"text",className:"form__input--code"}),l.a.createElement("div",{className:"form__field--less-margin form__field--black-label"},l.a.createElement("div",{className:"form__label"},l.a.createElement(i.FormattedMessage,{id:"circle_ci.buildParameters"})),l.a.createElement(J.FieldArray,{name:"build_parameters",component:gc.a,intlPrefix:"environmentVariablesInput"})))),l.a.createElement("div",{className:"deployment-config__step"},l.a.createElement("div",{className:"deployment-config__step__image"}),l.a.createElement("div",{className:"deployment-config__step__content"},l.a.createElement("h3",null,l.a.createElement(i.FormattedMessage,{id:"circle_ci.config"})),l.a.createElement("p",null,l.a.createElement(i.FormattedMessage,{id:"circle_ci.configDescription1"})),l.a.createElement("div",{className:"space--bottom-1"},l.a.createElement(qm,{value:t,multiline:!0,rows:3,className:"form__input--code"}))))),l.a.createElement(Z.a,{forceDirty:!0,intlLabel:"circle_ci.button"}))}}])&&bp(n.prototype,a),r&&bp(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(vp,"propTypes",{webhookUrl:r.a.string});var gp=Object(p.connect)((function(e,t){var n=t.settings||{};return{initialValues:{revision:n.revision,token:n.token,project:n.project,vcs:n.vcs,build_parameters:Object(gc.b)(n.build_parameters)},validate:oe()({revision:[re.a.required()],token:[re.a.required()],project:[re.a.required()],vcs:[re.a.required()],build_parameters:gc.d}),onSubmit:function(e){var n=e.project,a=e.revision,r=e.token,i=e.vcs,o=e.build_parameters;return t.onSubmit({project:n,revision:a,token:r,vcs:i,build_parameters:Object(gc.c)(o)})}}}))(Object(J.withForm)({form:"CircleCiSettings"})(vp));function Ep(e){return(Ep="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Op(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function wp(e,t){return!t||"object"!==Ep(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jp(e){return(jp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kp(e,t){return(kp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Pp=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),wp(this,jp(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kp(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props.webhookUrl;return l.a.createElement(X.default,null,l.a.createElement("div",{className:"deployment-config"},l.a.createElement("div",{className:"deployment-config__step"},l.a.createElement("div",{className:"deployment-config__step__image"},l.a.createElement("img",{src:"/assets/images/semaphore/auth_token.gif",alt:"Authentication token",className:"framed-image"})),l.a.createElement("div",{className:"deployment-config__step__content"},l.a.createElement("h3",null,l.a.createElement(i.FormattedMessage,{id:"semaphore.authenticationToken"})),l.a.createElement(ee.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"auth_token",intlLabel:"semaphore.authenticationTokenDescription",intlPlaceholder:"semaphore.token.placeholder",type:"text",className:"form__input--code"}))),l.a.createElement("div",{className:"deployment-config__step"},l.a.createElement("div",{className:"deployment-config__step__image"},l.a.createElement("img",{src:"/assets/images/semaphore/project_hash_id.gif",alt:"Project hash_id",className:"framed-image"})),l.a.createElement("div",{className:"deployment-config__step__content"},l.a.createElement("h3",null,l.a.createElement(i.FormattedMessage,{id:"semaphore.projectHashId"})),l.a.createElement(ee.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"project_hash_id",intlLabel:"semaphore.projectHashIdDescription",intlPlaceholder:"semaphore.hash.placeholder",type:"text",className:"form__input--code"}),l.a.createElement(ee.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"branch",intlLabel:"semaphore.branch",intlPlaceholder:"semaphore.branch.placeholder",type:"text",className:"form__input--code"}))),l.a.createElement("div",{className:"deployment-config__step"},l.a.createElement("div",{className:"deployment-config__step__image"},l.a.createElement("img",{src:"/assets/images/semaphore/notifications.gif",alt:"Notifications tutorial",className:"framed-image"})),l.a.createElement("div",{className:"deployment-config__step__content"},l.a.createElement("h3",null,l.a.createElement(i.FormattedMessage,{id:"semaphore.notification"})),l.a.createElement("p",null,l.a.createElement(i.FormattedMessage,{id:"semaphore.notificationDescription"})),l.a.createElement("div",{className:"space--bottom-1"},l.a.createElement(qm,{value:e,className:"form__input--code"}))))),l.a.createElement(Z.a,{forceDirty:!0,intlLabel:"semaphore.button"}))}}])&&Op(n.prototype,a),r&&Op(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Pp,"propTypes",{webhookUrl:r.a.string});var Sp=Object(p.connect)((function(e,t){var n=t.settings||{};return{initialValues:{auth_token:n.auth_token,project_hash_id:n.project_hash_id,branch:n.branch},validate:oe()({auth_token:[re.a.required()],project_hash_id:[re.a.required()],branch:[re.a.required()]}),onSubmit:function(e){var n=e.auth_token,a=e.project_hash_id,r=e.branch;return t.onSubmit({auth_token:n,project_hash_id:a,branch:r})}}}))(Object(J.withForm)({form:"SemaphoreSettings"})(Pp));function Np(e){return(Np="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tp(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function xp(e,t){return!t||"object"!==Np(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rp(e){return(Rp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fp(e,t){return(Fp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Cp=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),xp(this,Rp(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fp(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props.webhookUrl,t="notifications:\n  webhooks:\n  - ".concat(e);return l.a.createElement(X.default,null,l.a.createElement("div",{className:"deployment-config"},l.a.createElement("div",{className:"deployment-config__step"},l.a.createElement("div",{className:"deployment-config__step__content"},l.a.createElement("h3",null,l.a.createElement(i.FormattedMessage,{id:"travis.selectRepo"})),l.a.createElement(ee.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"repo",intlLabel:"travis.repo",intlPlaceholder:"travis.repo.placeholder",type:"text",className:"form__input--code"}),l.a.createElement(ee.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"branch",intlLabel:"travis.branch",intlPlaceholder:"travis.branch.placeholder",type:"text",className:"form__input--code"}))),l.a.createElement("div",{className:"deployment-config__step"},l.a.createElement("div",{className:"deployment-config__step__content"},l.a.createElement("h3",null,l.a.createElement(i.FormattedMessage,{id:"travis.trigger"})),l.a.createElement(ee.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"api_token",intlLabel:"travis.triggerDescription1",intlPlaceholder:"travis.trigger.placeholder",type:"text",className:"form__input--code"}))),l.a.createElement("div",{className:"deployment-config__step"},l.a.createElement("div",{className:"deployment-config__step__content"},l.a.createElement("h3",null,l.a.createElement(i.FormattedMessage,{id:"travis.webhook"})),l.a.createElement("p",null,l.a.createElement(i.FormattedMessage,{id:"travis.webhookDescription"})),l.a.createElement("div",{className:"space--bottom-1"},l.a.createElement(qm,{value:t,multiline:!0,rows:3,className:"form__input--code"})),l.a.createElement(ee.default,{extraClassName:"form__field--less-margin form__field--black-label",name:"config",intlLabel:"travis.config",intlHint:"travis.configHint",intlPlaceholder:"travis.config.placeholder",className:"form__input--code",component:xa.a})))),l.a.createElement(Z.a,{forceDirty:!0,intlLabel:"travis.button"}))}}])&&Tp(n.prototype,a),r&&Tp(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Cp,"propTypes",{webhookUrl:r.a.string});var qp=Object(p.connect)((function(e,t){var n=t.settings||{};return{initialValues:{api_token:n.api_token,repo:n.repo,branch:n.branch,config:n.config||null},validate:oe()({api_token:[re.a.required()],repo:[re.a.required()],branch:[re.a.required()],config:[re.a.json()]}),onSubmit:function(e){var n=e.api_token,a=e.repo,r=e.branch,i=e.config;return t.onSubmit({api_token:n,repo:a,branch:r,config:i||null})}}}))(Object(J.withForm)({form:"TravisSettings"})(Cp));function Mp(e){return(Mp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ip(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Lp(e,t){return!t||"object"!==Mp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ap(e){return(Ap=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dp(e,t){return(Dp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var zp=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Lp(this,Ap(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dp(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props.webhookUrl,t=["# Successful build notification example","curl -n -X POST ".concat(e," \\"),"  -H 'Content-Type: application/json' \\",'  -d \'{ "status": "success" }\'',"","# Failed build notification example","curl -n -X POST ".concat(e," \\"),"  -H 'Content-Type: application/json' \\",'  -d \'{ "status": "error" }\''].join("\n");return l.a.createElement(X.default,null,l.a.createElement("div",{className:"deployment-config"},l.a.createElement("div",{className:"deployment-config__step"},l.a.createElement("div",{className:"deployment-config__step__content"},l.a.createElement("h3",null,l.a.createElement(i.FormattedMessage,{id:"custom.trigger"})),l.a.createElement("p",null,l.a.createElement(i.FormattedMessage,{id:"custom.triggerDescription"})),l.a.createElement(ee.default,{name:"trigger_url",intlLabel:"custom.triggerUrl",intlPlaceholder:"custom.triggerUrlPlaceholder",extraClassName:"form__field--less-margin form__field--black-label",type:"text",className:"form__input--code"}),l.a.createElement("div",{className:"form__field"},l.a.createElement("div",{className:"form__label"},l.a.createElement(i.FormattedMessage,{id:"custom.headers"})),l.a.createElement(J.FieldArray,{name:"headers",component:gc.a})),l.a.createElement(ee.default,{name:"payload",intlLabel:"custom.payload",className:"form__field--less-margin",component:vc.a}))),l.a.createElement("div",{className:"deployment-config__step"},l.a.createElement("div",{className:"deployment-config__step__content"},l.a.createElement("h3",null,l.a.createElement(i.FormattedMessage,{id:"custom.webhook"})),l.a.createElement("p",null,l.a.createElement(i.FormattedMessage,{id:"custom.webhookDescription"})),l.a.createElement("div",{className:"space--bottom-1"},l.a.createElement(qm,{multiline:!0,rows:9,value:t,className:"form__input--code"}))))),l.a.createElement(Z.a,{forceDirty:!0,intlLabel:"custom.button"}))}}])&&Ip(n.prototype,a),r&&Ip(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(zp,"propTypes",{webhookUrl:r.a.string});var Bp={form:"CustomSettings",enableReinitialize:!0,validate:oe()({trigger_url:[re.a.required(),re.a.url()],headers:{key:[re.a.required()],value:[re.a.required()]}})};var Up={gitlab:Vm,netlify:dp,circle_ci:gp,semaphore:Sp,travis:qp,custom:Object(p.connect)((function(e,t){return{enableReinitialize:!0,initialValues:t.settings?{trigger_url:t.settings.trigger_url,headers:Object(gc.b)(t.settings.headers),payload:JSON.stringify(t.settings.payload||{},null,2)}:{headers:[],payload:"{}"},validate:oe()({trigger_url:[re.a.required(),re.a.url()],headers:gc.d,payload:[re.a.required(),re.a.json()]}),onSubmit:function(e){var n=ne()(e);return n.headers=Object(gc.c)(n.headers),n.payload=JSON.parse(n.payload),t.onSubmit(n)}}}))(Object(J.withForm)(Bp)(zp))};function Hp(e){return(Hp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vp(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Gp(e,t){return!t||"object"!==Hp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jp(e){return(Jp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wp(e,t){return(Wp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Gp(this,Jp(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wp(e,t)}(t,e),n=t,(a=[{key:"handleChoiceClick",value:function(e,t){var n=this.props.onBlur;t.stopPropagation(),t.preventDefault(),n(e)}},{key:"renderChoice",value:function(e){var t=this.props,n=t.value,a=t.defaultValue,r="ChoicesInput__item";return(n||a||null)===e.value&&(r+=" ChoicesInput__item--active"),e.recommended&&(r+=" ChoicesInput__item--recommendend"),l.a.createElement("a",{href:"#",className:r,key:e.value,onClick:this.handleChoiceClick.bind(this,e.value)},l.a.createElement("div",{className:"ChoicesInput__item__inner"},e.iconUrl&&l.a.createElement("div",{className:"ChoicesInput__item__image"},l.a.createElement("img",{src:e.iconUrl,alt:e.label})),l.a.createElement("div",{className:"ChoicesInput__item__label"},e.label),e.sub&&l.a.createElement("div",{className:"ChoicesInput__item__sub"},e.sub)))}},{key:"render",value:function(){var e=this.props.choices;return l.a.createElement("div",{className:"ChoicesInput"},e.map(this.renderChoice.bind(this)))}}])&&Vp(n.prototype,a),r&&Vp(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}($p,"propTypes",{choices:r.a.array.isRequired,value:r.a.string,defaultValue:r.a.object,onBlur:r.a.func});var Kp=$p;function Qp(e){return(Qp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xp(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Yp(e,t){return!t||"object"!==Qp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zp(e){return(Zp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ed(e,t){return(ed=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var td=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Yp(this,Zp(t).call(this,e))).state={activeAdapter:null},n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ed(e,t)}(t,e),n=t,(a=[{key:"handleClose",value:function(){this.setState({activeAdapter:null})}},{key:"handleSubmit",value:function(e){var t=this.state.activeAdapter;(0,this.props.onBlur)({adapter:t,settings:e}),this.setState({activeAdapter:null})}},{key:"handleAdapterChange",value:function(e){var t=this.props.onBlur;e?this.setState({activeAdapter:e}):t({adapter:e,settings:null})}},{key:"render",value:function(){var e=this.state.activeAdapter,t=this.props,n=t.webhookUrl,a=t.defaultValue,r=t.value||a||{},i=[{label:this.t("site.deployAdapters.netlify"),sub:this.t("site.deployAdapters.netlifySub"),iconUrl:"/assets/images/netlify.png",value:"netlify",recommended:!0},{label:this.t("site.deployAdapters.travis"),iconUrl:"/assets/images/travis.png",value:"travis"},{label:this.t("site.deployAdapters.gitlab"),iconUrl:"/assets/images/gitlab.png",value:"gitlab"},{label:this.t("site.deployAdapters.circle_ci"),iconUrl:"/assets/images/circle_ci.png",value:"circle_ci"},{label:this.t("site.deployAdapters.custom"),iconUrl:"/assets/images/custom.png",value:"custom"}];"semaphore"===r.adapter&&i.push({label:this.t("site.deployAdapters.semaphore"),iconUrl:"/assets/images/semaphore.png",value:"semaphore"});var o=e?Up[e]:null;return l.a.createElement("div",null,l.a.createElement(Kp,{choices:i,value:r.adapter,onBlur:this.handleAdapterChange.bind(this)}),e&&l.a.createElement(Ye.default,{wide:!o.smallModal,title:this.t("deploySettingsInput.title",{activeAdapter:this.t("site.deployAdapters.".concat(e))}),key:e,onClose:this.handleClose.bind(this)},l.a.createElement(o,{settings:r.settings,webhookUrl:n,onSubmit:this.handleSubmit.bind(this)})))}}])&&Xp(n.prototype,a),r&&Xp(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(td,"propTypes",{value:r.a.object,defaultValue:r.a.object,onBlur:r.a.func,webhookUrl:r.a.string});var nd,ad,rd,id=td;function od(e){return(od="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ld(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function cd(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function sd(e,t){return!t||"object"!==od(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ud(e){return(ud=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function md(e,t){return(md=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dd,fd,bd,yd=Object(p.connect)((function(e,t){var n=e.site,a=e.subscriptionCompatibilities[n.relationships.usage.data.id],r=t.environment.attributes;return{initialValues:{name:r.name,frontend_url:r.frontend_url||null,spider_enabled:r.spider_enabled,build_on_scheduled_publications:r.build_on_scheduled_publications,deploy:r.deploy_adapter&&{adapter:r.deploy_adapter,settings:r.deploy_settings}},enableReinitialize:!0,usage:a,onSubmit:function(e){var n=ne()(t.environment);return n.attributes={name:e.name,spider_enabled:e.spider_enabled,frontend_url:e.frontend_url||null,build_on_scheduled_publications:e.build_on_scheduled_publications,deploy_adapter:e.deploy&&e.deploy.adapter,deploy_settings:e.deploy&&e.deploy.settings,webhook_token:t.environment.attributes.webhook_token},t.onSubmit(n)}}}))(nd=Object(J.withForm)({form:"deploymentEnvironment",validate:oe()({name:[re.a.required()],deploy:[re.a.required()],frontend_url:[re.a.url()]})})((rd=ad=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),sd(this,ud(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&md(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(Object(je.fetch)({force:!0,query:{include:"usage"}}))}},{key:"render",value:function(){var e=this.props,t=e.usage,n=e.environment,a=t&&t.attributes.indexable_pages_analysis.subscription_limit;return l.a.createElement("div",null,l.a.createElement(X.default,null,l.a.createElement(ee.default,{name:"name",intlLabel:"deploymentEnvironment.name.label",type:"text",className:"form__input form__input--large"}),l.a.createElement(ee.default,{name:"frontend_url",intlLabel:"deploymentEnvironment.frontendUrl.label",intlHint:"deploymentEnvironment.frontendUrl.hint",type:"text",className:"form__input"}),l.a.createElement("div",{className:"Page__content__section"},l.a.createElement("div",{className:"Page__content__section__title"},l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"deploymentEnvironment.options"}))),l.a.createElement(ee.default,{name:"build_on_scheduled_publications",intlLabel:"deploymentEnvironment.schedule.label",component:W.a}),l.a.createElement(ee.default,{name:"spider_enabled",intlLabel:"deploymentEnvironment.spidering.label",hint:a?this.t("deploymentEnvironment.spidering.hintWithLimit",{limit:a}):this.t("deploymentEnvironment.spidering.hint"),intlDocs:"deploymentEnvironment.spidering.guide",docsHref:"https://www.datocms.com/docs/guides/installing-site-search",component:W.a})),l.a.createElement("div",{className:"Page__content__section"},l.a.createElement("div",{className:"Page__content__section__title"},l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"deploymentEnvironment.buildMethod"}))),l.a.createElement(ee.default,{name:"deploy",intlLabel:"deploymentEnvironment.deployAdapter",webhookUrl:n.attributes.webhook_url,component:id})),l.a.createElement(Z.a,{intlLabel:"site.button"})))}}])&&cd(n.prototype,a),r&&cd(n,r),t}(c.a),pd(ad,"propTypes",{usage:r.a.object.isRequired,dispatch:r.a.func.isRequired,environment:r.a.object.isRequired}),pd(ad,"contextTypes",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ld(n,!0).forEach((function(t){pd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ld(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({route:r.a.object},c.a.contextTypes)),nd=rd))||nd)||nd,hd=n(1011);function _d(e){return(_d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vd(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function gd(e,t){return!t||"object"!==_d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ed(e){return(Ed=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Od(e,t){return(Od=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wd,jd,kd,Pd=Object(p.connect)((function(e,t){return{deploymentEnvironment:e.deploymentEnvironments[t.match.params.environmentId]}}))((bd=fd=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),gd(this,Ed(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Od(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,n=e.match.params;t(Object(Em.fetch)({id:n.environmentId}))}},{key:"handleSubmit",value:function(e){var t,n;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=this.props.dispatch,a.prev=1,delete(n=ne()(e)).attributes.webhook_token,a.next=6,regeneratorRuntime.awrap(t(Object(Em.update)({id:e.id,data:n})));case 6:t(Object(G.notice)("editor.deploymentEnvironment.update.success")),a.next=13;break;case 9:throw a.prev=9,a.t0=a.catch(1),t(Object(G.alert)("editor.deploymentEnvironment.update.failure")),Object(we.a)(a.t0);case 13:case"end":return a.stop()}}),null,this,[[1,9]])}},{key:"handleDestroy",value:function(e){var t,n,a,r;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=this.props,n=t.dispatch,a=t.deploymentEnvironment,r=t.history,e.preventDefault(),i.next=4,regeneratorRuntime.awrap(Object(se.b)("messages.confirm.destroyDeploymentEnvironment"));case 4:if(i.sent){i.next=6;break}return i.abrupt("return");case 6:return i.prev=6,i.next=9,regeneratorRuntime.awrap(n(Object(Em.destroy)({id:a.id})));case 9:n(Object(hd.purgeAll)()),n(Object(G.notice)("editor.deploymentEnvironment.destroy.success")),r.push("/admin/deployment_environments"),i.next=17;break;case 14:i.prev=14,i.t0=i.catch(6),n(Object(G.alert)("editor.deploymentEnvironment.destroy.failure"));case 17:case"end":return i.stop()}}),null,this,[[6,14]])}},{key:"render",value:function(){var e=this.props.deploymentEnvironment;return l.a.createElement("div",{className:"Page"},l.a.createElement("div",{className:"Page__inner"},l.a.createElement("div",{className:"Page__header"},l.a.createElement("div",{className:"Page__title"},l.a.createElement(i.FormattedMessage,{id:"form.editDeploymentEnvironmentForm.title"})),l.a.createElement("div",{className:"Page__space"}),e&&l.a.createElement("a",{href:"#",onClick:this.handleDestroy.bind(this),className:"Page__action--delete"},l.a.createElement(qo.a,null),l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"form.editDeploymentEnvironmentForm.delete"})))),l.a.createElement("div",{className:"Info"},l.a.createElement("div",{className:"Info__icon"},l.a.createElement(Vl,null)),l.a.createElement("div",{className:"Info__body"},l.a.createElement(i.FormattedHTMLMessage,{id:"instructions.deployment"}))),l.a.createElement("div",{className:"Page__content"},e&&l.a.createElement(yd,{environment:e,onSubmit:this.handleSubmit.bind(this)}))))}}])&&vd(n.prototype,a),r&&vd(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(fd,"propTypes",{history:r.a.object.isRequired,dispatch:r.a.func.isRequired,deploymentEnvironment:r.a.object,match:r.a.object.isRequired}),dd=bd))||dd;function Sd(e){return(Sd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nd(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Td(e,t){return!t||"object"!==Sd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xd(e){return(xd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rd(e,t){return(Rd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Fd,Cd,qd,Md=Object(p.connect)()((kd=jd=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Td(this,(e=xd(t)).call.apply(e,[this].concat(r)))).state={env:Object(Xe.b)()},n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rd(e,t)}(t,e),n=t,(a=[{key:"handleSubmit",value:function(e){var t,n,a,r,i;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=this.props,n=t.dispatch,a=t.history,o.prev=1,o.next=4,regeneratorRuntime.awrap(n(Object(Em.create)({data:e})));case 4:r=o.sent,i=r.data,n(Object(G.notice)("editor.deploymentEnvironment.create.success")),a.push("/admin/deployment_environments/".concat(i.id,"/edit")),o.next=14;break;case 10:throw o.prev=10,o.t0=o.catch(1),n(Object(G.alert)("editor.deploymentEnvironment.create.failure")),Object(we.a)(o.t0);case 14:case"end":return o.stop()}}),null,this,[[1,10]])}},{key:"render",value:function(){var e=this.state.env;return l.a.createElement("div",{className:"Page"},l.a.createElement("div",{className:"Page__inner"},l.a.createElement("div",{className:"Page__header"},l.a.createElement("div",{className:"Page__title"},l.a.createElement(i.FormattedMessage,{id:"form.newDeploymentEnvironmentForm.title"}))),l.a.createElement("div",{className:"Info"},l.a.createElement("div",{className:"Info__icon"},l.a.createElement(Vl,null)),l.a.createElement("div",{className:"Info__body"},l.a.createElement(i.FormattedHTMLMessage,{id:"instructions.deployment"}))),l.a.createElement("div",{className:"Page__content"},l.a.createElement(yd,{environment:e,onSubmit:this.handleSubmit.bind(this)}))))}}])&&Nd(n.prototype,a),r&&Nd(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(jd,"propTypes",{dispatch:r.a.func.isRequired,history:r.a.object.isRequired}),wd=kd))||wd;function Id(e){return(Id="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ld(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ad(e,t){return!t||"object"!==Id(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dd(e){return(Dd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zd(e,t){return(zd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Bd,Ud,Hd,Vd=Object(p.connect)((function(e){var t=Object(d.allowedEnviromentIds)(e);return{deploymentEnvironments:Object.values(e.deploymentEnvironments).sort((function(e,t){return e.attributes.name.localeCompare(t.attributes.name)})).filter((function(e){return t.includes(e.id)}))}}))((qd=Cd=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ad(this,Dd(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zd(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(Object(Em.fetchAll)())}},{key:"renderDeploymentEnvironment",value:function(e){var t=e.attributes.deploy_adapter;return l.a.createElement(s.a,{className:"ItemRow",activeClassName:"ItemRow--active",to:"/admin/deployment_environments/".concat(e.id,"/edit"),key:e.id},l.a.createElement("div",{className:"ItemRow__item"},l.a.createElement("div",{className:"ItemRow__item__inner"},l.a.createElement("div",{className:"ItemRow__item__image"},l.a.createElement("div",{className:["ItemRow__item__image__placeholder","ItemRow__item__image__placeholder--contain"].join(" "),style:{backgroundImage:"url(/assets/images/".concat(t,".png)")}})),l.a.createElement("div",{className:"ItemRow__item__content"},l.a.createElement("div",{className:"ItemRow__item__title"},e.attributes.name),l.a.createElement("div",{className:"ItemRow__item__details"},l.a.createElement(i.FormattedMessage,{id:"site.deployAdapters.".concat(t)}))))))}},{key:"renderBlankSlate",value:function(){return l.a.createElement("div",{className:"Items__blank-slate"},l.a.createElement("div",{className:"Items__blank-slate__inner"},l.a.createElement("div",{className:"Items__blank-slate__title"},l.a.createElement(i.FormattedMessage,{id:"admin.deploymentEnvironments.noEnvs.title"})),l.a.createElement("div",{className:"Items__blank-slate__description"},l.a.createElement(i.FormattedMessage,{id:"admin.deploymentEnvironments.noEnvs.description"}))),l.a.createElement("div",{className:"Items__blank-slate__arrow"}))}},{key:"renderDeploymentEnvironments",value:function(){var e=this.props.deploymentEnvironments;return l.a.createElement("div",{className:"Items"},e.length>0?l.a.createElement("div",{className:"Items__items"},e.map(this.renderDeploymentEnvironment.bind(this))):this.renderBlankSlate(),l.a.createElement(s.a,{to:"/admin/deployment_environments/new",className:"Items__button"},l.a.createElement(mn.a,null)))}},{key:"render",value:function(){var e=this.props,t=e.deploymentEnvironments,n=e.match.url;return l.a.createElement(u.a,{minSize:300,defaultSize:400,split:"vertical"},l.a.createElement("div",null,t?this.renderDeploymentEnvironments():l.a.createElement(Be.a,{size:100})),l.a.createElement("div",null,l.a.createElement(f.e,null,l.a.createElement(f.c,{path:"".concat(n,"/new"),component:Md}),l.a.createElement(f.c,{path:"".concat(n,"/:environmentId/edit"),component:Pd}))))}}])&&Ld(n.prototype,a),r&&Ld(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Cd,"propTypes",{dispatch:r.a.func.isRequired,deploymentEnvironments:r.a.array,match:r.a.object.isRequired}),Fd=qd))||Fd;function Gd(e){return(Gd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Wd(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function $d(e,t){return!t||"object"!==Gd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kd(e){return(Kd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qd(e,t){return(Qd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Xd,Yd,Zd,ef=Object(o.lazy)((function(){return Promise.all([n.e(40),n.e(15)]).then(n.bind(null,2975))})),tf=Object(p.connect)((function(e,t){return{event:e.deployEvents[t.match.params.deployEventId]}}))((Hd=Ud=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),$d(this,Kd(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qd(e,t)}(t,e),n=t,(a=[{key:"renderCreatedAt",value:function(){var e=this.props.event;return l.a.createElement(ms.a,{title:"deployEvent.details.timestamp"},l.a.createElement(i.FormattedDate,{value:Date.parse(e.attributes.created_at)})," ",l.a.createElement(i.FormattedTime,{value:Date.parse(e.attributes.created_at)}))}},{key:"renderCommand",value:function(){var e=this.props.event.attributes.data.command;if(e){var t=e.trim().split(" -").join(" \\\n  -");return l.a.createElement(ms.a,{title:"deployEvent.details.command"},l.a.createElement(is.a,{log:t}))}}},{key:"renderBody",value:function(e,t){if(t){var n=t;try{n=JSON.stringify(JSON.parse(t),null,2)}catch(e){}return l.a.createElement(ms.a,{title:e},l.a.createElement(is.a,{log:n}))}}},{key:"renderHeaders",value:function(e,t){if(t){var n=Object.entries(t).map((function(e){var t=Jd(e,2),n=t[0],a=t[1];return"".concat(ls(n),": ").concat(a)})).join("\n");return l.a.createElement(ms.a,{title:e},l.a.createElement(is.a,{log:n}))}}},{key:"renderStatusCode",value:function(e,t){if(t)return l.a.createElement(ms.a,{title:e},l.a.createElement("p",{className:"beta"},t))}},{key:"renderReason",value:function(){var e=this.props.event;if(e.attributes.data.reason)return l.a.createElement(ms.a,{title:"deployEvent.details.reason"},l.a.createElement("p",{className:"gamma"},os(e.attributes.data.reason)))}},{key:"renderRequestDetails",value:function(){var e=this.props.event.attributes.data;return l.a.createElement("div",{className:"DeployEvent__details"},this.renderCommand(),this.renderReason(e.reason),this.renderStatusCode("deployEvent.details.responseStatusCode",e.response_status),this.renderHeaders("deployEvent.details.responseHeaders",e.response_headers),this.renderBody("deployEvent.details.responseBody",e.response_body),this.renderCreatedAt())}},{key:"renderUnprocessableRequestDetails",value:function(){var e=this.props.event.attributes.data;return l.a.createElement("div",{className:"DeployEvent__details"},this.renderHeaders("deployEvent.details.requestHeaders",e.request_headers),this.renderBody("deployEvent.details.requestBody",e.request_body),this.renderCreatedAt())}},{key:"renderNetlifyLog",value:function(){var e=this.props.event;return l.a.createElement(o.Suspense,{fallback:l.a.createElement(Be.a,{size:30})},l.a.createElement(ef,{event:e}))}},{key:"renderResponseDetails",value:function(){var e=this.props.event.attributes.data;return l.a.createElement("div",{className:"DeployEvent__details"},this.renderNetlifyLog(),this.renderHeaders("deployEvent.details.requestHeaders",e.request_headers),this.renderBody("deployEvent.details.requestBody",e.request_body),this.renderCreatedAt())}},{key:"renderScrapeSuccessDetails",value:function(){var e=this.props.event.attributes.data;return l.a.createElement("div",{className:"DeployEvent__details"},l.a.createElement(ms.a,{title:"deployEvent.details.pages_count"},l.a.createElement("p",{className:"beta"},e.pages.length)),l.a.createElement(ms.a,{title:"deployEvent.details.pages"},l.a.createElement(is.a,{log:e.pages.join("\n")})),this.renderCreatedAt())}},{key:"renderScrapeFailureDetails",value:function(){var e=this.props.event.attributes.data;return l.a.createElement("div",{className:"DeployEvent__details"},l.a.createElement(ms.a,{title:"deployEvent.details.reason"},l.a.createElement(i.FormattedMessage,{id:"scrapeFailureReason.".concat(e.reason)})),this.renderCreatedAt())}},{key:"render",value:function(){var e=this.props.event;if(!e)return null;switch(e.attributes.event_type){case"request":case"request_failed":return this.renderRequestDetails();case"request_unprocessable":return this.renderUnprocessableRequestDetails();case"response_success":case"response_failure":return this.renderResponseDetails();case"scrape_complete":return this.renderScrapeSuccessDetails();case"scrape_failure":return this.renderScrapeFailureDetails();default:return}}}])&&Wd(n.prototype,a),r&&Wd(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ud,"propTypes",{event:r.a.object.isRequired}),Bd=Hd))||Bd,nf=n(57);function af(e){return(af="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rf(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function of(e,t){return!t||"object"!==af(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lf(e){return(lf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cf(e,t){return(cf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var sf=Object(p.connect)((function(e){var t=Object.values(e.deployEvents).sort((function(e,t){return Date.parse(e.attributes.created_at)-Date.parse(t.attributes.created_at)})).reverse(),n=e.site,a=Object(d.allowedEnviromentIds)(e),r=a.reduce((function(t,n){return t[n]=e.deploymentEnvironments[n],t}),{});return{allowedEvents:t.filter((function(e){return a.includes(e.relationships.deployment_environment.data.id)})),allowedEnvironments:r,site:n}}))((Zd=Yd=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),of(this,lf(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cf(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(Object(hd.fetchAll)())}},{key:"handleFailClick",value:function(e,t){var n=this.props.dispatch;t.preventDefault(),n(Object(je.abortDeploy)({environment:e}))}},{key:"renderEvent",value:function(e){var t=this.props,n=t.allowedEnvironments,a=t.match.url;return l.a.createElement("div",{className:"DeployEvent",key:e.id},l.a.createElement("div",{className:"DeployEvent__inner"},l.a.createElement("div",{className:"DeployEvent__title"},l.a.createElement("div",{className:"DeployEvent__environment"},n[e.relationships.deployment_environment.data.id].attributes.name),l.a.createElement(i.FormattedMessage,{id:"deployEvent.type.".concat(e.attributes.event_type)})),l.a.createElement("div",{className:"DeployEvent__sub"},l.a.createElement("div",{className:"DeployEvent__sub__item"},l.a.createElement(rs.a,{value:e.attributes.created_at})),e.attributes.data&&l.a.createElement("div",{className:"DeployEvent__sub__item"},l.a.createElement(nf.b,{to:"".concat(a,"/").concat(e.id)},l.a.createElement(i.FormattedMessage,{id:"deployEvent.showDetails"}))))))}},{key:"renderScrapeStatus",value:function(e){if("pending"===e.attributes.scrape_status)return l.a.createElement("div",{className:"DeployEvent",key:e.id},l.a.createElement("div",{className:"DeployEvent__inner"},l.a.createElement("div",{className:"DeployEvent__title"},l.a.createElement("div",{className:"DeployEvent__environment"},e.attributes.name),l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"deployEvent.type.scrape_in_progress"})),l.a.createElement(Be.a,{inline:!0,size:24}))))}},{key:"renderStatus",value:function(e){if("pending"===e.attributes.deploy_status)return l.a.createElement("div",{className:"DeployEvent",key:e.id},l.a.createElement("div",{className:"DeployEvent__inner"},l.a.createElement("div",{className:"DeployEvent__title"},l.a.createElement("div",{className:"DeployEvent__environment"},e.attributes.name),l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"deployEvent.type.in_progress"})),l.a.createElement(Be.a,{inline:!0,size:24})),l.a.createElement("div",{className:"DeployEvent__sub"},l.a.createElement("div",{className:"DeployEvent__sub__item"},l.a.createElement("a",{href:"#",onClick:this.handleFailClick.bind(this,e)},l.a.createElement(i.FormattedMessage,{id:"admin.deploymentLogs.abort"}))))))}},{key:"render",value:function(){var e=this.props,t=e.allowedEvents,n=e.allowedEnvironments,a=e.match.url,r=e.history;return l.a.createElement("div",{className:"Page"},l.a.createElement("div",{className:"Page__inner"},l.a.createElement("div",{className:"Page__header"},l.a.createElement("div",{className:"Page__title"},l.a.createElement(i.FormattedMessage,{id:"admin.deploymentLogs.title"}))),l.a.createElement("div",{className:"Info"},l.a.createElement("div",{className:"Info__icon"},l.a.createElement(Vl,null)),l.a.createElement("div",{className:"Info__body"},l.a.createElement(i.FormattedHTMLMessage,{id:"instructions.logs"}))),l.a.createElement("div",{className:"Page__content--transparent"},Object.values(n).map(this.renderScrapeStatus.bind(this)),Object.values(n).map(this.renderStatus.bind(this)),t.map(this.renderEvent,this),0===t.length&&l.a.createElement("div",{className:"blank-slate blank-slate--tiny"},l.a.createElement("p",{className:"blank-slate__title"},l.a.createElement(i.FormattedMessage,{id:"admin.deploymentLogs.noEvents.title"})),l.a.createElement("p",{className:"blank-slate__description"},l.a.createElement(i.FormattedMessage,{id:"admin.deploymentLogs.noEvents.description"}))))),t.length>0&&l.a.createElement(f.c,{path:"".concat(a,"/:deployEventId"),render:function(e){return l.a.createElement(Ye.default,{wide:!0,localeKey:"deployEvent.detailsTitle",onClose:function(){return r.push(a)}},l.a.createElement(tf,e))}}))}}])&&rf(n.prototype,a),r&&rf(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Yd,"propTypes",{dispatch:r.a.func.isRequired,allowedEvents:r.a.array,allowedEnvironments:r.a.object.isRequired,match:r.a.object.isRequired,history:r.a.object.isRequired}),Xd=Zd))||Xd,uf=n(570);function mf(e){return(mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pf(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function df(e,t){return!t||"object"!==mf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ff(e){return(ff=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bf(e,t){return(bf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var yf=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),df(this,ff(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bf(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.accessToken,n=e.roles.map((function(e){return{value:e.id,label:e.attributes.name}}));return l.a.createElement(X.default,null,l.a.createElement(ee.default,{name:"name",intlLabel:"accessToken.name",type:"text",className:"form__input--large",disabled:t.attributes.hardcoded_type}),t.attributes.token&&l.a.createElement("div",{className:"form__field"},l.a.createElement("div",{className:"form__label"},l.a.createElement(i.FormattedMessage,{id:"accessToken.apiKey"})),l.a.createElement(qm,{className:"form__input--code",value:t.attributes.token})),l.a.createElement("div",{className:"Page__content__section"},l.a.createElement("div",{className:"Page__content__section__title"},l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"accessToken.permissions"}))),!t.attributes.hardcoded_type&&l.a.createElement(ee.default,{name:"role",intlLabel:"accessToken.role",clearable:!1,options:n,component:Q.default}),l.a.createElement(ee.default,{name:"can_access_cda",intlLabel:"accessToken.canAccessCda",intlHint:"accessToken.canAccessCda.hint",disabled:!!t.attributes.hardcoded_type,component:W.a}),l.a.createElement(ee.default,{name:"can_access_cda_preview",intlLabel:"accessToken.canAccessCdaPreview",intlHint:"accessToken.canAccessCdaPreview.hint",disabled:!!t.attributes.hardcoded_type,component:W.a}),l.a.createElement(ee.default,{name:"can_access_cma",intlLabel:"accessToken.canAccessCma",intlHint:"accessToken.canAccessCma.hint",disabled:!!t.attributes.hardcoded_type,component:W.a})),l.a.createElement(Z.a,{intlLabel:"accessToken.button"}))}}])&&pf(n.prototype,a),r&&pf(n,r),t}(c.a);!function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(yf,"propTypes",{accessToken:r.a.object.isRequired,roles:r.a.array.isRequired});var hf,_f,vf,gf=Object(p.connect)((function(e,t){var n=t.accessToken,a=Object.values(e.roles),r={name:[re.a.required()]},i=mt()(t.accessToken.attributes,["name","can_access_cda","can_access_cda_preview","can_access_cma"]);return n.attributes.hardcoded_type||(r.role=[re.a.required()],i.role=t.accessToken.relationships.role.data&&t.accessToken.relationships.role.data.id),{enableReinitialize:!0,validate:oe()(r),initialValues:i,roles:a,onSubmit:function(e){var n=ne()(t.accessToken);return n.attributes=dt()(e,["role"]),n.relationships.role.data={id:e.role,type:"role"},t.onSubmit(n)}}}))(Object(J.withForm)({form:"accessToken"})(yf)),Ef=n(416);function Of(e){return(Of="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wf(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function jf(e,t){return!t||"object"!==Of(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kf(e){return(kf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pf(e,t){return(Pf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Sf,Nf,Tf,xf=Object(p.connect)((function(e,t){return{accessToken:e.accessTokens[t.match.params.accessTokenId]}}))((vf=_f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),jf(this,kf(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pf(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,n=e.match.params;t(Object(uf.fetch)({id:n.accessTokenId}))}},{key:"handleSubmit",value:function(e){var t,n;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=this.props.dispatch,a.prev=1,n=ne()(e),a.next=5,regeneratorRuntime.awrap(t(Object(uf.update)({id:e.id,data:n})));case 5:t(Object(G.notice)("admin.accessToken.update.success")),a.next=12;break;case 8:throw a.prev=8,a.t0=a.catch(1),t(Object(G.alert)("admin.accessToken.update.failure")),Object(we.a)(a.t0);case 12:case"end":return a.stop()}}),null,this,[[1,8]])}},{key:"handleRefreshToken",value:function(e){var t,n,a;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=this.props,n=t.dispatch,a=t.accessToken,e.preventDefault(),r.next=4,regeneratorRuntime.awrap(Object(se.b)("messages.confirm.regenerateAccessToken"));case 4:if(r.sent){r.next=6;break}return r.abrupt("return");case 6:return r.prev=6,r.next=9,regeneratorRuntime.awrap(n(Object(uf.regenerateToken)({id:a.id})));case 9:n(Object(G.notice)("admin.accessToken.regenerateToken.success")),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(6),n(Object(G.alert)("admin.accessToken.regenerateToken.failure"));case 15:case"end":return r.stop()}}),null,this,[[6,12]])}},{key:"handleDestroy",value:function(e){var t,n,a,r,i;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=this.props,n=t.dispatch,a=t.history,r=t.accessToken,e.preventDefault(),o.next=4,regeneratorRuntime.awrap(Object(se.b)("messages.confirm.destroyAccessToken"));case 4:if(o.sent){o.next=6;break}return o.abrupt("return");case 6:return o.prev=6,o.prev=7,o.next=10,regeneratorRuntime.awrap(n(Object(uf.destroy)({id:r.id})));case 10:o.next=25;break;case 12:if(o.prev=12,o.t0=o.catch(7),!o.t0||!o.t0.data||"DESTINATION_USER_REQUIRED"!==o.t0.data[0].attributes.code){o.next=24;break}return o.next=17,regeneratorRuntime.awrap(Object(Ef.a)(r,"admin.accessToken.destroy.newCreator.title","admin.accessToken.destroy.newCreator.description","admin.accessToken.destroy.newCreator.field","admin.accessToken.destroy.newCreator.submit"));case 17:if(i=o.sent){o.next=20;break}return o.abrupt("return");case 20:return o.next=22,regeneratorRuntime.awrap(n(Object(uf.destroy)({id:r.id,destinationUser:i})));case 22:o.next=25;break;case 24:throw o.t0;case 25:n(Object(G.notice)("admin.accessToken.destroy.success")),a.push("/admin/access_tokens"),o.next=32;break;case 29:o.prev=29,o.t1=o.catch(6),n(Object(G.alert)("admin.accessToken.destroy.failure"));case 32:case"end":return o.stop()}}),null,this,[[6,29],[7,12]])}},{key:"render",value:function(){var e=this.props.accessToken;return l.a.createElement("div",{className:"Page"},l.a.createElement("div",{className:"Page__inner"},l.a.createElement("div",{className:"Page__header"},l.a.createElement("div",{className:"Page__title"},l.a.createElement(i.FormattedMessage,{id:"form.editAccessToken.title"})),l.a.createElement("div",{className:"Page__space"}),l.a.createElement("a",{href:"#",onClick:this.handleRefreshToken.bind(this),className:"Page__action"},l.a.createElement("i",{className:"icon--sync"}),l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"form.editAccessTokenForm.refreshToken"}))),e&&!e.attributes.hardcoded_type&&l.a.createElement("a",{href:"#",onClick:this.handleDestroy.bind(this),className:"Page__action--delete"},l.a.createElement(qo.a,null),l.a.createElement(i.FormattedMessage,{id:"form.editEditorForm.delete"}))),e&&e.attributes.hardcoded_type&&l.a.createElement("div",{className:"Info"},l.a.createElement("div",{className:"Info__icon"},l.a.createElement(Vl,null)),l.a.createElement("div",{className:"Info__body"},l.a.createElement(i.FormattedMessage,{id:"accessToken.info"}))),l.a.createElement("div",{className:"Page__content"},e&&l.a.createElement(gf,{accessToken:e,onSubmit:this.handleSubmit.bind(this)}))))}}])&&wf(n.prototype,a),r&&wf(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(_f,"propTypes",{dispatch:r.a.func.isRequired,accessToken:r.a.object,match:r.a.object.isRequired,history:r.a.object.isRequired}),hf=vf))||hf;function Rf(e){return(Rf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ff(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Cf(e,t){return!t||"object"!==Rf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qf(e){return(qf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mf(e,t){return(Mf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var If,Lf,Af,Df=Object(p.connect)()((Tf=Nf=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Cf(this,qf(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mf(e,t)}(t,e),n=t,(a=[{key:"handleSubmit",value:function(e){var t,n,a,r,i;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=this.props,n=t.dispatch,a=t.history,o.prev=1,o.next=4,regeneratorRuntime.awrap(n(Object(uf.create)({data:e})));case 4:r=o.sent,i=r.data,n(Object(G.notice)("admin.accessToken.create.success")),a.push("/admin/access_tokens/".concat(i.id,"/edit")),o.next=14;break;case 10:throw o.prev=10,o.t0=o.catch(1),n(Object(G.alert)("admin.accessToken.create.failure")),Object(we.a)(o.t0);case 14:case"end":return o.stop()}}),null,this,[[1,10]])}},{key:"render",value:function(){var e=Object(Xe.a)();return l.a.createElement("div",{className:"Page"},l.a.createElement("div",{className:"Page__inner"},l.a.createElement("div",{className:"Page__header"},l.a.createElement("div",{className:"Page__title"},l.a.createElement(i.FormattedMessage,{id:"form.newAccessToken.title"}))),l.a.createElement("div",{className:"Page__content"},l.a.createElement(gf,{accessToken:e,onSubmit:this.handleSubmit.bind(this)}))))}}])&&Ff(n.prototype,a),r&&Ff(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Nf,"propTypes",{history:r.a.object.isRequired,dispatch:r.a.func.isRequired}),Sf=Tf))||Sf;function zf(e){return(zf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bf(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Uf(e,t){return!t||"object"!==zf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Hf(e){return(Hf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vf(e,t){return(Vf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Gf,Jf,Wf,$f=Object(p.connect)((function(e){return{accessTokens:Object.values(e.accessTokens).sort((function(e,t){return e.attributes.name.localeCompare(t.attributes.name)}))}}))((Af=Lf=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Uf(this,Hf(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vf(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(Object(uf.fetchAll)())}},{key:"renderAccessToken",value:function(e){return l.a.createElement(s.a,{className:"ItemRow",activeClassName:"ItemRow--active",to:"/admin/access_tokens/".concat(e.id,"/edit"),key:e.id},l.a.createElement("div",{className:"ItemRow__item"},l.a.createElement("div",{className:"ItemRow__item__inner"},l.a.createElement("div",{className:"ItemRow__item__content"},l.a.createElement("div",{className:"ItemRow__item__title"},e.attributes.name,e.attributes.hardcoded_type&&l.a.createElement("span",{className:"ItemRow__item__title__tag"},l.a.createElement(i.FormattedMessage,{id:"accessToken.notEditable"})))))))}},{key:"renderAccessTokens",value:function(){var e=this.props.accessTokens;return l.a.createElement("div",{className:"Items"},l.a.createElement("div",{className:"Items__items"},e.map(this.renderAccessToken.bind(this))),l.a.createElement(s.a,{className:"Items__button",to:"/admin/access_tokens/new"},l.a.createElement(mn.a,null)))}},{key:"render",value:function(){var e=this.props,t=e.accessTokens,n=e.match.url;return l.a.createElement(u.a,{minSize:300,defaultSize:400,split:"vertical"},l.a.createElement("div",null,t?this.renderAccessTokens():l.a.createElement(Be.a,{size:100})),l.a.createElement("div",null,l.a.createElement(f.e,null,l.a.createElement(f.c,{path:"".concat(n,"/:accessTokenId/edit"),component:xf}),l.a.createElement(f.c,{path:"".concat(n,"/new"),component:Df}))))}}])&&Bf(n.prototype,a),r&&Bf(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Lf,"propTypes",{dispatch:r.a.func.isRequired,accessTokens:r.a.array,match:r.a.object.isRequired}),If=Af))||If,Kf=n(263),Qf=n(1017);function Xf(e){return(Xf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yf(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Zf(e,t){return!t||"object"!==Xf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function eb(e){return(eb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tb(e,t){return(tb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var nb=Object(p.connect)((function(e){return{roles:Object.values(e.roles)}}))(Gf=Object(J.withForm)({initialValues:{role:null,email:null},validate:oe()({role:[re.a.required()],email:[re.a.required(),re.a.email()]})})((Wf=Jf=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Zf(this,eb(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tb(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props.roles.map((function(e){return{value:e.id,label:e.attributes.name}}));return l.a.createElement(X.default,null,l.a.createElement("div",{className:"grid space--bottom-2"},l.a.createElement("div",{className:"grid__item desk-7-12"},l.a.createElement(ee.default,{name:"email",intlLabel:"editor.email"})),l.a.createElement("div",{className:"grid__item desk-5-12"},l.a.createElement(ee.default,{name:"role",intlLabel:"editor.role",clearable:!1,options:e,component:Q.default}))),l.a.createElement(Z.a,{intlLabel:"editor.button"}))}}])&&Yf(n.prototype,a),r&&Yf(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Jf,"propTypes",{roles:r.a.array.isRequired}),Gf=Wf))||Gf)||Gf;function ab(){return(ab=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var rb=l.a.createElement("path",{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"}),ib=function(e){return l.a.createElement("svg",ab({viewBox:"0 0 512 512",width:"1em",height:"1em"},e),rb)};function ob(){return(ob=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var lb,cb,sb,ub=l.a.createElement("path",{d:"M256 8C119.034 8 8 119.033 8 256s111.034 248 248 248 248-111.034 248-248S392.967 8 256 8zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676zM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676z"}),mb=function(e){return l.a.createElement("svg",ob({viewBox:"0 0 512 512",width:"1em",height:"1em"},e),ub)},pb=n(376),db=n.n(pb);function fb(e){return(fb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bb(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function yb(e,t){return!t||"object"!==fb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hb(e){return(hb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _b(e,t){return(_b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vb=function(e){return function(t,n){return t.attributes[e].localeCompare(n.attributes[e])}},gb=Object(p.connect)((function(e){var t=Object.values(e.users).sort(vb("email")),n=Object.values(e.invitations).sort(vb("email")),a=Object.values(e.roles).sort(vb("name"));return{users:t,canManageUsers:Object(d.getCurrentRole)(e).attributes.can_manage_users,invitations:n,roles:a}}))((sb=cb=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),yb(this,hb(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_b(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e(Object(Kf.fetchAll)()),e(Object(Qf.fetchAll)())}},{key:"handleEdit",value:function(e,t,n){var a,r;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(a=this.props.dispatch,i.prev=1,r={type:n,id:e.id,relationships:{role:{data:{id:t.id,type:"role"}}}},"user"!==n){i.next=8;break}return i.next=6,regeneratorRuntime.awrap(a(Object(Kf.update)({id:e.id,data:r})));case 6:i.next=10;break;case 8:return i.next=10,regeneratorRuntime.awrap(a(Object(Qf.update)({id:e.id,data:r})));case 10:a(Object(G.notice)("editor.editor.update.success")),i.next=17;break;case 13:throw i.prev=13,i.t0=i.catch(1),a(Object(G.alert)("editor.editor.update.failure")),Object(we.a)(i.t0);case 17:case"end":return i.stop()}}),null,this,[[1,13]])}},{key:"handleInvite",value:function(e){var t,n,a,r,i;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=this.props,n=t.dispatch,a=t.history,r=t.match.url,o.prev=1,(i=Object(Xe.d)()).attributes.email=e.email,i.relationships.role.data.id=e.role,o.next=7,regeneratorRuntime.awrap(n(Object(Qf.create)({data:i})));case 7:n(Object(G.notice)("editor.editor.create.success")),a.push(r),o.next=15;break;case 11:throw o.prev=11,o.t0=o.catch(1),n(Object(G.alert)("editor.editor.create.failure")),Object(we.a)(o.t0);case 15:case"end":return o.stop()}}),null,this,[[1,11]])}},{key:"handleToggleActivation",value:function(e){var t,n;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=this.props.dispatch,n=e.attributes.is_active?"deactivate":"reactivate",a.next=4,regeneratorRuntime.awrap(Object(se.b)("messages.confirm.".concat(n,"User")));case 4:if(a.sent){a.next=6;break}return a.abrupt("return");case 6:return a.prev=6,a.next=9,regeneratorRuntime.awrap(t(Object(Kf.update)({id:e.id,data:{type:"user",id:e.id,attributes:{is_active:!e.attributes.is_active}}})));case 9:t(Object(G.notice)("editor.editor.".concat(n,"User.success"))),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(6),t(Object(G.alert)("editor.editor.".concat(n,"User.failure")));case 15:case"end":return a.stop()}}),null,this,[[6,12]])}},{key:"handleDestroy",value:function(e,t){var n,a;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=this.props.dispatch,r.next=3,regeneratorRuntime.awrap(Object(se.b)("messages.confirm.destroyUser"));case 3:if(r.sent){r.next=5;break}return r.abrupt("return");case 5:if(r.prev=5,"user"!==t){r.next=27;break}return r.prev=7,r.next=10,regeneratorRuntime.awrap(n(Object(Kf.destroy)({id:e.id})));case 10:r.next=25;break;case 12:if(r.prev=12,r.t0=r.catch(7),!r.t0||!r.t0.data||"DESTINATION_USER_REQUIRED"!==r.t0.data[0].attributes.code){r.next=24;break}return r.next=17,regeneratorRuntime.awrap(Object(Ef.a)(e,"editor.editor.destroy.newCreator.title","editor.editor.destroy.newCreator.description","editor.editor.destroy.newCreator.field","editor.editor.destroy.newCreator.submit"));case 17:if(a=r.sent){r.next=20;break}return r.abrupt("return");case 20:return r.next=22,regeneratorRuntime.awrap(n(Object(Kf.destroy)({id:e.id,destinationUser:a})));case 22:r.next=25;break;case 24:throw r.t0;case 25:r.next=29;break;case 27:return r.next=29,regeneratorRuntime.awrap(n(Object(Qf.destroy)({id:e.id})));case 29:n(Object(G.notice)("editor.editor.destroy.success")),r.next=35;break;case 32:r.prev=32,r.t1=r.catch(5),n(Object(G.alert)("editor.editor.destroy.failure"));case 35:case"end":return r.stop()}}),null,this,[[5,32],[7,12]])}},{key:"renderUser",value:function(e,t){var n=this,a=this.props.roles,r=t.relationships.role.data.id,o=a.find((function(e){return e.id===r})),c=db()({"is-disabled":"user"===t.type&&!t.attributes.is_active});return l.a.createElement("tr",{key:t.id},l.a.createElement("td",{className:c},l.a.createElement(Zn.a,{withEmail:!0,withAvatar:!0,size:40,user:t})),l.a.createElement("td",{className:c},"user"===t.type&&(t.attributes.is_active?"Active":"De-activated"),"site_invitation"===t.type&&"Invited"),l.a.createElement("td",{className:c},t.attributes.is_2fa_active&&l.a.createElement(ib,null)),l.a.createElement("td",null,l.a.createElement(Mo.c,{label:o.attributes.name,icon:N},l.a.createElement(Mo.f,null,l.a.createElement(Mo.d,{intlName:"editor.changeRole"},a.map((function(a){return l.a.createElement(Mo.g,{key:a.id,active:a.id===o.id,onClick:n.handleEdit.bind(n,t,a,e)},a.attributes.name)}))),l.a.createElement(Mo.j,null),"user"===t.type&&l.a.createElement(Mo.g,{icon:mb,onClick:this.handleToggleActivation.bind(this,t)},t.attributes.is_active?"De-activate user":"Re-activate user"),l.a.createElement(Mo.g,{red:!0,icon:qo.a,onClick:this.handleDestroy.bind(this,t,e)},l.a.createElement(i.FormattedMessage,{id:"editor.remove"}))))))}},{key:"renderBlankSlate",value:function(){var e=this.props.match.url;return l.a.createElement("div",{className:"blank-slate"},l.a.createElement("p",{className:"blank-slate__title"},l.a.createElement(i.FormattedMessage,{id:"editor.editors.noEditors.title"})),l.a.createElement("p",{className:"blank-slate__description"},l.a.createElement(i.FormattedMessage,{id:"editor.editors.noEditors.description"})),l.a.createElement(s.a,{to:"".concat(e,"/new"),className:"button button--primary"},l.a.createElement(mn.a,null),l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"editor.add"}))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.canManageUsers,a=t.users,r=t.history,o=t.invitations,c=t.match.url;return n?l.a.createElement("div",{className:"Page Page--overflowauto Page--large"},l.a.createElement("div",{className:"Page__inner"},l.a.createElement("div",{className:"Page__header"},l.a.createElement("div",{className:"Page__title"},l.a.createElement(i.FormattedMessage,{id:"admin.users.title"})),l.a.createElement(s.a,{className:"Page__action--primary",to:"/admin/users/new"},l.a.createElement(mn.a,null),l.a.createElement("span",null,l.a.createElement(i.FormattedMessage,{id:"editor.add"})))),o.length+a.length===0?this.renderBlankSlate():l.a.createElement("div",{className:"space--bottom-3"},l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement(i.FormattedMessage,{id:"editor.table.user"})),l.a.createElement("th",null,l.a.createElement(i.FormattedMessage,{id:"editor.table.status"})),l.a.createElement("th",null,l.a.createElement(i.FormattedMessage,{id:"editor.table.2fa"})),l.a.createElement("th",null,l.a.createElement(i.FormattedMessage,{id:"editor.table.role"})))),l.a.createElement("tbody",null,a.filter((function(e){return e.attributes.is_active})).map(this.renderUser.bind(this,"user")),o.map(this.renderUser.bind(this,"site_invitation")),a.filter((function(e){return!e.attributes.is_active})).map(this.renderUser.bind(this,"user")))))),l.a.createElement(f.c,{path:"".concat(c,"/new"),render:function(){return l.a.createElement(Ye.default,{localeKey:"editor.inviteNew",onClose:function(){return r.push(c)},noCloseListeners:!0},l.a.createElement(nb,{onSubmit:e.handleInvite.bind(e)}))}})):l.a.createElement("div",{className:"Dashboard"})}}])&&bb(n.prototype,a),r&&bb(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(cb,"propTypes",{dispatch:r.a.func.isRequired,users:r.a.array,roles:r.a.array,invitations:r.a.array,canManageUsers:r.a.bool,match:r.a.object.isRequired,history:r.a.object.isRequired}),lb=sb))||lb,Eb=n(1010);function Ob(){return(Ob=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var wb,jb,kb,Pb=l.a.createElement("path",{d:"M440.65 12.57l4 82.77A247.16 247.16 0 00255.83 8C134.73 8 33.91 94.92 12.29 209.82A12 12 0 0024.09 224h49.05a12 12 0 0011.67-9.26 175.91 175.91 0 01317-56.94l-101.46-4.86a12 12 0 00-12.57 12v47.41a12 12 0 0012 12H500a12 12 0 0012-12V12a12 12 0 00-12-12h-47.37a12 12 0 00-11.98 12.57zM255.83 432a175.61 175.61 0 01-146-77.8l101.8 4.87a12 12 0 0012.57-12v-47.4a12 12 0 00-12-12H12a12 12 0 00-12 12V500a12 12 0 0012 12h47.35a12 12 0 0012-12.6l-4.15-82.57A247.17 247.17 0 00255.83 504c121.11 0 221.93-86.92 243.55-201.82a12 12 0 00-11.8-14.18h-49.05a12 12 0 00-11.67 9.26A175.86 175.86 0 01255.83 432z"}),Sb=function(e){return l.a.createElement("svg",Ob({viewBox:"0 0 512 512",width:"1em",height:"1em"},e),Pb)};function Nb(e){return(Nb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tb(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function xb(e){return(xb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fb(e,t){return(Fb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qb=Object(p.connect)((function(e){var t=e.ssoSettings,n=Object(d.getCurrentRole)(e),a={idpMetadata:t&&t.attributes.idp_saml_metadata_url,defaultRoleId:t&&t.relationships.default_role.data&&t.relationships.default_role.data.id};return{roles:Object.values(e.roles),ssoSettings:t,initialValues:a,hasPermission:n.attributes.can_edit_site,onSubmit:function(e,n){var a,r,i,o;return regeneratorRuntime.async((function(l){for(;;)switch(l.prev=l.next){case 0:return a=n.dispatch,r=e.idpMetadata,i=e.defaultRoleId,o={type:"sso_settings",id:t.id,attributes:{idp_saml_metadata_url:r},relationships:{default_role:{data:{type:"role",id:i}}}},l.prev=3,l.next=6,regeneratorRuntime.awrap(a(Object(Eb.update)({data:o})));case 6:a(Object(G.notice)("admin.ssoSettings.update.success")),l.next=13;break;case 9:throw l.prev=9,l.t0=l.catch(3),a(Object(G.alert)("admin.ssoSettings.update.failure")),Object(we.a)(l.t0);case 13:case"end":return l.stop()}}),null,null,[[3,9]])}}}))(wb=Object(J.withForm)({form:"SsoSettingsForm",validate:oe()({idpMetadata:[re.a.required(),re.a.url()],defaultRoleId:[re.a.required()]})})((kb=jb=function(e){function t(){var e,n,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return a=this,n=!(r=(e=xb(t)).call.apply(e,[this].concat(o)))||"object"!==Nb(r)&&"function"!=typeof r?Rb(a):r,Cb(Rb(n),"state",{scimApiToken:null}),n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fb(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(Object(Eb.fetch)())}},{key:"handleSsoGenerateToken",value:function(){var e,t,n;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=this.props.dispatch,a.next=3,regeneratorRuntime.awrap(e(Object(Eb.generateNewToken)()));case 3:t=a.sent,n=t.data,this.setState({scimApiToken:n.attributes.scim_api_token});case 6:case"end":return a.stop()}}),null,this)}},{key:"renderLoading",value:function(){return l.a.createElement("div",null,l.a.createElement(Be.a,{size:80}))}},{key:"renderForm",value:function(){var e=this.props,t=e.ssoSettings,n=e.roles,a=this.state.scimApiToken,r=n.map((function(e){return{value:e.id,label:e.attributes.name}}));return l.a.createElement("div",{className:"Page__content"},l.a.createElement(X.default,null,l.a.createElement("div",{className:"Page__content__section"},l.a.createElement("div",{className:"Page__content__section__title"},l.a.createElement(i.FormattedMessage,{id:"admin.ssoSettings.samlSettings.title"})),l.a.createElement(ee.default,{name:"idpMetadata",intlLabel:"admin.ssoSettings.idpSamlMetadataUrl",type:"text",required:!0}),l.a.createElement("div",{className:"form__field"},l.a.createElement("div",{className:"form__label"},l.a.createElement(i.FormattedMessage,{id:"admin.ssoSettings.samlToken"})),l.a.createElement(qm,{className:"form__input--code",value:t.attributes.saml_token}))),l.a.createElement("div",{className:"Page__content__section"},l.a.createElement("div",{className:"Page__content__section__title"},l.a.createElement(i.FormattedMessage,{id:"admin.ssoSettings.scimSettings.title"})),l.a.createElement("div",{className:"form__field"},l.a.createElement("div",{className:"form__label"},l.a.createElement(i.FormattedMessage,{id:"admin.ssoSettings.scimBaseUrl"})),l.a.createElement(qm,{value:t.attributes.scim_base_url})),l.a.createElement("div",{className:"form__field"},l.a.createElement("div",{className:"form__label"},l.a.createElement(i.FormattedMessage,{id:"admin.ssoSettings.scimToken"})),a?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"space--bottom-1"},l.a.createElement("div",{className:"Info Info--no-margin"},l.a.createElement("div",{className:"Info__body"},l.a.createElement(i.FormattedHTMLMessage,{id:"admin.ssoSettings.generateNewToken.info"})))),l.a.createElement(qm,{className:"form__input--code",value:a})):l.a.createElement("button",{type:"button",className:"button button--primary button--small",onClick:this.handleSsoGenerateToken.bind(this)},l.a.createElement(Sb,null),l.a.createElement(i.FormattedMessage,{id:"admin.ssoSettings.generateNewToken"})))),l.a.createElement("div",{className:"Page__content__section"},l.a.createElement("div",{className:"Page__content__section__title"},l.a.createElement(i.FormattedMessage,{id:"admin.ssoSettings.defaultRole.title"})),l.a.createElement(ee.default,{name:"defaultRoleId",intlLabel:"admin.ssoSettings.defaultRole",intlHint:"admin.ssoSettings.defaultRole.hint",required:!0,clearable:!1,options:r,component:Q.default})),l.a.createElement(Z.a,{intlLabel:"admin.ssoSettings.button"})))}},{key:"render",value:function(){var e=this.props,t=e.ssoSettings;return e.hasPermission?l.a.createElement("div",{className:"Page Page--large"},l.a.createElement("div",{className:"Page__inner"},l.a.createElement("div",{className:"Page__header"},l.a.createElement("div",{className:"Page__title"},l.a.createElement(i.FormattedMessage,{id:"admin.ssoSettings.title"}))),l.a.createElement("div",{className:"Info"},l.a.createElement("div",{className:"Info__icon"},l.a.createElement(Vl,null)),l.a.createElement("div",{className:"Info__body"},l.a.createElement(i.FormattedHTMLMessage,{id:"admin.ssoSettings.instructions"}))),t?this.renderForm():this.renderLoading())):l.a.createElement("div",{className:"permission-denied"},l.a.createElement("div",{className:"permission-denied__inner"},l.a.createElement("div",{className:"permission-denied__icon"},l.a.createElement("i",{className:"icon--blocked"})),l.a.createElement("div",{className:"permission-denied__title"},l.a.createElement(i.FormattedMessage,{id:"permissionDenied.title"})),l.a.createElement("div",{className:"permission-denied__subtitle"},l.a.createElement(i.FormattedMessage,{id:"permissionDenied.subtitle"}))))}}])&&Tb(n.prototype,a),r&&Tb(n,r),t}(c.a),Cb(jb,"propTypes",{dispatch:r.a.func.isRequired,ssoSettings:r.a.object,hasPermission:r.a.bool,roles:r.a.array}),wb=kb))||wb)||wb,Mb=n(604),Ib=n(1013);function Lb(){return(Lb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Ab=l.a.createElement("path",{d:"M500 8h-27.711c-6.739 0-12.157 5.548-11.997 12.286l2.347 98.575C418.212 52.043 342.256 8 256 8 134.813 8 33.933 94.924 12.296 209.824 10.908 217.193 16.604 224 24.103 224h28.576c5.674 0 10.542-3.982 11.737-9.529C83.441 126.128 161.917 60 256 60c79.545 0 147.942 47.282 178.676 115.302l-126.39-3.009c-6.737-.16-12.286 5.257-12.286 11.997V212c0 6.627 5.373 12 12 12h192c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12zm-12.103 280h-28.576c-5.674 0-10.542 3.982-11.737 9.529C428.559 385.872 350.083 452 256 452c-79.546 0-147.942-47.282-178.676-115.302l126.39 3.009c6.737.16 12.286-5.257 12.286-11.997V300c0-6.627-5.373-12-12-12H12c-6.627 0-12 5.373-12 12v192c0 6.627 5.373 12 12 12h27.711c6.739 0 12.157-5.548 11.997-12.286l-2.347-98.575C93.788 459.957 169.744 504 256 504c121.187 0 222.067-86.924 243.704-201.824 1.388-7.369-4.308-14.176-11.807-14.176z"}),Db=function(e){return l.a.createElement("svg",Lb({viewBox:"0 0 512 512",width:"1em",height:"1em"},e),Ab)};function zb(){return(zb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Bb,Ub,Hb,Vb=l.a.createElement("path",{d:"M400 208h-73.8V80c0-26.5-21.5-48-48-48H169.8c-26.5 0-48 21.5-48 48v128H48.1c-42.6 0-64.2 51.7-33.9 81.9l175.9 176c18.7 18.7 49.1 18.7 67.9 0l176-176c30-30.1 8.7-81.9-34-81.9zM224 432L48 256h121.8V80h108.3v176H400L224 432z"}),Gb=function(e){return l.a.createElement("svg",zb({viewBox:"0 0 448 512",width:"1em",height:"1em"},e),Vb)},Jb=n(497);function Wb(e){return(Wb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $b(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Kb(e,t){return!t||"object"!==Wb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qb(e){return(Qb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xb(e,t){return(Xb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Yb,Zb,ey,ty=Object(p.connect)((function(e){var t=e.ssoGroups,n=e.ssoSettings,a=e.roles,r=Object(d.getCurrentRole)(e);return{roles:a,ssoGroups:t,ssoUsers:Object.values(e.ssoUsers),ssoSettings:n,hasPermission:r.attributes.can_edit_site}}))((Hb=Ub=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Kb(this,Qb(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xb(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e(Object(Eb.fetch)()),e(Object(Mb.fetchAll)()),e(Object(Ib.fetchAll)())}},{key:"handleSsoCopyUsers",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.dispatch,t.prev=1,t.next=4,regeneratorRuntime.awrap(e(Object(Mb.copyUsers)()));case 4:e(Object(G.notice)("admin.ssoUsers.copy.success")),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),e(Object(G.alert)("admin.ssoUsers.copy.failure"));case 10:case"end":return t.stop()}}),null,this,[[1,7]])}},{key:"handleExportSsoUsers",value:function(){var e,t,n;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:e=this.props.ssoUsers,(t=[]).push("data:text/csv;charset=utf-8,".concat((n=["firstname","lastname","email","username","phone","company","department","group","role","password","title","status","delete"]).join(","))),e.forEach((function(e){var a=[e.attributes.first_name,e.attributes.last_name,e.attributes.username,e.attributes.username].concat(Object(Jb.a)(n.length-4).map((function(){return""})));t.push(a.join(","))})),window.open(encodeURI(t.join("\n")));case 6:case"end":return a.stop()}}),null,this)}},{key:"handleDestroy",value:function(e){var t,n;return regeneratorRuntime.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=this.props.dispatch,a.next=3,regeneratorRuntime.awrap(Object(se.b)("messages.confirm.destroyUser"));case 3:if(a.sent){a.next=5;break}return a.abrupt("return");case 5:return a.prev=5,a.prev=6,a.next=9,regeneratorRuntime.awrap(t(Object(Mb.destroy)({id:e.id})));case 9:a.next=24;break;case 11:if(a.prev=11,a.t0=a.catch(6),!a.t0||!a.t0.data||"DESTINATION_USER_REQUIRED"!==a.t0.data[0].attributes.code){a.next=23;break}return a.next=16,regeneratorRuntime.awrap(Object(Ef.a)(e,"editor.editor.destroy.newCreator.title","editor.editor.destroy.newCreator.description","editor.editor.destroy.newCreator.field","editor.editor.destroy.newCreator.submit"));case 16:if(n=a.sent){a.next=19;break}return a.abrupt("return");case 19:return a.next=21,regeneratorRuntime.awrap(t(Object(Mb.destroy)({id:e.id,destinationUser:n})));case 21:a.next=24;break;case 23:throw a.t0;case 24:t(Object(G.notice)("editor.editor.destroy.success")),a.next=30;break;case 27:a.prev=27,a.t1=a.catch(5),t(Object(G.alert)("editor.editor.destroy.failure"));case 30:case"end":return a.stop()}}),null,this,[[5,27],[6,11]])}},{key:"renderRow",value:function(e){var t=this.props,n=t.ssoGroups,a=t.roles,r="notSynced";e.attributes.external_id&&(r=e.attributes.is_active?"synced":"deactivated");var o=e.relationships.groups.data.map((function(e){return n[e.id]})).filter((function(e){return e})),c=db()({"is-disabled":!e.attributes.is_active});return l.a.createElement("tr",{key:e.id},l.a.createElement("td",{className:c},l.a.createElement(Zn.a,{withEmail:!0,withAvatar:!0,user:e,size:40})),l.a.createElement("td",{className:c},l.a.createElement(i.FormattedMessage,{id:"admin.ssoUsers.status.".concat(r)})),l.a.createElement("td",null,l.a.createElement(Mo.c,{label:a[e.relationships.role.data.id].attributes.name,icon:N},l.a.createElement(Mo.f,null,l.a.createElement(Mo.k,null,0===o.length?l.a.createElement(i.FormattedMessage,{id:"admin.ssoUsers.groups.noGroups"}):l.a.createElement(i.FormattedMessage,{id:"admin.ssoUsers.groups.groups",values:{groups:Object(wt.a)(o.map((function(e){return e.attributes.name})),", "," and ")}})),l.a.createElement(Mo.j,null),l.a.createElement(Mo.g,{red:!0,icon:qo.a,onClick:this.handleDestroy.bind(this,e)},l.a.createElement(i.FormattedMessage,{id:"admin.ssoUsers.remove"}))))))}},{key:"renderUsers",value:function(){var e=this,t=this.props.ssoUsers;return l.a.createElement(l.a.Fragment,null,0===t.length?this.renderBlankSlate():l.a.createElement("div",{className:"space--bottom-3"},l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"User"),l.a.createElement("th",null,"Status"),l.a.createElement("th",null,"Role"))),l.a.createElement("tbody",null,t.filter((function(e){return e.attributes.is_active&&e.attributes.external_id})).map((function(t){return e.renderRow(t)})),t.filter((function(e){return e.attributes.is_active&&!e.attributes.external_id})).map((function(t){return e.renderRow(t)})),t.filter((function(e){return!e.attributes.is_active})).map((function(t){return e.renderRow(t)}))))))}},{key:"renderBlankSlate",value:function(){return l.a.createElement("div",{className:"blank-slate"},l.a.createElement("p",{className:"blank-slate__title"},l.a.createElement(i.FormattedMessage,{id:"admin.ssoUsers.noUsers.title"})),l.a.createElement("p",{className:"blank-slate__description"},l.a.createElement(i.FormattedHTMLMessage,{id:"admin.ssoUsers.noUsers.description"})))}},{key:"render",value:function(){var e=this.props,t=e.ssoSettings;return e.hasPermission?l.a.createElement("div",{className:"Page"},l.a.createElement("div",{className:"Page__inner"},l.a.createElement("div",{className:"Page__header"},l.a.createElement("div",{className:"Page__title"},l.a.createElement(i.FormattedMessage,{id:"admin.ssoUsers.title"})),l.a.createElement("div",{className:"Page__space"}),t&&t.relationships.default_role.data&&l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{type:"button",className:"Page__action--primary",onClick:this.handleSsoCopyUsers.bind(this)},l.a.createElement(Db,null),l.a.createElement(i.FormattedMessage,{id:"admin.ssoUsers.copyUsers.button.default"})),l.a.createElement("button",{type:"button",className:"Page__action--primary",onClick:this.handleExportSsoUsers.bind(this)},l.a.createElement(Gb,null),l.a.createElement(i.FormattedMessage,{id:"admin.ssoUsers.exportUsers.button.default"})))),this.renderUsers())):l.a.createElement("div",{className:"permission-denied"},l.a.createElement("div",{className:"permission-denied__inner"},l.a.createElement("div",{className:"permission-denied__icon"},l.a.createElement("i",{className:"icon--blocked"})),l.a.createElement("div",{className:"permission-denied__title"},l.a.createElement(i.FormattedMessage,{id:"permissionDenied.title"})),l.a.createElement("div",{className:"permission-denied__subtitle"},l.a.createElement(i.FormattedMessage,{id:"permissionDenied.subtitle"}))))}}])&&$b(n.prototype,a),r&&$b(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Ub,"propTypes",{dispatch:r.a.func.isRequired,roles:r.a.object,ssoUsers:r.a.array,ssoGroups:r.a.object,ssoSettings:r.a.object,hasPermission:r.a.bool}),Bb=Hb))||Bb;function ny(e){return(ny="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ay(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ry(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ay(n,!0).forEach((function(t){uy(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ay(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function iy(){return(iy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function oy(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ly(e){return(ly=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sy(e,t){return(sy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var my,py,dy,fy=function(e,t){return e.attributes.priority-t.attributes.priority},by=Object(p.connect)((function(e){var t=Object(d.getCurrentRole)(e),n=Object.values(e.ssoGroups),a=e.ssoSettings;return{roles:e.roles,ssoSettings:a,ssoGroups:n.sort(fy),hasPermission:t.attributes.can_edit_site}}))((ey=Zb=function(e){function t(){var e,n,a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return a=this,n=!(r=(e=ly(t)).call.apply(e,[this].concat(o)))||"object"!==ny(r)&&"function"!=typeof r?cy(a):r,uy(cy(n),"state",{pendingMovement:null,disableRender:!1}),n}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sy(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e(Object(Eb.fetch)()),e(Object(Ib.fetchAll)())}},{key:"shouldComponentUpdate",value:function(e,t){return!t.disableRender}},{key:"handleDestroy",value:function(e){var t;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=this.props.dispatch,n.next=3,regeneratorRuntime.awrap(Object(se.b)("messages.confirm.destroySsoGroup"));case 3:if(n.sent){n.next=5;break}return n.abrupt("return");case 5:return n.prev=5,n.next=8,regeneratorRuntime.awrap(t(Object(Ib.destroy)({id:e.id})));case 8:t(Object(G.notice)("editor.editor.destroy.success")),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(5),t(Object(G.alert)("editor.editor.destroy.failure"));case 14:case"end":return n.stop()}}),null,this,[[5,11]])}},{key:"handleSsoCopyRoles",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.dispatch,t.prev=1,t.next=4,regeneratorRuntime.awrap(e(Object(Ib.copyRoles)()));case 4:e(Object(G.notice)("admin.ssoGroups.copy.success")),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),e(Object(G.alert)("admin.ssoGroups.copy.failure"));case 10:case"end":return t.stop()}}),null,this,[[1,7]])}},{key:"handleEdit",value:function(e,t){var n,a;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return n=this.props.dispatch,r.prev=1,a={type:"sso_group",id:e.id,attributes:{priority:e.attributes.priority},relationships:{role:{data:{id:t.id,type:"role"}}}},r.next=5,regeneratorRuntime.awrap(n(Object(Ib.update)({id:e.id,data:a})));case 5:n(Object(G.notice)("editor.editor.update.success")),r.next=12;break;case 8:throw r.prev=8,r.t0=r.catch(1),n(Object(G.alert)("editor.editor.update.failure")),Object(we.a)(r.t0);case 12:case"end":return r.stop()}}),null,this,[[1,8]])}},{key:"handleDragEnd",value:function(e){var t,n,a,r,i,o,l,c,s,u,m,p,d=this;return regeneratorRuntime.async((function(f){for(;;)switch(f.prev=f.next){case 0:if(t=e.source,n=e.destination,a=this.props,r=a.dispatch,i=a.ssoGroups,o={source:t,destination:n},n){f.next=5;break}return f.abrupt("return");case 5:return f.next=7,regeneratorRuntime.awrap(new Promise((function(e){d.setState({pendingMovement:o},e)})));case 7:return f.next=9,regeneratorRuntime.awrap(new Promise((function(e){d.setState({disableRender:!0},e)})));case 9:return f.prev=9,l=i[o.source.index],c=ne()(l),s=c.id,u=c.type,m=c.relationships,p={priority:Object(Mn.a)(i,o,"priority")},f.next=15,regeneratorRuntime.awrap(r(Object(Ib.update)({id:s,data:{id:s,type:u,attributes:p,relationships:m}})));case 15:return f.next=17,regeneratorRuntime.awrap(r(Object(Ib.fetchAll)()));case 17:r(Object(G.notice)("admin.ssoGroups.reorderField.success")),this.setState({pendingMovement:null,disableRender:!1}),f.next=26;break;case 21:throw f.prev=21,f.t0=f.catch(9),r(Object(G.alert)("admin.ssoGroups.reorderField.failure")),this.setState({pendingMovement:null,disableRender:!1}),f.t0;case 26:case"end":return f.stop()}}),null,this,[[9,21]])}},{key:"renderGroups",value:function(){var e=this,t=this.props.ssoGroups,n=this.state.pendingMovement;return 0===t.length?this.renderBlankSlate():l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null),l.a.createElement("th",null,"Group"),l.a.createElement("th",null,"Role"))),l.a.createElement(On.a,{onDragEnd:this.handleDragEnd.bind(this)},l.a.createElement(On.c,{droppableId:"items"},(function(a,r){return l.a.createElement("tbody",iy({className:[].concat(r.isDraggingOver?["is-dragging-over"]:[]).join(" "),ref:a.innerRef},a.droppableProps),Object(Mn.b)(t,n).map((function(t,n){return e.renderRow(t,n)})),a.placeholder)}))))}},{key:"renderRow",value:function(e,t){var n=this,a=this.props.roles,r=e.relationships.role.data&&a[e.relationships.role.data.id];return l.a.createElement(On.b,{draggableId:e.id,index:t},(function(t,o){return l.a.createElement("tr",iy({key:e.id,ref:t.innerRef},t.draggableProps,{style:ry({},t.draggableProps.style,{display:o.isDragging?"table":null})}),l.a.createElement("td",t.dragHandleProps,l.a.createElement("i",{className:"icon--hamburger"})),l.a.createElement("td",null,l.a.createElement("div",{className:"Users__profile"},l.a.createElement("div",{className:"Users__profile__info"},l.a.createElement("div",{className:"Users__profile__name"},e.attributes.name)))),l.a.createElement("td",null,l.a.createElement(Mo.c,{label:r?r.attributes.name:"No role",icon:N},l.a.createElement(Mo.f,null,l.a.createElement(Mo.d,{intlName:"admin.ssoUsers.changeRole"},Object.values(a).map((function(t){return l.a.createElement(Mo.g,{key:t.id,active:r&&t.id===r.id,onClick:n.handleEdit.bind(n,e,t)},t.attributes.name)})),l.a.createElement(Mo.j,null),l.a.createElement(Mo.g,{red:!0,icon:qo.a,onClick:n.handleDestroy.bind(n,e)},l.a.createElement(i.FormattedMessage,{id:"admin.ssoGroups.remove"})))))))}))}},{key:"renderBlankSlate",value:function(){return l.a.createElement("div",{className:"blank-slate"},l.a.createElement("p",{className:"blank-slate__title"},l.a.createElement(i.FormattedMessage,{id:"admin.ssoGroups.noGroups.title"})),l.a.createElement("p",{className:"blank-slate__description"},l.a.createElement(i.FormattedHTMLMessage,{id:"admin.ssoGroups.noGroups.description"})))}},{key:"render",value:function(){var e=this.props,t=e.ssoSettings;return e.hasPermission?l.a.createElement("div",{className:"Page"},l.a.createElement("div",{className:"Page__inner"},l.a.createElement("div",{className:"Page__header"},l.a.createElement("div",{className:"Page__title"},l.a.createElement(i.FormattedMessage,{id:"admin.ssoGroups.title"})),l.a.createElement("div",{className:"Page__space"}),t&&t.relationships.default_role.data&&l.a.createElement("button",{type:"button",className:"Page__action--primary",onClick:this.handleSsoCopyRoles.bind(this)},l.a.createElement(Db,null),l.a.createElement(i.FormattedMessage,{id:"admin.ssoGroups.copyRoles.button.default"}))),this.renderGroups())):l.a.createElement("div",{className:"permission-denied"},l.a.createElement("div",{className:"permission-denied__inner"},l.a.createElement("div",{className:"permission-denied__icon"},l.a.createElement("i",{className:"icon--blocked"})),l.a.createElement("div",{className:"permission-denied__title"},l.a.createElement(i.FormattedMessage,{id:"permissionDenied.title"})),l.a.createElement("div",{className:"permission-denied__subtitle"},l.a.createElement(i.FormattedMessage,{id:"permissionDenied.subtitle"}))))}}])&&oy(n.prototype,a),r&&oy(n,r),t}(c.a),uy(Zb,"propTypes",{dispatch:r.a.func.isRequired,ssoGroups:r.a.array,roles:r.a.object,hasPermission:r.a.bool,ssoSettings:r.a.object}),Yb=ey))||Yb;function yy(e){return(yy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hy(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _y(e,t){return!t||"object"!==yy(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vy(e){return(vy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gy(e,t){return(gy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.d(t,"default",(function(){return Ey}));var Ey=Object(p.connect)((function(e){var t=Object(d.getCurrentRole)(e),n=Object(d.allowedEnviromentIds)(e);return{role:t?t.attributes:{},allowedEnviromentIds:n,isSsoEnabled:Object(d.isSsoEnabled)(e)}}))((dy=py=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_y(this,vy(t).apply(this,arguments))}var n,a,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gy(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this.props,t=e.role,n=e.isSsoEnabled,a=e.allowedEnviromentIds,r=e.match.url;return l.a.createElement(u.a,{minSize:220,defaultSize:240,split:"vertical"},l.a.createElement("div",{className:"AdminAreaBar"},l.a.createElement("div",{className:"AdminAreaBar__inner"},(t.can_edit_schema||t.can_edit_site)&&l.a.createElement("div",{className:"AdminAreaBar__group"},l.a.createElement("div",{className:"AdminAreaBar__group__name"},"Project"),t.can_edit_site&&l.a.createElement(s.a,{className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active",to:"".concat(r,"/site")},l.a.createElement(y.a,null),l.a.createElement(i.FormattedMessage,{id:"adminArea.splitPane.siteSettings"})),t.can_edit_schema&&l.a.createElement(s.a,{className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active",to:"".concat(r,"/usage")},l.a.createElement(v,null),l.a.createElement(i.FormattedMessage,{id:"adminArea.splitPane.usage"}))),t.can_edit_schema&&l.a.createElement("div",{className:"AdminAreaBar__group"},l.a.createElement("div",{className:"AdminAreaBar__group__name"},l.a.createElement(i.FormattedMessage,{id:"adminArea.splitPane.structure"}),l.a.createElement("a",{className:"AdminAreaBar__group__name__extra",href:Object(m.Q)()},l.a.createElement("i",{className:"icon--download"}),l.a.createElement(i.FormattedMessage,{id:"adminArea.splitPane.erd"}))),l.a.createElement(l.a.Fragment,null,l.a.createElement(s.a,{className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active",to:"".concat(r,"/item_types")},l.a.createElement(O,null),l.a.createElement(i.FormattedMessage,{id:"adminArea.splitPane.itemTypes"})),l.a.createElement(s.a,{className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active",to:"".concat(r,"/plugins")},l.a.createElement(k,null),l.a.createElement(i.FormattedMessage,{id:"adminArea.splitPane.plugins"})))),(t.can_manage_users||t.can_manage_access_tokens)&&l.a.createElement("div",{className:"AdminAreaBar__group"},l.a.createElement("div",{className:"AdminAreaBar__group__name"},l.a.createElement(i.FormattedMessage,{id:"adminArea.splitPane.permissions"})),t.can_manage_users&&l.a.createElement(s.a,{to:"".concat(r,"/roles"),className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active"},l.a.createElement(N,null),l.a.createElement(i.FormattedMessage,{id:"adminArea.splitPane.manageRoles"})),t.can_manage_users&&l.a.createElement(s.a,{to:"".concat(r,"/users"),className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active"},l.a.createElement(R,null),l.a.createElement(i.FormattedMessage,{id:"adminArea.splitPane.manageEditors"})),t.can_manage_access_tokens&&l.a.createElement(s.a,{className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active",to:"".concat(r,"/access_tokens")},l.a.createElement(B,null),l.a.createElement(i.FormattedMessage,{id:"adminArea.splitPane.apiTokens"}))),t.can_manage_webhooks&&l.a.createElement("div",{className:"AdminAreaBar__group"},l.a.createElement("div",{className:"AdminAreaBar__group__name"},l.a.createElement(i.FormattedMessage,{id:"adminArea.splitPane.webhooks"})),l.a.createElement(s.a,{to:"".concat(r,"/webhooks"),className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active"},l.a.createElement(L,null),l.a.createElement(i.FormattedMessage,{id:"adminArea.splitPane.manageWebhooks"})),l.a.createElement(s.a,{to:"".concat(r,"/webhook_calls"),className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active"},l.a.createElement(q,null),l.a.createElement(i.FormattedMessage,{id:"adminArea.splitPane.webhookCalls"}))),(t.can_manage_deployment_environments||a.length>0)&&l.a.createElement("div",{className:"AdminAreaBar__group"},l.a.createElement("div",{className:"AdminAreaBar__group__name"},l.a.createElement(i.FormattedMessage,{id:"adminArea.splitPane.deployment"})),t.can_manage_deployment_environments&&l.a.createElement(s.a,{className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active",to:"".concat(r,"/deployment_environments")},l.a.createElement(A.a,null),l.a.createElement(i.FormattedMessage,{id:"adminArea.splitPane.deploymentSettings"})),a.length>0&&l.a.createElement(s.a,{className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active",to:"".concat(r,"/deployment_logs")},l.a.createElement(q,null),l.a.createElement(i.FormattedMessage,{id:"adminArea.splitPane.deploymentLogs"}))),n&&t.can_edit_site&&l.a.createElement("div",{className:"AdminAreaBar__group"},l.a.createElement("div",{className:"AdminAreaBar__group__name"},l.a.createElement(i.FormattedMessage,{id:"adminArea.splitPane.sso"})),l.a.createElement(s.a,{className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active",to:"".concat(r,"/sso-settings")},l.a.createElement(y.a,null),l.a.createElement(i.FormattedMessage,{id:"adminArea.splitPane.ssoSettings"})),l.a.createElement(s.a,{className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active",to:"".concat(r,"/sso-users")},l.a.createElement(R,null),l.a.createElement(i.FormattedMessage,{id:"adminArea.splitPane.ssoUsers"})),l.a.createElement(s.a,{className:"AdminAreaBar__item",activeClassName:"AdminAreaBar__item--active",to:"".concat(r,"/sso-groups")},l.a.createElement(V,null),l.a.createElement(i.FormattedMessage,{id:"adminArea.splitPane.ssoGroups"}))))),l.a.createElement("div",{className:"wrap"},l.a.createElement(f.e,null,l.a.createElement(b.a,{condition:t.can_edit_site,path:"".concat(r,"/site"),component:Ie}),l.a.createElement(b.a,{condition:t.can_edit_schema,path:"".concat(r,"/usage"),component:Ke}),l.a.createElement(b.a,{path:"".concat(r,"/item_types"),condition:t.can_edit_schema,component:cc}),l.a.createElement(b.a,{path:"".concat(r,"/plugins"),condition:t.can_edit_schema,component:gm}),l.a.createElement(b.a,{path:"".concat(r,"/roles"),condition:t.can_manage_users,component:ju}),l.a.createElement(b.a,{path:"".concat(r,"/users"),condition:t.can_manage_users,component:gb}),l.a.createElement(b.a,{path:"".concat(r,"/access_tokens"),condition:t.can_manage_access_tokens,component:$f}),l.a.createElement(b.a,{path:"".concat(r,"/webhook_calls"),condition:t.can_manage_webhooks,component:Rs}),l.a.createElement(b.a,{path:"".concat(r,"/webhooks"),condition:t.can_manage_webhooks,component:as}),l.a.createElement(b.a,{path:"".concat(r,"/deployment_logs"),condition:a.length>0,component:sf}),l.a.createElement(b.a,{path:"".concat(r,"/deployment_environments"),condition:t.can_manage_deployment_environments,component:Vd}),l.a.createElement(l.a.Fragment,null,l.a.createElement(b.a,{path:"".concat(r,"/sso-settings"),condition:n&&t.can_edit_site,component:qb}),l.a.createElement(b.a,{path:"".concat(r,"/sso-users"),condition:n&&t.can_edit_site,component:ty}),l.a.createElement(b.a,{path:"".concat(r,"/sso-groups"),condition:n&&t.can_edit_site,component:by})),l.a.createElement(f.b,{to:"".concat(r,"/item_types")}))))}}])&&hy(n.prototype,a),r&&hy(n,r),t}(c.a),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(py,"propTypes",{role:r.a.object,match:r.a.object,allowedEnviromentIds:r.a.array,isSsoEnabled:r.a.bool}),my=dy))||my}}]);
//# sourceMappingURL=admin.bundle.js.map