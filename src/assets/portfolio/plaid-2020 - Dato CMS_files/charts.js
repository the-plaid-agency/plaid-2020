(window.webpackJsonpDato=window.webpackJsonpDato||[]).push([[3],{2974:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return P}));var n,a,o,c=r(1),u=r.n(c),i=r(0),l=r.n(i),s=r(4),f=r(2952),p=r(456),d=r(2273),y=r(2274),b=r(2946),m=r(2947),h=r(2949),v=r(2948),g=r(2958),O=r(66),j=r(6),E=r(2951);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var x,M,N,U=function(){var e=Object(b.a)(new Date),t=e,r=[];do{r.push(t),t=Object(m.a)(t,1)}while(Object(v.a)(t,e));return r},P=Object(j.connect)((function(e){return{accentColor:Object(O.default)(e.ui.colors.accentColor)}}))((o=a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_(this,C(t).apply(this,arguments))}var r,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,e),r=t,(n=[{key:"renderValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.props.unit;return"bytes"===n?Object(p.a)(e,t,r):"minutes"===n?Object(y.a)(e):Object(d.a)(e,t,r)}},{key:"renderCharts",value:function(){var e=this,t=this.props,r=t.data,n=t.threshold,a=t.metrics,o=t.accentColor,c=t.cumulative,u=function(e,t){var r=[];return U().forEach((function(n){var a=Object(f.a)(n,"yyyy-MM-dd"),o=Object(f.a)(Object(g.a)(n,-1),"yyyy-MM-dd"),c={date:n.getDate()};t.forEach((function(t){c[t]={current:e[a]?e[a].attributes[t]:null,previous:e[o]?e[o].attributes[t]:null}})),r.push(c)})),r}(r,a),i=function(e,t){var r=[];return e.forEach((function(e,n){var a={date:e.date};t.forEach((function(t){var o=n>0?r[n-1][t].current:null,c=n>0?r[n-1][t].previous:null,u=e[t].current,i=e[t].previous,l=e.date<=(new Date).getDate()?(o||0)+(u||0):null,s=(c||0)+(i||0);a[t]={current:l,previous:s}})),r.push(a)})),r}(u,a),s=this.d(new Date,{month:"long"}),p=this.d(Object(g.a)(new Date,-1),{month:"long"}),d=c?i:u;return l.a.createElement(E.g,{height:250,width:"100%"},l.a.createElement(E.b,{margin:{top:5,right:5,left:5,bottom:5},data:d,syncId:"usage"},l.a.createElement(E.c,{strokeDasharray:"1px 1px",vertical:!1}),l.a.createElement(E.j,{dataKey:function(e){return Math.max(a.reduce((function(t,r){return t+(e[r].previous||0)}),0),a.reduce((function(t,r){return t+(e[r].current||0)}),0))},tickFormatter:function(t){return e.renderValue(t,0,!1)}}),l.a.createElement(E.i,{dataKey:"date",type:"number",tickCount:10,domain:[1,"dataMax"]}),l.a.createElement(E.e,{payload:[{value:p,type:"line",color:"#b6b9bc"},{value:s,type:"line",color:o}]}),a.map((function(t){return l.a.createElement(E.a,{type:"linear",id:"previous-".concat(t),key:"previous-".concat(t),name:e.t("dailyUsage.".concat(t)),dataKey:function(e){return e[t].previous},stroke:"#b6b9bc",strokeWidth:"2px",fill:"#e9ecef",fillOpacity:1,connectNulls:!0,stackId:"previous"})})),a.map((function(t){return l.a.createElement(E.a,{key:"current-".concat(t),id:"current-".concat(t),name:e.t("dailyUsage.".concat(t)),type:"linear",dataKey:function(e){return e[t].current},strokeWidth:"2px",stroke:o,fill:o,fillOpacity:.1,connectNulls:!0,stackId:"current"})})),c&&l.a.createElement(E.f,{y:n,stroke:"red",strokeWidth:"2px",strokeDasharray:"5 5"},l.a.createElement(E.d,{value:"Your plan's limit",position:"bottom",offset:8})),l.a.createElement(E.h,{formatter:function(t){return e.renderValue(t)},labelFormatter:function(t){return e.d(Object(h.a)(new Date,t),{month:"long",day:"numeric"})}})))}},{key:"render",value:function(){var e=this.props,t=e.name,r=e.data,n=e.metrics,a=U().reduce((function(e,t){var a=Object(f.a)(t,"yyyy-MM-dd");return e+n.reduce((function(e,t){return e+(r[a]?r[a].attributes[t]:0)}),0)}),0);return l.a.createElement("div",{className:"UsageChart"},l.a.createElement("div",{className:"UsageChart__header"},l.a.createElement("div",{className:"UsageChart__name"},t),l.a.createElement("div",{className:"UsageChart__avg"},void 0!==a?this.renderValue(a):"Loading...")),l.a.createElement("div",{className:"UsageChart__graph"},this.renderCharts()))}}])&&k(r.prototype,n),a&&k(r,a),t}(s.a),x=a,M="propTypes",N={name:u.a.string,unit:u.a.string,data:u.a.object,metrics:u.a.string.isRequired,threshold:u.a.number,accentColor:u.a.string,cumulative:u.a.bool},M in x?Object.defineProperty(x,M,{value:N,enumerable:!0,configurable:!0,writable:!0}):x[M]=N,n=o))||n}}]);
//# sourceMappingURL=charts.bundle.js.map